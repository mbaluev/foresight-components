$(function(){$(".fs-view__middle").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(window).trigger("resize")}),$("#button_toggle-menu").each(function(){function t(){i.icon__menu("toggle"),onlyloaded||$main.hasClass("fs-view__main_transition")||$main.addClass("fs-view__main_transition"),$left.removeClass("fs-view__left_hidden"),$middle.removeClass("fs-view__middle_full"),$left.after($backdrop),$backdrop.on("click",a),n.one("click",e)}function e(){i.icon__menu("toggle"),onlyloaded||$main.hasClass("fs-view__main_transition")||$main.addClass("fs-view__main_transition"),$left.addClass("fs-view__left_hidden"),$middle.addClass("fs-view__middle_full"),$backdrop.remove(),n.one("click",t)}function a(){n.trigger("click")}var n=$(this),i=n.find(".icon__menu");$main=$(".fs-view__main"),$left=$(".fs-view__left"),$middle=$(".fs-view__middle"),$backdrop=$('<div class="fs-view__backdrop"></div>'),onlyloaded=!0,$(window).outerWidth(),n.one("click",t),onlyloaded=!1})}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"button",target:a});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,width:"auto",popup_animation:!0},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={popup:t('<div class="popup"></div>')},n.destroy=function(){n.data._el.popup.data("_widget")&&n.data._el.popup.popup("destroy"),a.data=null,a.remove()},n.disable=function(){if(a.removeClass("button_hovered"),a.removeClass("button_clicked_out"),a.addClass("button_disabled"),t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}n.data.disabled=!0},n.enable=function(){if(a.removeClass("button_clicked_out"),a.removeClass("button_disabled"),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});n.data.disabled=!1},n.hide=function(){a.removeClass("button_clicked_out"),a.addClass("button_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("button_clicked_out"),a.removeClass("button_hidden"),n.data.hidden=!1},n.check=function(){a.addClass("button_checked"),a.attr("data-checked","true"),n.data.checked=!0},n.uncheck=function(){a.removeClass("button_checked"),a.attr("data-checked","false"),n.data.checked=!1},n.hover=function(){a.addClass("button_hovered")},n.unhover=function(){a.removeClass("button_hovered")},n.click=function(){a.addClass("button_clicked"),a.removeClass("button_clicked_out"),t("body").one("mouseup.button.private touchend.button.private",n.unclick)},n.unclick=function(){a.addClass("button_clicked_out"),a.removeClass("button_clicked")},n.set_width=function(t){a.css("width",t)},n.bind=function(){a.on("mouseover.button.private",n.hover),a.on("mouseout.button.private",n.unhover),a.on("mousedown.button.private touchstart.button.private",n.click),n.data.trigger&&a.on("click.button.trigger",function(t){t.preventDefault(),a.find("."+n.data.triggercontainer).trigger(n.data.trigger)})},n.bind_checkbox=function(){a.bindFirst("click.button.check",null,null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()})},n.bind_radio=function(){a.bindFirst("click.button.radio",null,null,function(t){t.preventDefault(),n.data.checked||n.check()})},n.init_components=function(){"popup"==n.data.toggle&&(n.data._el.popup=t(n.data.target),n.data._el.popup.popup({source:a,animation:n.data.popup_animation}))},n.init=function(){n.set_width(n.data.width),n.init_components(),n.bind(),a.hasClass("button_toggable_check")&&(n.data._widget.type="button.checkbox",n.init_check(),n.bind_checkbox()),a.hasClass("button_toggable_radio")&&(n.data._widget.type="button.radio",n.init_check(),n.bind_radio()),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width)},n.init_check=function(){n.data.checked?n.check():n.uncheck()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})}};t.fn.button=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.button"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="button"]').button()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"icon__menu",target:a});var n=this.obj={};n.defaults={},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._el={ham:a,menu_top:a.find(".icon__menu-top"),menu_middle:a.find(".icon__menu-middle"),menu_bottom:a.find(".icon__menu-bottom")},n.toggle=function(){n.data._el.ham.toggleClass("icon__menu_click"),n.data._el.menu_top.toggleClass("icon__menu-top_click"),n.data._el.menu_middle.toggleClass("icon__menu-middle_click"),n.data._el.menu_bottom.toggleClass("icon__menu-bottom_click")},n.bind=function(){n.data._el.ham.on("toggle.icon__menu",function(t){n.toggle(t),t.preventDefault()})},n.init=function(){n.bind()},n.init()}return this})},toggle:function(){return this.each(function(){this.obj.toggle()})}};t.fn.icon__menu=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.icon__menu"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="icon__menu"]').icon__menu()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"tumbler",target:a});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={input:a.find(".tumbler__input"),button:a.find("button")},n.data._triggers={on:"on.fc.tumbler",off:"off.fc.tumbler"},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),a.data=null,a.remove()},n.disable=function(){if(a.addClass("tumbler_disabled"),a.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(a.removeClass("tumbler_disabled"),a.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data.disabled=!1,n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable")},n.hide=function(){a.addClass("tumbler_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("tumbler_hidden"),n.data.hidden=!1},n.check=function(){a.addClass("tumbler_checked"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,a.trigger(n.data._triggers.on)},n.uncheck=function(){a.removeClass("tumbler_checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,a.trigger(n.data._triggers.off)},n.hover=function(){a.addClass("checkbox_hovered")},n.unhover=function(){a.removeClass("checkbox_hovered")},n.click=function(){a.addClass("checkbox_clicked"),t("body").one("mouseup.checkbox touchend.checkbox",n.unclick)},n.unclick=function(){a.removeClass("checkbox_clicked")},n.bind=function(){a.on("mouseover.checkbox",n.hover),a.on("mouseout.checkbox",n.unhover),a.on("mousedown.checkbox touchstart.checkbox",n.click),a.bindFirst("click.tumbler",null,null,function(){n.data.checked?n.uncheck():n.check()})},n.init_components=function(){n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var e=[];return this.each(function(){e.push(this.obj.data.checked)}),e},value:function(){return this.tumbler("checked")}};t.fn.tumbler=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.tumbler"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tumbler"]').tumbler()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"popup",target:a});var n=this.obj={};n.defaults={source:null,width:"full",height:"auto",position:"bottom left",animation:!0,visible:!1,offset:10,select:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._el={source:n.data.source,source_arrow:n.data.source.find(".icon_svg_down")},n.destroy=function(){a.data=null,a.remove()},n.hide=function(){a.removeClass("popup_visible_bottom"),n.data.visible=!1,void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.removeClass("icon_rotate_180deg")},n.show=function(){n.data.animation&&a.addClass("popup_animation"),n.set_position(n.data.position),n.data.visible=!0,a.addClass("popup_visible_bottom"),void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.addClass("icon_rotate_180deg")},n.toggle=function(){n.data.visible?n.hide():n.show()},n.mouseup_self=function(t){t.originalEvent.inFocus=!0},n.mouseup_source=function(t){t.originalEvent.inFocus=!0},n.mouseup_body=function(t){t.originalEvent.inFocus||n.hide()},n.set_width=function(t){"full"!=t&&"100%"!=t||(t=n.data._el.source.outerWidth(),n.data.width=t),a.css({width:t,"max-width":t})},n.set_height=function(t){a.css("max-height",t)},n.set_position=function(e,i){if(void 0===i&&(i=0),i<10){var o,d,c=n.get_dimentions(n.data._el.source),s=n.get_dimentions(a),l=e.split(" "),u=n.data.offset,r=l[0],_=l[1];switch(r){case"top":o=c.top-s.height-u;break;case"right":d=c.left+c.width+u;break;case"bottom":o=c.top+c.height+u;break;case"left":d=c.left-s.width-u}switch(_){case"top":o=c.top;break;case"right":d=c.left+c.width-s.width;break;case"bottom":o=c.top+c.height-s.height;break;case"left":d=c.left;break;case"center":/left|right/.test(r)?o=c.top+c.height/2-s.height/2:d=c.left+c.width/2-s.width/2}a.css({left:d,top:o});var h=n.get_offset(n.data._el.source);switch(e){case"bottom right":(h.top+h.height+u+s.height>t(window).height()||h.left+h.width-s.width<0)&&n.set_position("left top",++i);break;case"left top":(h.left-u-s.width<0||h.top+s.height>t(window).height())&&n.set_position("left center",++i);break;case"left center":(h.left-u-s.width<0||h.top+h.height/2+s.height/2>t(window).height()||h.top+h.height/2-s.height/2<0)&&n.set_position("left bottom",++i);break;case"left bottom":(h.left-u-s.width<0||h.top+h.height-s.height<0)&&n.set_position("top right",++i);break;case"top right":(h.top-u-s.height<0||h.left+h.width-s.width<0)&&n.set_position("top left",++i);break;case"top left":(h.top-u-s.height<0||h.left+s.width>t(window).width())&&n.set_position("right bottom",++i);break;case"right bottom":(h.left+h.width+u+s.width>t(window).width()||h.top+h.height-s.height<0)&&n.set_position("right center",++i);break;case"right center":(h.left+h.width+u+s.width>t(window).width()||h.top+h.height/2+s.height/2>t(window).height()||h.top+h.height/2-s.height/2<0)&&n.set_position("right top",++i);break;case"right top":(h.left+h.width+u+s.width>t(window).width()||h.top+s.height>t(window).height())&&n.set_position("bottom left",++i);break;case"bottom left":(h.top+h.height+u+s.height>t(window).height()||h.left+s.width>t(window).width())&&n.set_position("bottom right",++i)}}},n.get_dimentions=function(t){var e=t.position();return{width:t.outerWidth(),height:t.outerHeight(),left:e.left,top:e.top}},n.get_offset=function(t){var e=t.offset();return{width:t.outerWidth(),height:t.outerHeight(),left:e.left,top:e.top}},n.bind=function(){n.data._el.source.on("click.popup.toggle",function(t){t.preventDefault(),n.toggle()}),n.data._el.source.on("mouseup.popup.source touchend.popup.source",n.mouseup_source),a.on("mouseup.popup.self touchend.popup.self",n.mouseup_self),t("body").on("mouseup.popup.body touchend.popup.body",n.mouseup_body)},n.init_components=function(){void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.addClass("icon_animate")},n.init=function(){n.init_components(),n.bind(),n.data.select&&a.addClass("popup_select "),n.data.visible?n.show():n.hide(),n.set_width(n.data.width),n.set_height(n.data.height)},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},set_height:function(t){return this.each(function(){this.obj.set_height(t)})}};t.fn.popup=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.popup"):e.init.apply(this,arguments)}}(jQuery),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"menu",target:a});var n=this.obj={};n.defaults={},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.init=function(){a.find(".menu__item").each(function(){var e=t(this),a=e.children(".menu__item-link"),n=a.children(".menu__item-link-content").children(".menu__icon"),i=e.children(".menu__submenu-container");i.length>0&&(a.removeAttr("href"),n.addClass("icon_animate"),a.on("click",function(){i.slideToggle(500),n.toggleClass("icon_rotate_0deg")}))})},n.init()}return this})}};t.fn.menu=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.menu"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="menu"]').menu()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"widget_grid",target:a});var n=this.obj={};n.defaults={mode:"view",disabled:!0,items:[],buttons:[],tumbler:{selector:""},grid:{cellHeight:20,disableDrag:!0,disableResize:!0,resizable:{handles:"e, se, s, sw, w"}},loader:null,library:null},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._el={grid:null,nodes:[],nodesCount:0,tumbler:t(n.data.tumbler.selector)},n.data._triggers={add:"add.fc.widget-grid",save:"save.fc.widget-grid"},n.destroy=function(){n.clearGrid(),_.each(n.data._nodes,function(t){t.widget.widget("destroy")}),a.data=null,a.remove()},n.add=function(){var t={x:0,y:0,width:2,height:4,settings:{name:"Новый виджет",collapsed:!1}};n.create_widget(t),a.trigger(n.data._triggers.add,[t])},n.save=function(){n.data.items=_.map(a.children(".grid-stack-item:visible"),function(e){e=t(e);var a=n.get(e);return{x:a.x,y:a.y,width:a.width,height:a.height,settings:_.omitBy(a.widget.data(),function(t,e){return"_"==e.substring(0,1)||"mode"==e||"loader"==e||"library"==e})}},this),a.trigger(n.data._triggers.save,[n.data.items])},n.clear=function(){n.data._el.grid.removeAll()},n.load=function(){n.data._el.grid.removeAll();var t=GridStackUI.Utils.sort(n.data.items);_.each(t,function(t){n.create_widget(t)})},n.create_widget=function(e){n.data._el.nodesCount++,e._id=n.data._el.nodesCount,e._height=e.height,e.settings.loader=n.data.loader,e.settings.library=n.data.library,e.widget=t('<div class="widget" id="widget'+n.data._el.nodesCount+'"></div>').widget(e.settings),e.el=t('<div><div class="grid-stack-item-content"></div></div>'),_.unset(e,"settings"),e.el.find(".grid-stack-item-content").append(e.widget),e.widget.off("toggle.widget"),e.widget.data()._el.buttons.button_collapse.off("click.widget"),e.widget.data()._el.buttons.button_collapse.on("click.widget-grid",function(){e.widget.data().collapsed?n.expand_widget(e,!0):n.collapse_widget(e,!0)}),e.widget.data()._el.buttons.button_remove.on("click.widget-grid",function(){n.remove_widget(e)}),e.widget.widget("edit_mode"),n.data._el.grid.addWidget(e.el,e.x,e.y,e.width,e.height),n.data._el.nodes.push(e),n.set(e.el,e)},n.collapse_widget=function(t,e){var a=t.widget.data().collapsed;n.update_widget(t.el,1),t.widget.widget("collapse"),e||(t.widget.data().collapsed=a)},n.expand_widget=function(t,e){var a=t.widget.data().collapsed;n.update_widget(t.el,t._height),t.widget.widget("expand"),e||(t.widget.data().collapsed=a)},n.remove_widget=function(t){n.data._el.grid.removeWidget(t.el),n.data._el.nodes=n.data._el.nodes.filter(function(e){return e._id!==t._id})},n.update_widget=function(t,e){n.data._el.grid.update(t,null,null,null,e)},n.edit_mode=function(){n.data.mode="edit",_.each(n.data._el.nodes,function(t){t.widget.widget("edit_mode"),n.expand_widget(t,!1)}),n.enable()},n.view_mode=function(){n.data.mode="view",_.each(n.data._el.nodes,function(t){t._height=n.get(t.el).height,t.widget.widget("view_mode"),t.widget.data().collapsed?n.collapse_widget(t,!1):n.expand_widget(t,!1)}),n.disable()},n.create=function(){return a.hasClass("grid-stack")?(a.gridstack(n.data.grid),n.data._el.grid=a.data("gridstack"),!0):(t.error("Container does not have class .grid-stack"),!1)},n.enable=function(){n.data.disabled=!1,n.data._el.grid.enableMove(!0,!0),n.data._el.grid.enableResize(!0,!0)},n.disable=function(){n.data.disabled=!0,n.data._el.grid.enableMove(!1,!0),n.data._el.grid.enableResize(!1,!0)},n.set=function(e,a){t.extend(e.data("_gridstack_node"),a)},n.get=function(t){return t.data("_gridstack_node")},n.bind_buttons=function(){n.data.buttons.forEach(function(e){var a=t(e.selector);e.action&&"function"==typeof n[e.action]&&a.on("click",function(){n[e.action]()})})},n.init_tumbler=function(){void 0!==n.data._el.tumbler[0]&&n.data._el.tumbler.on("on.fc.tumbler",function(){n.data.buttons.forEach(function(e){t(e.selector).button("show")}),n.edit_mode()}).on("off.fc.tumbler",function(){n.data.buttons.forEach(function(e){t(e.selector).button("hide")}),n.view_mode()})},n.init=function(){n.create()&&(n.load(),n.view_mode(),n.bind_buttons(),n.init_tumbler())},n.init()}return this})},view_mode:function(){return this.each(function(){this.obj.view_mode()})},edit_mode:function(){return this.each(function(){this.obj.edit_mode()})},save:function(){return this.each(function(){this.obj.save()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.widget_grid=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.widget_grid"):e.init.apply(this,arguments)}}(jQuery),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"modal",target:a});var n=this.obj={};n.defaults={buttons:[{name:"destroy",action:"destroy",icon:"icon_svg_close"}],header:{icon:"icon_svg_settings",caption:"Модальное окно",name:"Название"},content:{tabs:[{id:"general",name:"Главная"}]},data:null,show:!0},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._el={modal__view:t('<div class="modal__view"></div>'),modal__backdrop:t('<div class="modal__backdrop"></div>'),modal__dialog:t('<div class="modal__dialog modal__dialog_hidden"></div>'),card:t('<div class="card" data-fc="card"></div>'),card__header:t('<div class="card__header"></div>'),card__header_row_caption:t('<div class="card__header-row"></div>'),card__header_row_name:t('<div class="card__header-row"></div>'),card__header_row_tabs:t('<div class="card__header-row tabs"></div>'),tabs__list:t('<ul class="tabs__list"></ul>'),card__main:t('<div class="card__main"></div>'),card__middle:t('<div class="card__middle"></div>'),card__middle_scroll:t('<div class="card__middle-scroll"></div>'),card__middle_inner:t('<div class="card__middle-inner"></div>'),card__backdrop:t('<div class="card__backdrop"></div>'),card__right:t('<div class="card__right"></div>'),tabs_pane:t('<div class="tabs__pane"></div>')},n.data._triggers={show:"show.fc.modal",shown:"shown.fc.modal",hide:"hide.fc.modal",hidden:"hidden.fc.modal",loaded:"loaded.fc.modal"},n.destroy=function(){n.hide(),setTimeout(function(){a.data=null,a.remove()},500)},n.hide=function(){a.trigger(n.data._triggers.hide),a.find(".modal__dialog").addClass("modal__dialog_hidden"),a.find(".modal__dialog").one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){a.addClass("modal_hidden")}),a.trigger(n.data._triggers.hidden),n.data.show=!1},n.hidden=function(){a.find(".modal__dialog").addClass("modal__dialog_hidden"),a.addClass("modal_hidden"),n.data.show=!1},n.show=function(){a.trigger(n.data._triggers.show),a.removeClass("modal_hidden"),setTimeout(function(){a.find(".modal__dialog").removeClass("modal__dialog_hidden"),a.trigger(n.data._triggers.shown)},0),n.data.show=!0},n.render_view=function(){a.append(n.data._el.modal__view.append(n.data._el.modal__backdrop,n.data._el.modal__dialog.append(n.data._el.card.append(n.data._el.card__header.append(n.data._el.card__header_row_caption,n.data._el.card__header_row_name,n.data._el.card__header_row_tabs.append(n.data._el.tabs__list)),n.data._el.card__main.append(n.data._el.card__middle.append(n.data._el.card__middle_scroll.append(n.data._el.card__middle_inner)))))))},n.render_header=function(){n.render_header_caption(),n.render_header_name()},n.render_header_caption=function(){n.render_header_caption_name(),n.render_header_caption_buttons()},n.render_header_caption_name=function(){n.data._el.card__header_row_caption.append(t('<div class="card__header-column"><label class="card__caption"><span class="card__caption-text">'+n.data.header.caption+"</span></label></div>"))},n.render_header_caption_buttons=function(){var e=t('<div class="card__header-column"></div>');n.data._el.card__header_row_caption.append(e),n.data.buttons.forEach(function(i){var o=t('<button class="button button__'+i.name+'" data-fc="button">'+(i.icon?'<span class="icon '+i.icon+'"></span>':"")+(i.caption?'<span class="button__text"> '+i.caption+"</span>":"")+"</button>");i.action&&("function"==typeof n[i.action]&&o.on("click",n[i.action]),n.data._triggers[i.action]||o.on("click",function(){a.trigger(i.action+".fc.modal",[n.data.items])})),e.append(o)})},n.render_header_name=function(){n.data._el.card__header_row_name.append(t('<div class="card__header-column"><label class="card__name"><span class="card__name-text">'+n.data.header.name+"</span></label></div>"))},n.render_tabs=function(){if(1==n.data.content.tabs.length)n.data.content.tabs[0].active=!0;else{var e=!1;n.data.content.tabs.forEach(function(t){t.active&&(e=!0)}),e||(n.data.content.tabs[0].active=!0)}n.data.content.tabs.forEach(function(e){n.data._el.tabs__list.append(t((e.active?'<li class="tabs__tab tabs__tab_active">':'<li class="tabs__tab">')+'<a class="tabs__link link" href="#'+e.id+'" data-fc="tab"><button class="button" data-fc="button"><span class="button__text">'+e.name+"</span></button></a></li>")),n.data._el.card__middle_inner.append(n.data._el.tabs_pane.clone().attr("id",e.id).addClass(e.active?"tabs__pane_active":"").html(e.content))})},n.bind=function(){a.find(".modal__backdrop").on("click",n.destroy)},n.bind_buttons=function(){n.data.buttons.forEach(function(e){var i=t(e.selector);e.action&&("function"==typeof n[e.action]&&i.on("click",n[e.action]),n.data._triggers[e.action]||i.on("click",function(){a.trigger(e.action+".fc.modal",[n.data.items])}))})},n.init_components=function(){a.find('[data-fc="alertbox"]').alertbox(),a.find('[data-fc="button"]').button({popup_animation:!1}),a.find('[data-fc="checkbox"]').checkbox(),a.find('[data-fc="input"]').input({popup_animation:!1}),a.find('[data-fc="radio"]').radio(),a.find('[data-fc="radio-group"]').radio_group(),a.find('[data-fc="select"]').select(),a.find('[data-fc="tab"]').tabs(),a.find('[data-fc="tumbler"]').tumbler(),a.find('[data-fc="widget"]').widget()},n.init=function(){a.remove().appendTo("body"),a.data(n.data),0==a.children().length?(n.render_view(),n.render_header(),n.render_tabs(),n.init_components()):(n.init_components(),n.bind_buttons()),n.bind(),a.trigger(n.data._triggers.loaded),n.data.show?n.show():n.hidden()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})}};t.fn.modal=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.modal"):e.init.apply(this,arguments)}}(jQuery),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"select",target:a});var n=this.obj={};n.defaults={name:a.attr("name"),disabled:!1,hidden:!1,width:"100%",mode:"radio",placeholder:"Выберите значение",popup_animation:!0,text:"",height:"auto",count_selected:"Выбрано # из %",minimum_count_selected:2,autoclose:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._value=[],n.data._handlers=null,n.data._options=[],n.data._el={select:t('<div class="select__container"></div>'),button:t(['<button class="button" data-fc="button">','<span class="button__text">'+n.data.placeholder+"</span>",'<span class="icon icon_svg_down"></span>',"</button>"].join("")),spinner:t(['<span class="icon">','<span class="spinner"></span>',"</span>"].join("")),input:t(['<span class="input input__has-clear">','<span class="input__box">','<span class="alertbox">','<span class="icon icon_svg_search"></span>',"</span>",'<input type="text" class="input__control">','<button class="button" type="button">','<span class="icon icon_svg_close"></span>',"</button>","</span>","</span>"].join("")),popup:t('<div class="popup"></div>'),popup__input:t('<div class="popup__input"></div>'),popup__scroll:t('<div class="popup__scroll"></div>'),popup__list:t('<ul class="popup__list"></ul>'),popup__list_items:[]},n.destroy=function(){"select"==n.data.widget&&(n.data._el.button.button("destroy"),n.data._el.input.input("destroy"),n.data._el.popup.popup("destroy"),a.data=null,a.remove())},n.disable=function(){n.data._el.button.button("disable"),n.data._el.input.input("disable"),n.data._el.popup.popup("hide"),n.data.disabled=!0},n.enable=function(){n.data._el.button.button("enable"),n.data._el.input.input("enable"),n.data.disabled=!1},n.hide=function(){n.data._el.button.button("hide"),n.data._el.input.input("hide"),n.data._el.popup.popup("hide"),n.data.hidden=!0},n.show=function(){n.data._el.button.button("show"),n.data._el.input.input("show"),n.data.hidden=!1},n.render=function(){a.find("option").each(function(){var e=t(this),a={};a.defaults={text:e.text(),value:e.attr("value"),selected:void 0!==e.attr("selected"),disabled:!1,hidden:!1,icon:""},a.data=t.extend(!0,{},a.defaults,e.data()),a.popup__list_item=t(['<li class="popup__list-item',a.data.selected?" popup__list-item_checked":"",(a.data.disabled?" popup__list-item_disabled":"")+'">','<button class="popup__link">',""==a.data.icon?"":'<span class="icon '+a.data.icon+'"></span>','<span class="popup__text">'+a.data.text+"</span>","</button>","</li>"].join("")),n.data._options.push(e),n.data._el.popup__list_items.push(a.popup__list_item),a.data.selected&&(("radio"==n.data.mode||"radio-check"==n.data.mode)&&0==n.data._value.length||"check"==n.data.mode?n.check_item(a.popup__list_item,a.data):(a.data.selected=!1,n.uncheck_item(a.popup__list_item,a.data))),e.data(a.data),a.popup__list_item.data(a.data)}),n.data._el.select.append(n.data._el.button,n.data._el.popup.append(n.data._el.popup__input.append(n.data._el.input),n.data._el.popup__scroll.append(n.data._el.popup__list.append(n.data._el.popup__list_items)))),n.data._el.select.data(n.data),n.data._el.select.data({_widget:"_select"}),a.css("display","none"),a.after(n.data._el.select)},n.update=function(e){n.data._el.button.find(".button__text").after(n.data._el.spinner),a.html(""),n.data._options=[],n.data._el.popup__list.html(""),n.data._el.popup__list_items=[],e.forEach(function(e,n,i){var o=t('<option value="'+e.value+'">'+e.text+"</option>");a.append(o)}),n.clear(),n.init(),n.data._el.spinner.remove()},n.focus=function(){n.data._el.popup.popup("show")},n.clear=function(){n.data._value=[]},n.focusin=function(){n.data._el.popup.popup("show")},n.focusout=function(){n.data._el.popup.popup("hide")},n.set_width=function(t){n.data._el.select.css("width",t)},n.set_value=function(t){n.data._value.indexOf(t)<0&&n.data._value.push(t)},n.del_value=function(t){n.data._value=n.data._value.filter(function(e){return e.value!=t.value&&e.text!=t.text})},n.set_button_text=function(){0==n.data._value.length?(n.data._el.button.find(".button__text").addClass("button__text_placeholder"),n.data._el.button.find(".button__text").text(n.data.placeholder)):n.data._value.length>n.data.minimum_count_selected?(n.data._el.button.find(".button__text").removeClass("button__text_placeholder"),n.data._el.button.find(".button__text").text(n.data.count_selected.replace("#",n.data._value.length).replace("%",n.data._options.length))):(n.data._el.button.find(".button__text").removeClass("button__text_placeholder"),n.data._el.button.find(".button__text").text(n.data._value.map(function(t){return t.text}).join(", ")))},n.get_value=function(){return"radio"==n.data.mode||"radio-check"==n.data.mode?0==n.data._value.length?null:n.data._value[0].value:"check"==n.data.mode?n.data._value.map(function(t){return t.value}):void 0},n.check_item=function(t,e){e.selected=!0,t.addClass("popup__list-item_checked"),n.set_value({value:e.value,text:e.text}),n.data._options.forEach(function(t){t.data().value==e.value&&(t.attr("selected","selected"),t.data().selected=e.selected)}),n.set_button_text()},n.uncheck_item=function(t,e){e.selected=!1,t.removeClass("popup__list-item_checked"),n.del_value({value:e.value,text:e.text}),n.data._options.forEach(function(t){t.data().value==e.value&&(t.removeAttr("selected"),t.data().selected=e.selected)}),n.set_button_text()},n.check_all=function(){n.data._value=[],n.data._el.popup__list_items.forEach(function(t){t.addClass("popup__list-item_checked"),t.data().selected=!0,n.set_value({value:t.data().value,text:t.data().text})}),n.data._options.forEach(function(t){t.attr("selected","selected"),t.data().selected=!0}),n.set_button_text()},n.uncheck_all=function(){n.data._el.popup__list_items.forEach(function(t){t.removeClass("popup__list-item_checked"),t.data().selected=!1,n.del_value({value:t.data().value,text:t.data().text})}),n.data._options.forEach(function(t){t.removeAttr("selected"),t.data().selected=!1}),n.set_button_text()},n.bind=function(){n.data._el.popup__list_items.forEach(function(t){var e=t.data();e.disabled||t.on("click",function(){if("radio"==n.data.mode&&(n.uncheck_all(),e.selected=!0,n.check_item(t,e)),"radio-check"==n.data.mode){var a=e.selected;n.uncheck_all(),e.selected=!a,e.selected?n.check_item(t,e):n.uncheck_item(t,e)}"check"==n.data.mode&&(e.selected=!e.selected,e.selected?n.check_item(t,e):n.uncheck_item(t,e)),n.data.autoclose&&n.focusout()})})},n.init_components=function(){n.data._el.button.button({disabled:n.data.disabled,hidden:n.data.hidden,width:n.data.width}),n.data._el.input.input({width:"100%"}),n.data._el.popup.popup({source:n.data._el.button,width:n.data.width,height:n.data.height,animation:!0,select:!0})},n.init=function(){n.render(),n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width),n.set_button_text()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},update:function(t){return this.each(function(){this.obj.update(t)})},focus:function(){return this.each(function(){this.obj.focus()})},clear:function(){return this.each(function(){this.obj.clear()})},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.get_value()}),t}var e=[];return this.each(function(){e.push(this.obj.get_value())}),e}};t.fn.select=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.select"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="select"]').select()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"input",target:a});var n=this.obj={};n.defaults={disabled:!1,hidden:!1,width:"100%",auto_close:!0,popup_animation:!0},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._handlers_input=null,n.data._datepicker=null,n.data._el={button:a.find("button"),input:a.find(".input__control"),popup:t('<div class="popup"></div>')},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),n.data._el.popup.data("_widget")&&n.data._el.popup.popup("destroy"),a.data=null,a.remove()},n.disable=function(){if(a.addClass("input_disabled"),a.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable"),n.disable_input()},n.enable=function(){if(a.removeClass("input_disabled"),a.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data.disabled=!1,n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.enable_input()},n.hide=function(){a.addClass("input_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("input_hidden"),n.data.hidden=!1},n.focus=function(){n.data._el.input.trigger("focus"),n.data._el.input.trigger("mousedown")},n.clear=function(){n.data._el.input.val(""),n.focus()},n.disable_input=function(){if(t._data(n.data._el.input[0],"events")){n.data._handlers_input={};for(var e in t._data(n.data._el.input[0],"events"))n.data._handlers_input[e]=t._data(n.data._el.input[0],"events")[e].slice(0);n.data._el.input.off()}},n.enable_input=function(){if(n.data._handlers_input)for(var t in n.data._handlers_input)n.data._handlers_input[t].forEach(function(t){n.data._el.input.on(t.type+"."+t.namespace,t.handler)})},n.focusin=function(){a.addClass("input_focused"),n.data.focused=!0},n.focusout=function(){a.removeClass("input_focused"),n.data.focused=!1},n.set_width=function(t){a.css("width",t)},n.bind=function(){n.data._el.input.bindFirst("focusin.input__control mousedown.input__control touchstart.input__control",null,null,n.focusin),n.data._el.input.bindFirst("focusout.input__control",null,null,n.focusout),n.data._el.button.on("click.input__clear",null,null,function(t){t.preventDefault(),n.clear()}),n.data._el.input.bindFirst("mousedown.input__control",null,null,n.show_datepicker),t("body").on("mouseup.input__control touchend.input__control",n.hide_datepicker)},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button(),"datepicker"==n.data.toggle&&n.init_datepicker()},n.init_datepicker=function(){a.after(n.data._el.popup),n.data._el.popup.popup({source:a,animation:n.data.popup_animation,width:"auto"}),n.data._el.input.datepicker({inline:!0,autoClose:n.data.auto_close,onSelect:function(t,e,a){n.data.date=e,n.data.formattedDate=t,n.data.auto_close&&n.data._el.popup.popup("hide")}}),n.data._datepicker=n.data._el.input.data().datepicker,n.data._datepicker.$datepicker.parent().appendTo(n.data._el.popup)},n.init=function(){n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width)},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},focus:function(){return this.each(function(){this.obj.focus()})},clear:function(){return this.each(function(){this.obj.clear()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data._el.input.val()}),t}var e=[];return this.each(function(){e.push(this.obj.data._el.input.val())}),e}};t.fn.input=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.input"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="input"]').input()}),$.fn.bindFirst=function(t,e,a,n){this.on(t,e,a,n),this.each(function(){var e=$._data(this,"events")[t.split(".")[0]],a=e.pop();e.splice(0,0,a)})},function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"alertbox",target:a});var n=this.obj={};n.defaults={disabled:!1,hidden:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={button:a.find("button")},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),a.data=null,a.remove()},n.disable=function(){if(n.data.disabled=!0,t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(n.data.disabled=!1,n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable")},n.hide=function(){a.addClass("alertbox_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("alertbox_hidden"),n.data.hidden=!1},n.bind=function(){void 0!==n.data._el.button[0]&&n.data._el.button.on("click",function(t){t.preventDefault(),n.destroy()})},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})}};t.fn.alertbox=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.alertbox"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="alertbox"]').alertbox()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"radio_group",target:a});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,value:null},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={radio_list:a.find(".radio")},n.destroy=function(){n.data._el.radio_list.each(function(){t(this).radio("destroy")}),a.data=null,a.remove()},n.disable=function(){n.data._el.radio_list.each(function(){t(this).radio("disable")}),n.data.disabled=!0},n.enable=function(){n.data._el.radio_list.each(function(){t(this).radio("enable")}),n.data.disabled=!1},n.hide=function(){n.data._el.radio_list.each(function(){t(this).radio("hide")}),n.data.hidden=!0},n.show=function(){n.data._el.radio_list.each(function(){t(this).radio("show")}),n.data.hidden=!1},n.init=function(){n.data.disabled=!0,n.data._el.radio_list.each(function(){var e={};e.self=t(this),e.data=e.self.data(),e.self.radio(),e.data.checked&&n.data.checked&&e.self.radio("uncheck"),e.data.checked&&(n.data.checked=!0,n.data.value=e.self.radio("value")),e.data.disabled||(n.data.disabled=!1),e.self.on("click.radio_group",null,null,function(a){n.data._el.radio_list.each(function(){t(this).radio("uncheck")}),e.self.radio("check"),n.data.checked=!0,n.data.value=e.self.radio("value")}),e.data.disabled&&e.self.radio("disable")})},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var e=[];return this.each(function(){e.push(this.obj.data.checked)}),e},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.value}),t}var e=[];return this.each(function(){e.push(this.obj.data.value)}),e}};t.fn.radio_group=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.radio_group"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio-group"]').radio_group()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"radio",target:a});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,value:null},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={input:a.find(".radio__input"),label:a.find(".radio__label"),button:a.find("button")},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),a.data=null,a.remove()},n.disable=function(){if(a.addClass("radio_disabled"),a.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(a.removeClass("radio_disabled"),a.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data.disabled=!1,n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable")},n.hide=function(){a.addClass("radio_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("radio_hidden"),n.data.hidden=!1},n.check=function(){a.addClass("radio_checked"),a.attr("data-checked","true"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,void 0!==n.data._el.button[0]&&n.data._el.button.button("check")},n.uncheck=function(){a.removeClass("radio_checked"),a.removeAttr("data-checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,void 0!==n.data._el.button[0]&&n.data._el.button.button("uncheck")},n.hover=function(){a.addClass("radio_hovered")},n.unhover=function(){a.removeClass("radio_hovered")},n.click=function(){a.addClass("radio_clicked"),t("body").one("mouseup.radio touchend.radio",n.unclick)},n.unclick=function(){a.removeClass("radio_clicked")},n.bind=function(){a.on("mouseover.radio",n.hover),a.on("mouseout.radio",n.unhover),a.on("mousedown.radio touchstart.radio",n.click),void 0!==n.data._el.label[0]&&(n.data._widget.type="radio.label",a.bindFirst("click.radio",".radio__label",null,function(t){t.preventDefault(),n.data.checked||n.check()})),void 0!==n.data._el.button[0]&&(n.data._widget.type="radio.button",a.bindFirst("click.radio","button",null,function(t){t.preventDefault(),n.data.checked||n.check()}))},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.data.value=n.data._el.input.attr("value"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var e=[];return this.each(function(){e.push(this.obj.data.checked)}),e},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.value}),t}var e=[];return this.each(function(){e.push(this.obj.data.value)}),e}};t.fn.radio=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.radio"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio"]').radio()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"checkbox",target:a});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._handlers=null,n.data._el={input:a.find(".checkbox__input"),label:a.find(".checkbox__label"),button:a.find("button")},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),a.data=null,a.remove()},n.disable=function(){if(a.addClass("checkbox_disabled"),a.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(a[0],"events")){n.data._handlers={};for(var e in t._data(a[0],"events"))n.data._handlers[e]=t._data(a[0],"events")[e].slice(0);a.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(a.removeClass("checkbox_disabled"),a.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data.disabled=!1,n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){a.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable")},n.hide=function(){a.addClass("checkbox_hidden"),n.data.hidden=!0},n.show=function(){a.removeClass("checkbox_hidden"),n.data.hidden=!1},n.check=function(){a.addClass("checkbox_checked"),a.attr("data-checked","true"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,void 0!==n.data._el.button[0]&&n.data._el.button.button("check")},n.uncheck=function(){a.removeClass("checkbox_checked"),a.removeAttr("data-checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,void 0!==n.data._el.button[0]&&n.data._el.button.button("uncheck")},n.hover=function(){a.addClass("checkbox_hovered")},n.unhover=function(){a.removeClass("checkbox_hovered")},n.click=function(){a.addClass("checkbox_clicked"),t("body").one("mouseup.checkbox touchend.checkbox",n.unclick)},n.unclick=function(){a.removeClass("checkbox_clicked")},n.bind=function(){a.on("mouseover.checkbox",n.hover),a.on("mouseout.checkbox",n.unhover),a.on("mousedown.checkbox touchstart.checkbox",n.click),void 0!==n.data._el.label[0]&&(n.data._widget.type="checkbox.label",a.bindFirst("click.checkbox",".checkbox__label",null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()})),void 0!==n.data._el.button[0]&&(n.data._widget.type="checkbox.button",a.bindFirst("click.checkbox","button",null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()}))},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var e=[];return this.each(function(){e.push(this.obj.data.checked)}),e},value:function(){return this.checkbox("checked")}};t.fn.checkbox=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.checkbox"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="checkbox"]').checkbox()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"widget",target:a});var n=this.obj={};n.const={CONTENT_LOADING:'<span class="spinner"></span>',CONTENT_NODATA:"Нет данных",CONTENT_ERROR:"Ошибка загрузки",BORDER_COLOR_BLUE:"#5a97f2",BORDER_COLOR_DEFAULT:"#ccc",BORDER_COLOR_PURPLE:"#8e6bf5",BORDER_COLOR_RED:"#ff5940",CONTENT_TYPE_TEXT:"text",CONTENT_TYPE_HTML:"html",CONTENT_TYPE_COUNT:"count"},n.defaults={name:"Виджет",collapsed:!1,color:n.const.BORDER_COLOR_DEFAULT,content:n.const.CONTENT_NODATA,mode:"view",pagename:"",elementname:"",loader:null,library:null},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._el={buttons:{button_collapse:null,button_settings:null,button_remove:null}},n.destroy=function(){void 0!==n.data._el.buttons.button_collapse[0]&&n.data._el.buttons.button_collapse.button("destroy"),void 0!==n.data._el.buttons.button_settings[0]&&n.data._el.buttons.button_settings.button("destroy"),void 0!==n.data._el.buttons.button_remove[0]&&n.data._el.buttons.button_remove.button("destroy"),a.data=null,a.remove()},n.render=function(){var e=t('<div class="widget__header"><div class="widget__header-name"><button class="button button_collapse" type="button" data-fc="button"><span class="button__text">'+n.data.name+'</span><span class="icon icon_svg_down"></span><span class="button__anim"></span></button></div><div class="widget__header-actions"><button class="button button_settings" type="button" data-fc="button"><span class="icon icon_svg_settings"></span><span class="button__anim"></span></button><button class="button button_remove" type="button" data-fc="button"><span class="icon icon_svg_trash"></span><span class="button__anim"></span></button></div></div><div class="widget__border"><div class="widget__body"><div class="widget__body-data"></div></div></div>');a.append(e),n.set_color(),n.set_content()},n.get_buttons=function(){n.data._el.buttons={button_collapse:a.find(".button_collapse"),button_settings:a.find(".button_settings"),button_remove:a.find(".button_remove")}},n.get_name=function(){n.data.name=n.data._el.buttons.button_collapse.find(".button__text").text()},n.set_name=function(){n.data._el.buttons.button_collapse.find(".button__text").text(n.data.name)},n.set_color=function(){var t=a.find(".widget__border"),e=a.find(".widget__body-data");n.data.color===n.const.BORDER_COLOR_BLUE&&(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_blue"),e.attr("class",e.attr("class").replace(/\widget__body-data_color_.*?\b/g,"")),e.addClass("widget__body-data_color_blue")),n.data.color===n.const.BORDER_COLOR_DEFAULT&&(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_default"),e.attr("class",e.attr("class").replace(/\widget__body-data_color_.*?\b/g,"")),e.addClass("widget__body-data_color_default")),n.data.color===n.const.BORDER_COLOR_PURPLE&&(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_purple"),e.attr("class",e.attr("class").replace(/\widget__body-data_color_.*?\b/g,"")),e.addClass("widget__body-data_color_purple")),n.data.color===n.const.BORDER_COLOR_RED&&(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_red"),e.attr("class",e.attr("class").replace(/\widget__body-data_color_.*?\b/g,"")),e.addClass("widget__body-data_color_red"))},n.set_content=function(){var t=a.find(".widget__body"),e=a.find(".widget__body-data");"function"==typeof n.data.loader?(t.addClass("widget__body_align_center"),e.attr("class",e.attr("class").replace(/\widget__body-data_type_.*?\b/g,"")),e.html(n.const.CONTENT_LOADING),n.data.content=new n.data.loader({pagename:n.data.pagename,elementname:n.data.elementname,success:function(a){t.removeClass("widget__body_align_center"),e.addClass("widget__body-data_type_html"),e.html(a)},error:function(t){e.addClass("widget__body-data_type_text"),e.html(t)}}),n.data.content.loadContent()):(t.addClass("widget__body_align_center"),e.html(n.const.CONTENT_NODATA))},n.collapse=function(){a.addClass("widget_collapsed"),n.data.collapsed=!0},n.expand=function(){a.removeClass("widget_collapsed"),n.data.collapsed=!1},n.toggle=function(){a.toggleClass("widget_collapsed"),n.data.collapsed=!n.data.collapsed},n.trigger_toggle=function(){a.trigger("toggle.widget")},n.check_toggle=function(){n.data.collapsed?n.collapse():n.expand()},n.edit_mode=function(){n.data._el.buttons.button_collapse.button("disable"),n.data._el.buttons.button_settings.button("show").button("enable"),n.data._el.buttons.button_remove.button("show").button("enable"),n.data.mode="edit"},n.view_mode=function(){n.data._el.buttons.button_collapse.button("enable"),n.data._el.buttons.button_settings.button("hide").button("disable"),n.data._el.buttons.button_remove.button("hide").button("disable"),n.data.mode="view"},n.settings=function(){var e={buttons:[{name:"save",action:"save",icon:"icon_svg_ok"},{name:"destroy",action:"destroy",icon:"icon_svg_close"}],header:{caption:"Настройки виджета",name:n.data.name},content:{tabs:[]},data:n.data};n.render_general_tab(e.content.tabs),n.render_source_tab(e.content.tabs),t('<span class="modal"></span>').appendTo("body").modal(e).on("save.fc.modal",function(){var e=!1;t(this).find("[data-field]").each(function(){var a=t(this),i=a[a.data("fc").replace("-","_")]("value");"pagename"!=a.data("field")&&"elementname"!=a.data("field")||n.data[a.data("field")]==i||(e=!0),_.set(n.data,a.data("field"),i)}),n.trigger_toggle(),n.set_name(),n.set_color(),e&&n.set_content(),t(this).modal("destroy")})},n.render_general_tab=function(t){t.push({id:"general",name:"Основные",active:!0,content:'<div class="control"><div class="control__caption"><div class="control__text">Скрывать по умолчанию</div></div><div class="control__container"><label class="checkbox" data-fc="checkbox" data-field="collapsed"'+(n.data.collapsed?'data-checked="true"':"")+'><input class="checkbox__input" type="checkbox" name="collapsed"/><label class="checkbox__label"></label></label></div></div><div class="control"><div class="control__caption"><div class="control__text">Заголовок</div><div class="control__icons"><span class="icon icon_svg_star_red"></span><span class="icon icon_svg_star_green"></span><span class="icon icon_svg_info"></span></div></div><div class="control__container"><span class="input input__has-clear" data-fc="input" data-field="name"><span class="input__box"><input type="text" class="input__control" value="'+n.data.name+'"><button class="button" type="button" data-fc="button"><span class="icon icon_svg_close"></span></button></span></span></div></div><div class="control"><div class="control__caption"><div class="control__text">Цвет</div></div><div class="control__container"><select class="select" name="color" data-fc="select" data-field="color"><option value="'+n.const.BORDER_COLOR_DEFAULT+'" '+(n.data.color==n.const.BORDER_COLOR_DEFAULT?"selected":"")+'>Серый</option><option value="'+n.const.BORDER_COLOR_BLUE+'" '+(n.data.color==n.const.BORDER_COLOR_BLUE?"selected":"")+'>Синий</option><option value="'+n.const.BORDER_COLOR_PURPLE+'" '+(n.data.color==n.const.BORDER_COLOR_PURPLE?"selected":"")+'>Фиолетовый</option><option value="'+n.const.BORDER_COLOR_RED+'" '+(n.data.color==n.const.BORDER_COLOR_RED?"selected":"")+">Красный</option></select></div></div>"})},n.render_source_tab=function(e){if(n.data.library){var a=t(['<div class="control">','<div class="control__caption">','<div class="control__text">Библиотека виджетов</div>',"</div>",'<div class="control__container">','<select class="select" name="pagename" data-fc="select" data-field="pagename" data-mode="radio-check" data-autoclose="true"></select>',"</div>","</div>"].join("")),i=t(['<div class="control">','<div class="control__caption">','<div class="control__text">Виджет</div>',"</div>",'<div class="control__container">','<select class="select" name="elementname" data-fc="select" data-field="elementname" data-mode="radio-check" data-autoclose="true"></select>',"</div>","</div>"].join(""));n.data.library.forEach(function(e,o,d){a.find(".select").append(t('<option value="'+e.value+'" '+(e.value==n.data.pagename?'selected="selected"':"")+">"+e.text+"</option>")),e.items.forEach(function(e,a,o){i.find(".select").append(t('<option value="'+e.value+'" '+(e.value==n.data.elementname?'selected="selected"':"")+">"+e.text+"</option>"))})}),e.push({id:"source",name:"Источник данных",content:a[0].outerHTML+i[0].outerHTML})}},n.bind=function(){a.on("toggle.widget",n.check_toggle),n.data._el.buttons.button_collapse.on("click.widget",n.toggle),n.data._el.buttons.button_settings.on("click.widget",n.settings),n.data._el.buttons.button_remove.on("click.widget",n.destroy)},n.init_components=function(){a.find('[data-fc="button"]').button(),a.find('[data-fc="checkbox"]').checkbox()},n.init=function(){0==a.children().length?(n.render(),n.get_buttons()):(n.get_buttons(),n.get_name()),n.init_components(),n.bind()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},collapse:function(){return this.each(function(){this.obj.collapse()})},expand:function(){return this.each(function(){this.obj.expand()})},toggle:function(){return this.each(function(){this.obj.toggle()})},edit_mode:function(){return this.each(function(){this.obj.edit_mode()})},view_mode:function(){return this.each(function(){this.obj.view_mode()})}};t.fn.widget=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.widget"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="widget"]').widget()}),function(t){var e={init:function(e){return this.each(function(){var a=t(this);if(!a.data("_widget")){a.data("_widget",{type:"tab",target:a});var n=this.obj={};n.defaults={disabled:!1,active:!1},n.data=a.data(),n.options=t.extend(!0,{},n.defaults,n.data,e),a.data(n.options),n.data._neighbors=[],n.data._el={button:a.find('[data-fc="button"]'),tabs__tab:a.closest(".tabs__tab"),tabs__link:a,tabs__pane:a.closest(".card").find('.tabs__pane[id="'+a.attr("href").replace("#","")+'"]')},n.destroy=function(){n.data._neighbors.forEach(function(t){t.button.button("destroy")}),a.data=null,a.remove()},n.disable=function(){n.data._el.button.button("disable"),n.data.disabled=!0},n.enable=function(){n.el.button.button("enable"),n.data.disabled=!1},n.show=function(){n.data._neighbors.forEach(function(t){t.data()._el.button.button("enable"),t.data()._el.tabs__tab.removeClass("tabs__tab_active"),t.data()._el.tabs__pane.removeClass("tabs__pane_active"),t.data().active=!1,t.data().disabled=!1}),n.data._el.button.button("disable"),n.data._el.tabs__tab.addClass("tabs__tab_active"),n.data._el.tabs__pane.addClass("tabs__pane_active"),n.data.active=!0,n.data.disabled=!0},n.check_active=function(){n.data._el.tabs__tab.hasClass("tabs__tab_active")&&n.show()},n.get_neighbors=function(){a.closest(".tabs").find('[data-fc="tab"]').each(function(){var e=t(this).tabs();n.data._neighbors.push(e)})},n.bind=function(){n.data._el.tabs__link.on("click",function(t){t.preventDefault(),n.data._el.tabs__tab.hasClass("tabs__tab_active")||n.show()})},n.init_components=function(){n.data._el.button.button()},n.init=function(){n.init_components(),n.get_neighbors(),n.bind(),n.check_active()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},show:function(){return this.each(function(){this.obj.show()})}};t.fn.tabs=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on $.tabs"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tab"]').tabs()});