$(function(){$("#button_toggle-menu").each(function(){function t(){a.icon__menu("toggle"),onlyloaded||$main.hasClass("fs-view__main_transition")||$main.addClass("fs-view__main_transition"),$left.removeClass("fs-view__left_hidden"),$middle.removeClass("fs-view__middle_full"),$left.after($backdrop),$backdrop.on("click",n),o.one("click",e)}function e(){a.icon__menu("toggle"),onlyloaded||$main.hasClass("fs-view__main_transition")||$main.addClass("fs-view__main_transition"),$left.addClass("fs-view__left_hidden"),$middle.addClass("fs-view__middle_full"),$backdrop.remove(),o.one("click",t)}function n(){o.trigger("click")}var o=$(this),a=o.find(".icon__menu");$main=$(".fs-view__main"),$left=$(".fs-view__left"),$middle=$(".fs-view__middle"),$backdrop=$('<div class="fs-view__backdrop"></div>'),onlyloaded=!0,$(window).outerWidth(),o.one("click",t),onlyloaded=!1})}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"icon__menu",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.el={ham:n,menu_top:n.find(".icon__menu-top"),menu_middle:n.find(".icon__menu-middle"),menu_bottom:n.find(".icon__menu-bottom")},a.init=function(){a.bind()},a.bind=function(){a.el.ham.on("toggle.icon__menu",function(t){a.toggle(t),t.preventDefault()})},a.toggle=function(){a.el.ham.toggleClass("icon__menu_click"),a.el.menu_top.toggleClass("icon__menu-top_click"),a.el.menu_middle.toggleClass("icon__menu-middle_click"),a.el.menu_bottom.toggleClass("icon__menu-bottom_click")},a.init()}return this})},toggle:function(){return this.each(function(){this.obj.toggle()})}};t.fn.icon__menu=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.icon__menu"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="icon__menu"]').icon__menu()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"button",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.destroy=function(){n.data=null,n.remove()},a.hover=function(){n.addClass("button_hovered")},a.unhover=function(){n.removeClass("button_hovered")},a.click=function(){n.addClass("button_clicked"),n.removeClass("button_clicked_out")},a.unclick=function(){n.addClass("button_clicked_out"),n.removeClass("button_clicked")},a.check=function(){n.addClass("button_checked"),n.attr("data-checked","true"),a.data.checked=!0},a.uncheck=function(){n.removeClass("button_checked"),n.attr("data-checked","false"),a.data.checked=!1},a.enable=function(){if(n.removeClass("button_clicked_out"),n.removeClass("button_disabled"),a.data._handlers)for(var t in a.data._handlers)a.data._handlers[t].forEach(function(t){n.on(t.type+"."+t.namespace,t.handler)});a.data.disabled=!1},a.disable=function(){if(a.unhover(),n.removeClass("button_clicked_out"),n.addClass("button_disabled"),t._data(n[0],"events")){a.data._handlers={};for(var e in t._data(n[0],"events"))a.data._handlers[e]=t._data(n[0],"events")[e].slice(0);n.off()}a.data.disabled=!0},a.hide=function(){n.removeClass("button_clicked_out"),n.addClass("button_hidden")},a.show=function(){n.removeClass("button_clicked_out"),n.removeClass("button_hidden")},a.bind=function(){n.on("mouseover.button.private",a.hover),n.on("mouseout.button.private",a.unhover),n.on("mousedown.button.private touchstart.button.private",function(){a.click(),t("body").one("mouseup.button.private touchend.button.private",a.unclick)}),a.data.trigger&&n.on("click.button.trigger",function(t){t.preventDefault(),n.find("."+a.data.triggercontainer).trigger(a.data.trigger)})},a.bind_checkbox=function(){n.bindFirst("click.button.check",null,null,function(t){t.preventDefault(),a.data.checked?a.uncheck():a.check()})},a.bind_radio=function(){n.bindFirst("click.button.radio",null,null,function(t){t.preventDefault(),a.data.checked||a.check()})},a.init=function(){a.bind(),n.hasClass("button_toggable_check")&&(a.data._widget.type="button.checkbox",a.init_check(),a.bind_checkbox()),n.hasClass("button_toggable_radio")&&(a.data._widget.type="button.radio",a.init_check(),a.bind_radio()),a.data.disabled?a.disable():a.enable(),a.data.hidden?a.hide():a.show()},a.init_check=function(){a.data.checked?a.check():a.uncheck()},a.init()}return this})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.button=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.button"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="button"]').button()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"tumbler",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.button=n.find("button"),a.input=n.find("input"),a.destroy=function(){void 0!==a.button[0]&&a.button.button("destroy"),n.data=null,n.remove()},a.hover=function(){n.addClass("checkbox_hovered")},a.unhover=function(){n.removeClass("checkbox_hovered")},a.click=function(){n.addClass("checkbox_clicked")},a.unclick=function(){n.removeClass("checkbox_clicked")},a.check=function(){n.addClass("tumbler_checked"),a.input.attr("checked","checked"),a.input.prop("checked",!0),a.data.checked=!0},a.uncheck=function(){n.removeClass("tumbler_checked"),a.input.removeAttr("checked"),a.input.prop("checked",!1),a.data.checked=!1},a.enable=function(){if(n.removeClass("tumbler_disabled"),n.removeAttr("data-disabled"),a.input.removeAttr("disabled"),a.input.prop("disabled",!1),a.data.disabled=!1,a.data._handlers)for(var t in a.data._handlers)a.data._handlers[t].forEach(function(t){n.on(t.type+"."+t.namespace,t.handler)});void 0!==a.button[0]&&a.button.button("enable")},a.disable=function(){if(n.addClass("tumbler_disabled"),n.attr("data-disabled","true"),a.input.attr("disabled","disabled"),a.input.prop("disabled",!0),a.data.disabled=!0,t._data(n[0],"events")){a.data._handlers={};for(var e in t._data(n[0],"events"))a.data._handlers[e]=t._data(n[0],"events")[e].slice(0);n.off()}void 0!==a.button[0]&&a.button.button("disable")},a.hide=function(){n.addClass("tumbler_hidden")},a.show=function(){n.removeClass("tumbler_hidden")},a.bind=function(){n.on("mouseover.checkbox",a.hover),n.on("mouseout.checkbox",a.unhover),n.on("mousedown.checkbox touchstart.checkbox",function(){a.click(),t("body").one("mouseup.checkbox touchend.checkbox",a.unclick)}),n.bindFirst("click.tumbler",null,null,function(){a.data.checked?a.uncheck():a.check()})},a.bind_custom=function(t){n.on("click.tumbler.custom",null,null,function(){a.data.checked?t.on():t.off()})},a.init=function(){a.data.name=a.input.attr("name"),a.bind(),a.data.checked?a.check():a.uncheck(),a.data.disabled?a.disable():a.enable(),a.data.hidden?a.hide():a.show()},a.init()}return this})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},checked:function(){if(1==this.length)return this[0].obj.data.checked;var t=[];return this.each(function(){t.push(this.obj.data.checked)}),t},value:function(){return this.checkbox("checked")},bind:function(t){return this.each(function(){this.obj.bind_custom(t)})}};t.fn.tumbler=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.tumbler"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tumbler"]').tumbler()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"menu",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.init=function(){n.find(".menu__item").each(function(){var e=t(this),n=e.children(".menu__item-link"),o=n.children(".menu__item-link-content").children(".menu__icon"),a=e.children(".menu__submenu-container");a.length>0&&(n.removeAttr("href"),o.addClass("icon_animate"),n.on("click",function(){a.slideToggle(500),o.toggleClass("icon_rotate_0deg")}))})},a.init()}return this})}};t.fn.menu=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.menu"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="menu"]').menu()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"widget_grid",target:n});var o=this.obj={},a={items:[],buttons:{},events:{onAdd:function(){},onSave:function(){}},grid:{cellHeight:20,disableDrag:!0,disableResize:!0,resizable:{handles:"e, se, s, sw, w"}}};o.options=t.extend(a,e),o.data=n.data(),o._nodesCount=0,o.data._nodes=[],o.destroy=function(){o.clearGrid(),_.each(o.data._nodes,function(t){t.widget.widget("destroy")}),n.data=null,n.remove()},o.createWidget=function(e){o._nodesCount++,e._id=o._nodesCount,e._height=e.height,e.widget=t('<div class="widget" id="widget'+o._nodesCount+'"></div>').widget(e.settings),e.el=t('<div><div class="grid-stack-item-content"></div></div>'),_.unset(e,"settings"),e.el.find(".grid-stack-item-content").append(e.widget),e.widget.off("self.check_toggle"),e.widget.data().buttons.button_collapse.off("click.widget"),e.widget.data().buttons.button_collapse.on("click.widget-grid",function(){e.widget.data().options.collapsed?o.expandWidget(e,!0):o.collapseWidget(e,!0)}),e.widget.data().buttons.button_remove.on("click.widget-grid",function(){o.removeWidget(e)}),e.widget.widget("editMode"),o.grid.addWidget(e.el,e.x,e.y,e.width,e.height),o.data._nodes.push(e),o.setItemData(e.el,e)},o.loadGrid=function(){o.grid.removeAll();var t=GridStackUI.Utils.sort(o.options.items);_.each(t,function(t){o.createWidget(t)})},o.collapseWidget=function(t,e){e&&(t.widget.data().options.collapsed=!0),o.updateWidget(t.el,1),t.widget.widget("collapse")},o.expandWidget=function(t,e){e&&(t.widget.data().options.collapsed=!1),o.updateWidget(t.el,t._height),t.widget.widget("expand")},o.addNewWidget=function(){var t={x:0,y:0,width:2,height:4,settings:{name:"Новый виджет",collapsed:!1}};o.createWidget(t)},o.saveGrid=function(){o.options.items=_.map(n.children(".grid-stack-item:visible"),function(e){e=t(e);var n=o.getItemData(e);return{x:n.x,y:n.y,width:n.width,height:n.height,settings:n.widget.data().options}},this)},o.clearGrid=function(){o.grid.removeAll()},o.removeWidget=function(t){o.grid.removeWidget(t.el),o.data._nodes=o.data._nodes.filter(function(e){return e._id!==t._id})},o.updateWidget=function(t,e){o.grid.update(t,null,null,null,e)},o.editMode=function(){_.each(o.data._nodes,function(t){t.widget.widget("editMode"),o.expandWidget(t,!1)}),o.enableGrid()},o.viewMode=function(){_.each(o.data._nodes,function(t){t._height=o.getItemData(t.el).height,t.widget.widget("viewMode"),t.widget.data().options.collapsed?o.collapseWidget(t,!1):o.expandWidget(t,!1)}),o.disableGrid()},o.createGrid=function(){return n.hasClass("grid-stack")?(n.gridstack(o.options.grid),o.grid=n.data("gridstack"),!0):(t.error("Container does not have class .grid-stack"),!1)},o.enableGrid=function(){o.grid.enableMove(!0,!0),o.grid.enableResize(!0,!0)},o.disableGrid=function(){o.grid.enableMove(!1,!0),o.grid.enableResize(!1,!0)},o.bindButtons=function(){o.options.buttons.add&&t(o.options.buttons.add).on("click",function(){o.addNewWidget(),o.options.events.onAdd()}),o.options.buttons.save&&t(o.options.buttons.save).on("click",function(){o.saveGrid(),o.options.events.onSave(o.options.items)})},o.setItemData=function(e,n){t.extend(e.data("_gridstack_node"),n)},o.getItemData=function(t){return t.data("_gridstack_node")},o.init=function(){o.createGrid()&&(o.loadGrid(),o.viewMode(),o.bindButtons())},o.init()}return this})},viewMode:function(){return this.each(function(){this.obj.viewMode()})},editMode:function(){return this.each(function(){this.obj.editMode()})},save:function(){return this.each(function(){this.obj.saveGrid()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.widget_grid=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.widget_grid"):e.init.apply(this,arguments)}}(jQuery),$(function(){var t=[{x:0,y:0,width:3,height:8,settings:{name:"Текст",collapsed:!1,content:"Диаграмма"}},{x:9,y:0,width:3,height:8,settings:{name:"Html",collapsed:!0,content_type:"html",content:'<div class="widget__body-data-inner"><label class="checkbox checkbox_type_button" data-fc="checkbox" data-checked="true"><button class="button button_toggable_check" type="button" data-fc="button" data-checked="true"><span class="button__text">Включить</span></button><input class="checkbox__input" type="checkbox" name="first" hidden/></label></div>'}},{x:3,y:0,width:3,height:8,settings:{name:"Фиолетовый",collapsed:!1,content_type:"count",content:666,color:"#8e6bf5"}},{x:6,y:0,width:3,height:11,settings:{name:"Количество",collapsed:!1,content_type:"count",content:5,color:"#5a97f2"}},{x:9,y:8,width:3,height:3,settings:{name:"Пустой виджет",collapsed:!1}}],e=$("#widget-grid").widget_grid({items:t,buttons:{add:"#button_add-widget",save:"#button_save-grid"},events:{onAdd:function(){console.log("add new widget")},onSave:function(t){console.log("save grid"),console.log(t)}}});$("#tumbler_edit-page").tumbler("bind",{on:function(){$("#button_add-widget").button("show"),$("#button_save-grid").button("show"),e.widget_grid("editMode")},off:function(){$("#button_add-widget").button("hide"),$("#button_save-grid").button("hide"),e.widget_grid("viewMode")}})}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"widget",target:n});var o=this.obj={};o.const={NO_DATA:"Нет данных",ERROR_DATA:"Ошибка загрузки",BORDER_COLOR_BLUE:"#5a97f2",BORDER_COLOR_DEFAULT:"#ccc",BORDER_COLOR_NODATA:"#aaa",BORDER_COLOR_PURPLE:"#8e6bf5",BORDER_COLOR_RED:"#ff5940",CONTENT_TYPE_TEXT:"text",CONTENT_TYPE_HTML:"html",CONTENT_TYPE_COUNT:"count"},o.defaults={name:"Виджет",collapsed:!1,color:o.const.BORDER_COLOR_DEFAULT,content_type:o.const.CONTENT_TYPE_TEXT,content:o.const.NO_DATA,onSave:null},o.options=t.extend(!0,{},o.defaults,e),o.data=n.data(),o.data.options=o.options,o.data.buttons={},o.render=function(){var e=t('<div class="widget__header"><div class="widget__header-name"><button class="button button_collapse" type="button" data-fc="button"><span class="button__text">'+o.data.options.name+'</span><span class="icon icon_svg_down"></span><span class="button__anim"></span></button></div><div class="widget__header-actions"><button class="button button_settings" type="button" data-fc="button"><span class="icon icon_svg_settings"></span><span class="button__anim"></span></button><button class="button button_remove" type="button" data-fc="button"><span class="icon icon_svg_trash"></span><span class="button__anim"></span></button></div></div><div class="widget__border"><div class="widget__body widget__body_align_center"><div class="widget__body-data"></div></div></div>'),a=t(e[1]),i=a.find(".widget__body-data");o.data.options.content===o.const.NO_DATA&&(o.data.options.content_type=o.const.CONTENT_TYPE_TEXT,o.data.options.color=o.const.BORDER_COLOR_NODATA),o.data.options.content_type===o.const.CONTENT_TYPE_COUNT&&(i.addClass("widget__body-data_type_count"),i.text(o.data.options.content)),o.data.options.content_type===o.const.CONTENT_TYPE_TEXT&&(i.addClass("widget__body-data_type_text"),i.text(o.data.options.content)),o.data.options.content_type===o.const.CONTENT_TYPE_HTML&&(i.addClass("widget__body-data_type_html"),i.html(o.data.options.content)),o.data.options.color===o.const.BORDER_COLOR_BLUE&&(a.addClass("widget__border_color_blue"),i.addClass("widget__body-data_color_blue")),o.data.options.color===o.const.BORDER_COLOR_DEFAULT&&(a.addClass("widget__border_color_default"),i.addClass("widget__body-data_color_default")),o.data.options.color===o.const.BORDER_COLOR_NODATA&&(a.addClass("widget__border_color_nodata"),i.addClass("widget__body-data_color_nodata")),o.data.options.color===o.const.BORDER_COLOR_PURPLE&&(a.addClass("widget__border_color_purple"),i.addClass("widget__body-data_color_purple")),o.data.options.color===o.const.BORDER_COLOR_RED&&(a.addClass("widget__border_color_red"),i.addClass("widget__body-data_color_red")),n.append(e)},o.get_buttons=function(){o.data.buttons={button_collapse:n.find(".button_collapse"),button_settings:n.find(".button_settings"),button_remove:n.find(".button_remove")}},o.get_name=function(){o.data.options.name=o.data.buttons.button_collapse.find(".button__text").text()},o.destroy=function(){void 0!==o.data.buttons.button_collapse[0]&&o.data.buttons.button_collapse.button("destroy"),void 0!==o.data.buttons.button_settings[0]&&o.data.buttons.button_settings.button("destroy"),void 0!==o.data.buttons.button_remove[0]&&o.data.buttons.button_remove.button("destroy"),n.data=null,n.remove()},o.collapse=function(){n.addClass("widget_collapsed")},o.expand=function(){n.removeClass("widget_collapsed")},o.toggle=function(){n.toggleClass("widget_collapsed"),o.data.options.collapsed=!o.data.options.collapsed},o.check_toggle=function(){o.data.options.collapsed?o.collapse():o.expand()},o.settings=function(){var e={header:{caption:"Настройки виджета",name:o.data.options.name,buttons:[{name:"save",action:"save",caption:"Применить",event:function(t){console.log(t),o.data.options=t,n.trigger("self.check_toggle"),"function"==typeof o.options.onSave&&o.options.onSave(t)}},{name:"close",action:"destroy",icon:"icon_svg_close"}]},content:{tabs:[{id:"general",name:"Основные",active:!0,content:'<label class="checkbox" data-fc="checkbox" data-field="collapsed"'+(o.data.options.collapsed?'data-checked="true"':"")+'><input class="checkbox__input" type="checkbox" name="collapsed"/><label class="checkbox__label">Скрывать по умолчанию</label></label>'},{id:"datasource",name:"Источник данных",content:"Источник данных"},{id:"advanced",name:"Расширенные",content:"Расширенные<br>настройки"}]},data:o.data.options};t('<span class="modal"></span>').appendTo("body").modal(e)},o.bind=function(){n.on("self.check_toggle",o.check_toggle),o.data.buttons.button_collapse.on("click.widget",o.toggle),o.data.buttons.button_settings.on("click.widget",o.settings),o.data.buttons.button_remove.on("click.widget",o.destroy)},o.editMode=function(){o.data.buttons.button_collapse.button("disable"),o.data.buttons.button_settings.button("show").button("enable"),o.data.buttons.button_remove.button("show").button("enable")},o.viewMode=function(){o.data.buttons.button_collapse.button("enable"),o.data.buttons.button_settings.button("hide").button("disable"),o.data.buttons.button_remove.button("hide").button("disable")},o.init_components=function(){n.find('[data-fc="button"]').button(),n.find('[data-fc="checkbox"]').checkbox()},o.init=function(){0==n.children().length?(o.render(),o.get_buttons()):(o.get_buttons(),o.get_name()),o.init_components(),o.bind()},o.init()}return this})},collapse:function(){return this.each(function(){this.obj.collapse()})},expand:function(){return this.each(function(){this.obj.expand()})},toggle:function(){return this.each(function(){this.obj.toggle()})},editMode:function(){return this.each(function(){this.obj.editMode()})},viewMode:function(){return this.each(function(){this.obj.viewMode()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.widget=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.widget"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="widget"]').widget()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"checkbox",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.input=n.find(".checkbox__input"),a.label=n.find(".checkbox__label"),a.button=n.find("button"),a.destroy=function(){void 0!==a.button[0]&&a.button.button("destroy"),n.data=null,n.remove()},a.hover=function(){n.addClass("checkbox_hovered")},a.unhover=function(){n.removeClass("checkbox_hovered")},a.click=function(){n.addClass("checkbox_clicked")},a.unclick=function(){n.removeClass("checkbox_clicked")},a.check=function(){n.addClass("checkbox_checked"),n.attr("data-checked","true"),a.input.attr("checked","checked"),a.input.prop("checked",!0),a.data.checked=!0,void 0!==a.button[0]&&a.button.button("check")},a.uncheck=function(){n.removeClass("checkbox_checked"),n.removeAttr("data-checked"),a.input.removeAttr("checked"),a.input.prop("checked",!1),a.data.checked=!1,void 0!==a.button[0]&&a.button.button("uncheck")},a.enable=function(){if(n.removeClass("checkbox_disabled"),n.removeAttr("data-disabled"),a.input.removeAttr("disabled"),a.input.prop("disabled",!1),a.data.disabled=!1,a.data._handlers)for(var t in a.data._handlers)a.data._handlers[t].forEach(function(t){n.on(t.type+"."+t.namespace,t.handler)});void 0!==a.button[0]&&a.button.button("enable")},a.disable=function(){if(n.addClass("checkbox_disabled"),n.attr("data-disabled","true"),a.input.attr("disabled","disabled"),a.input.prop("disabled",!0),a.data.disabled=!0,t._data(n[0],"events")){a.data._handlers={};for(var e in t._data(n[0],"events"))a.data._handlers[e]=t._data(n[0],"events")[e].slice(0);n.off()}void 0!==a.button[0]&&a.button.button("disable")},a.hide=function(){n.addClass("checkbox_hidden")},a.show=function(){n.removeClass("checkbox_hidden")},a.bind=function(){n.on("mouseover.checkbox",a.hover),n.on("mouseout.checkbox",a.unhover),n.on("mousedown.checkbox touchstart.checkbox",function(){a.click(),t("body").one("mouseup.checkbox touchend.checkbox",a.unclick)}),void 0!==a.label[0]&&(a.data._widget.type="checkbox.label",n.bindFirst("click.checkbox",".checkbox__label",null,function(t){t.preventDefault(),a.data.checked?a.uncheck():a.check()})),void 0!==a.button[0]&&(a.data._widget.type="checkbox.button",n.bindFirst("click.checkbox","button",null,function(t){t.preventDefault(),a.data.checked?a.uncheck():a.check()}))},a.init_components=function(){void 0!==a.button[0]&&a.button.button()},a.init=function(){a.data.name=a.input.attr("name"),a.init_components(),a.bind(),a.data.checked?a.check():a.uncheck(),a.data.disabled?a.disable():a.enable(),a.data.hidden?a.hide():a.show()},a.init()}return this})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})},checked:function(){if(1==this.length)return this[0].obj.data.checked;var t=[];return this.each(function(){t.push(this.obj.data.checked)}),t},value:function(){return this.checkbox("checked")}};t.fn.checkbox=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.checkbox"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="checkbox"]').checkbox()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"radio",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.input=n.find(".radio__input"),a.label=n.find(".radio__label"),a.button=n.find("button"),a.destroy=function(){void 0!==a.button[0]&&a.button.button("destroy"),n.data=null,n.remove()},a.hover=function(){n.addClass("radio_hovered")},a.unhover=function(){n.removeClass("radio_hovered")},a.click=function(){n.addClass("radio_clicked")},a.unclick=function(){n.removeClass("radio_clicked")},a.check=function(){n.addClass("radio_checked"),n.attr("data-checked","true"),a.input.attr("checked","checked"),a.input.prop("checked",!0),a.data.checked=!0,void 0!==a.button[0]&&a.button.button("check")},a.uncheck=function(){n.removeClass("radio_checked"),n.removeAttr("data-checked"),a.input.removeAttr("checked"),a.input.prop("checked",!1),a.data.checked=!1,void 0!==a.button[0]&&a.button.button("uncheck")},a.enable=function(){if(n.removeClass("radio_disabled"),n.removeAttr("data-disabled"),a.input.removeAttr("disabled"),a.input.prop("disabled",!1),a.data.disabled=!1,a.data._handlers)for(var t in a.data._handlers)a.data._handlers[t].forEach(function(t){n.on(t.type+"."+t.namespace,t.handler)});void 0!==a.button[0]&&a.button.button("enable")},a.disable=function(){if(n.addClass("radio_disabled"),n.attr("data-disabled","true"),a.input.attr("disabled","disabled"),a.input.prop("disabled",!0),a.data.disabled=!0,t._data(n[0],"events")){a.data._handlers={};for(var e in t._data(n[0],"events"))a.data._handlers[e]=t._data(n[0],"events")[e].slice(0);n.off()}void 0!==a.button[0]&&a.button.button("disable")},a.hide=function(){n.addClass("radio_hidden")},a.show=function(){n.removeClass("radio_hidden")},a.bind=function(){n.on("mouseover.radio",a.hover),n.on("mouseout.radio",a.unhover),n.on("mousedown.radio touchstart.radio",function(){a.click(),t("body").one("mouseup.radio touchend.radio",a.unclick)}),void 0!==a.label[0]&&(a.data._widget.type="radio.label",n.bindFirst("click.radio",".radio__label",null,function(t){t.preventDefault(),a.data.checked||a.check()})),void 0!==a.button[0]&&(a.data._widget.type="radio.button",n.bindFirst("click.radio","button",null,function(t){t.preventDefault(),a.data.checked||a.check()}))},a.init_components=function(){void 0!==a.button[0]&&a.button.button()},a.init=function(){a.data.name=a.input.attr("name"),a.data.value=a.input.attr("value"),a.init_components(),a.bind(),a.data.checked?a.check():a.uncheck(),a.data.disabled?a.disable():a.enable(),a.data.hidden?a.hide():a.show()},a.init()}return this})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})},checked:function(){if(1==this.length)return this[0].obj.data.checked;var t=[];return this.each(function(){t.push(this.obj.data.checked)}),t},value:function(){if(1==this.length)return this[0].obj.data.value;var t=[];return this.each(function(){t.push(this.obj.data.value)}),t}};t.fn.radio=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.radio"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio"]').radio()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"radio_group",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.radio_list=n.find(".radio"),a.has_checked=!1,a.destroy=function(){a.radio_list.each(function(){t(this).radio("destroy")}),n.data=null,n.remove()},a.init=function(){a.radio_list.each(function(){var e={};e.self=t(this),e.data=e.self.data(),e.self.radio(),e.data.checked&&a.has_checked&&e.self.radio("uncheck"),e.data.checked&&(a.has_checked=!0),e.self.on("click.radio_group",null,null,function(n){a.radio_list.each(function(){t(this).radio("uncheck")}),e.self.radio("check")})})},a.enable=function(){a.radio_list.each(function(){t(this).radio("enable")})},a.disable=function(){a.radio_list.each(function(){t(this).radio("disable")})},a.hide=function(){a.radio_list.each(function(){t(this).radio("hide")})},a.show=function(){a.radio_list.each(function(){t(this).radio("show")})},a.value=function(){var e;return a.radio_list.each(function(){t(this).radio("checked")&&(e=t(this).radio("value"))}),e},a.init()}return this})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})},value:function(){if(1==this.length)return this[0].obj.value();var t=[];return this.each(function(){t.push(this.obj.value())}),t}};t.fn.radio_group=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.radio_group"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio-group"]').radio_group()}),$.fn.bindFirst=function(t,e,n,o){this.on(t,e,n,o),this.each(function(){var e=$._data(this,"events")[t.split(".")[0]],n=e.pop();e.splice(0,0,n)})},function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"alertbox",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.button=n.find("button"),a.destroy=function(){void 0!==a.button[0]&&a.button.button("destroy"),n.data=null,n.remove()},a.enable=function(){if(a.data.disabled=!1,a.data._handlers)for(var t in a.data._handlers)a.data._handlers[t].forEach(function(t){n.on(t.type+"."+t.namespace,t.handler)});void 0!==a.button[0]&&a.button.button("enable")},a.disable=function(){if(a.data.disabled=!0,t._data(n[0],"events")){a.data._handlers={};for(var e in t._data(n[0],"events"))a.data._handlers[e]=t._data(n[0],"events")[e].slice(0);n.off()}void 0!==a.button[0]&&a.button.button("disable")},a.hide=function(){n.addClass("alertbox_hidden")},a.show=function(){n.removeClass("alertbox_hidden")},a.bind=function(){n.bindFirst("click.alertbox","button",null,function(t){t.preventDefault(),a.destroy()})},a.init_components=function(){void 0!==a.button[0]&&a.button.button()},a.init=function(){a.init_components(),a.bind(),a.data.disabled?a.disable():a.enable(),a.data.hidden?a.hide():a.show()},a.init()}return this})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.alertbox=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.alertbox"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="alertbox"]').alertbox()}),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"modal",target:n});var o=this.obj={};o.defaults={header:{icon:"icon_svg_settings",caption:"Модальное окно",name:"Название",buttons:[{name:"close",action:"destroy",icon:"icon_svg_close"}]},content:{tabs:[{id:"general",name:"Главная"}]},data:null},o.options=t.extend({},o.defaults,e),o.data=n.data(),o.el={modal__view:t('<div class="modal__view"></div>'),modal__backdrop:t('<div class="modal__backdrop"></div>'),modal__dialog:t('<div class="modal__dialog modal__dialog_hidden"></div>'),card:t('<div class="card" data-fc="card"></div>'),card__header:t('<div class="card__header"></div>'),card__header_row_caption:t('<div class="card__header-row"></div>'),card__header_row_name:t('<div class="card__header-row"></div>'),card__header_row_tabs:t('<div class="card__header-row tabs"></div>'),tabs__list:t('<ul class="tabs__list"></ul>'),card__main:t('<div class="card__main"></div>'),card__middle:t('<div class="card__middle card__middle_full"></div>'),card__middle_scroll:t('<div class="card__middle-scroll"></div>'),card__middle_inner:t('<div class="card__middle-inner"></div>'),card__backdrop:t('<div class="card__backdrop"></div>'),card__right:t('<div class="card__right"></div>'),tabs_pane:t('<div class="tabs__pane"></div>')},o.destroy=function(){o.hide(),n.find(".modal__backdrop").remove(),setTimeout(function(){n.data=null,n.remove()},500)},o.save=function(){o.el.card__middle_inner.find("[data-field]").each(function(){var e=t(this);_.set(o.options.data,e.data("field"),e[e.data("fc")]("value"))})},o.hide=function(){n.find(".modal__dialog").addClass("modal__dialog_hidden")},o.show=function(){n.find(".modal__dialog").removeClass("modal__dialog_hidden")},o.render_view=function(){n.append(o.el.modal__view.append(o.el.modal__backdrop,o.el.modal__dialog.append(o.el.card.append(o.el.card__header.append(o.el.card__header_row_caption,o.el.card__header_row_name,o.el.card__header_row_tabs.append(o.el.tabs__list)),o.el.card__main.append(o.el.card__middle.append(o.el.card__middle_scroll.append(o.el.card__middle_inner)))))))},o.render_header=function(){o.render_header_caption(),o.render_header_name()},o.render_header_caption=function(){o.render_header_caption_name(),o.render_header_caption_buttons()},o.render_header_caption_name=function(){o.el.card__header_row_caption.append(t('<div class="card__header-column"><label class="card__caption"><span class="card__caption-text">'+o.options.header.caption+"</span></label></div>"))},o.render_header_caption_buttons=function(){var e=t('<div class="card__header-column"></div>');o.el.card__header_row_caption.append(e),o.options.header.buttons.forEach(function(n){var a=t('<button class="button button__'+n.name+'" data-fc="button">'+(n.icon?'<span class="icon '+n.icon+'"></span>':"")+(n.caption?'<span class="button__text"> '+n.caption+"</span>":"")+'<span class="button__anim"></span></button>');n.action&&a.on("click",o[n.action]),"function"==typeof n.event&&a.on("click",function(){n.event(o.options.data),o.destroy()}),e.append(a)})},o.render_header_name=function(){o.el.card__header_row_name.append(t('<div class="card__header-column"><label class="card__name"><span class="card__name-text">'+o.options.header.name+"</span></label></div>"))},o.render_tabs=function(){if(1==o.options.content.tabs.length)o.options.content.tabs[0].active=!0;else{var e=!1;o.options.content.tabs.forEach(function(t){t.active&&(e=!0)}),e||(o.options.content.tabs[0].active=!0)}o.options.content.tabs.forEach(function(e){o.el.tabs__list.append(t((e.active?'<li class="tabs__tab tabs__tab_active">':'<li class="tabs__tab">')+'<a class="tabs__link link" href="#'+e.id+'" data-fc="tab"><button class="button" data-fc="button"><span class="button__text">'+e.name+'</span><span class="button__anim"></span></button></a></li>')),o.el.card__middle_inner.append(o.el.tabs_pane.clone().attr("id",e.id).addClass(e.active?"tabs__pane_active":"").html(e.content))})},o.init_components=function(){n.find('[data-fc="alertbox"]').alertbox(),n.find('[data-fc="button"]').button(),n.find('[data-fc="checkbox"]').checkbox(),n.find('[data-fc="radio"]').radio(),n.find('[data-fc="radio-group"]').radio_group(),n.find('[data-fc="tab"]').tabs(),n.find('[data-fc="tumbler"]').tumbler(),n.find('[data-fc="widget"]').widget()},o.bind=function(){n.find(".button_close").on("click",o.destroy),n.find(".modal__backdrop").on("click",o.destroy)},o.init=function(){n.remove().appendTo("body"),0==n.children().length&&(o.render_view(),o.render_header(),o.render_tabs()),o.init_components(),o.bind(),setTimeout(o.show,0)},o.init()}return this})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.modal=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.modal"):e.init.apply(this,arguments)}}(jQuery),function(t){var e={init:function(e){return this.each(function(){var n=t(this);if(!n.data("_widget")){n.data("_widget",{type:"tab",target:n});var o={},a=this.obj={};a.options=t.extend(o,e),a.data=n.data(),a.neighbors=[],a.el={button:n.find('[data-fc="button"]'),tabs__tab:n.parent(".tabs__tab"),tabs__link:n,tabs__pane:t('.tabs__pane[id="'+n.attr("href").replace("#","")+'"]')},a.destroy=function(){a.neighbors.forEach(function(t){t.button.button("destroy")}),n.data=null,n.remove()},a.enable=function(){a.el.button.button("enable")},a.disable=function(){a.el.button.button("disable")},a.show=function(){a.neighbors.forEach(function(t){t.button.button("enable"),t.tabs__tab.removeClass("tabs__tab_active"),t.tabs__pane.removeClass("tabs__pane_active")}),a.el.button.button("disable"),a.el.tabs__tab.addClass("tabs__tab_active"),a.el.tabs__pane.addClass("tabs__pane_active")},a.bind=function(){a.el.tabs__link.on("click",function(t){t.preventDefault(),a.el.tabs__tab.hasClass("tabs__tab_active")||a.show()})},a.check_active=function(){a.el.tabs__tab.hasClass("tabs__tab_active")&&a.show()},a.get_neighbors=function(){n.closest(".tabs").find(".tabs__tab").each(function(){var e=t(this),n={button:e.find('[data-fc="button"]'),tabs__tab:e,tabs__link:e.find(".tabs__link"),tabs__pane:e.closest(".card").find('.tabs__pane[id="'+e.find(".tabs__link").attr("href").replace("#","")+'"]')};n.button.button(),a.neighbors.push(n)})},a.init=function(){a.get_neighbors(),a.bind(),a.check_active()},a.init()}return this})},show:function(){return this.each(function(){this.obj.show()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.tabs=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on $.tabs"):e.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tab"]').tabs()});