$(function(){$('[data-toggle="menu-left"]').each(function(){function t(){i.length>0&&i.icon__menu("toggle"),d.removeClass("fs-view__left_hidden"),s.removeClass("fs-view__middle_full"),0==o.find(".fs-view__backdrop").length&&$('<div class="fs-view__backdrop"></div>').one("click",e).appendTo(o),$(".fs-view__main").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__main").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("menu_hidden",!1)}function a(){i.length>0&&i.icon__menu("toggle"),d.addClass("fs-view__left_hidden"),s.addClass("fs-view__middle_full"),o.find(".fs-view__backdrop").remove(),$(".fs-view__main").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__main").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("menu_hidden",!0)}function e(){d.hasClass("fs-view__left_hidden")?t():a()}var n=$(this),i=n.find(".icon__menu"),o=$(".fs-view__main"),d=$(".fs-view__left"),s=$(".fs-view__middle");d.hasClass("fs-view__left_hidden")||0!=o.find(".fs-view__backdrop").length||$('<div class="fs-view__backdrop"></div>').one("click",e).appendTo(o),"function"==typeof getCookie&&("true"==getCookie("menu_hidden")?a():t()),setTimeout(function(){o.addClass("fs-view__main_transition")},100),n.on("click",e)}),$('[data-toggle="menu-right"]').each(function(){function t(){i.length>0&&i.icon__menu("toggle"),d.removeClass("fs-view__middle-right_hidden"),0==o.find(".fs-view__middle-backdrop").length&&$('<div class="fs-view__middle-backdrop"></div>').one("click",e).appendTo(o),$(".fs-view__middle-right").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__middle-right").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("menu_right_hidden",!1)}function a(){i.length>0&&i.icon__menu("toggle"),d.addClass("fs-view__middle-right_hidden"),o.find(".fs-view__middle-backdrop").remove(),$(".fs-view__middle-right").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__middle-right").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("menu_right_hidden",!0)}function e(){d.hasClass("fs-view__middle-right_hidden")?t():a()}var n=$(this),i=n.find(".icon__menu"),o=$(".fs-view__middle"),d=$(".fs-view__middle-right");d.hasClass("fs-view__middle-right_hidden")||0!=o.find(".fs-view__middle-backdrop").length||$('<div class="fs-view__middle-backdrop"></div>').one("click",e).appendTo(o),"function"==typeof getCookie&&("true"==getCookie("menu_right_hidden")?a():t()),setTimeout(function(){o.addClass("fs-view__middle_transition")},100),n.on("click",e)}),$('[data-toggle="header"]').each(function(){function t(){i.removeClass("icon_rotate_180deg"),o.removeClass("fs-view__header_hidden"),o.css("margin-top",""),$(".fs-view__header").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__header").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("header_hidden",!1)}function a(){i.addClass("icon_rotate_180deg"),o.addClass("fs-view__header_hidden"),o.css("margin-top",-o.outerHeight()),$(".fs-view__header").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$(".fs-view__header").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setTimeout(function(){$(window).trigger("resize")},100)}),"function"==typeof setCookie&&setCookie("header_hidden",!0)}function e(){o.hasClass("fs-view__header_hidden")?t():a()}var n=$(this),i=n.find(".icon"),o=$(".fs-view__header");"function"==typeof getCookie&&("true"==getCookie("header_hidden")?a():t()),setTimeout(function(){$(".fs-view").addClass("fs-view_transition"),i.addClass("icon_animate")},100),n.on("click",e)})}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"button",target:e});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,width:"auto",popup_animation:!0,popup_place:"source",datePickerOptions:{data:[],autoClose:!0,onSelect:function(t,a,e){},position:"bottom right",instance:null}},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={popup:t('<div class="popup"></div>'),search:t('<div class="search"></div>')},n.destroy=function(){n.data._el.popup.data("_widget")&&n.data._el.popup.popup("destroy"),e.removeData(),e.remove()},n.disable=function(){if(e.removeClass("button_hovered"),e.removeClass("button_clicked_out"),e.addClass("button_disabled"),t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}n.data.disabled=!0},n.enable=function(){if(e.removeClass("button_clicked_out"),e.removeClass("button_disabled"),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+(t.namespace?"."+t.namespace:""),t.handler)});n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.removeClass("button_clicked_out"),e.addClass("button_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("button_clicked_out"),e.removeClass("button_hidden"),n.data.hidden=!1},n.check=function(){e.addClass("button_checked"),e[0].setAttribute("data-checked","true"),n.data.checked=!0},n.uncheck=function(){e.removeClass("button_checked"),e[0].setAttribute("data-checked","false"),n.data.checked=!1},n.hover=function(){e.addClass("button_hovered")},n.unhover=function(){e.removeClass("button_hovered")},n.click=function(){e.addClass("button_clicked"),e.removeClass("button_clicked_out"),t("body").one("mouseup.button.private touchend.button.private",n.unclick)},n.unclick=function(){e.addClass("button_clicked_out"),e.removeClass("button_clicked")},n.set_width=function(t){e.css("width",t)},n.set_text=function(t){e.find(".button__text").text(t)},n.bind=function(){e.on("mouseover.button.private",n.hover),e.on("mouseout.button.private",n.unhover),e.on("mousedown.button.private touchstart.button.private",n.click),n.data.trigger&&e.on("click.button.trigger",function(t){t.preventDefault(),e.find("."+n.data.triggercontainer).trigger(n.data.trigger)})},n.bind_checkbox=function(){e.bindFirst("click.button.check",null,null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()})},n.bind_radio=function(){e.bindFirst("click.button.radio",null,null,function(t){t.preventDefault(),n.data.checked||n.check()})},n.init_components=function(){var a={source:e,animation:n.data.popup_animation,place:n.data.popup_place};"popup"==n.data.toggle&&(n.data._el.popup=t(n.data.target),n.data._el.popup.popup(a)),"datepicker"==n.data.toggle&&("source"==n.data.popup_place&&e.after(n.data._el.popup),"body"==n.data.popup_place&&t("body").append(n.data._el.popup),a.position=n.data.datePickerOptions.position,a.width="auto",n.data._el.popup.popup(a),e.datepicker({inline:!0,autoClose:n.data.datePickerOptions.autoClose,onRenderCell:function(t,a){if(t){var e=t.getDate(),i=n.data.datePickerOptions.data.filter(function(a){return Asyst.date.format(t)==a.date});if("day"==a)return i.length>0?{html:['<div class="datepicker__day">'+e,'<div class="datepicker__note">'+i.length,"</div>","</div>"].join("")}:{html:'<div class="datepicker__day">'+e+"</div>"}}},onSelect:function(t,a,e){n.data._el.popup.popup("hide"),n.data.datePickerOptions.onSelect(t,a,e)}}),n.data.datePickerOptions.instance=e.data().datepicker,n.data.datePickerOptions.instance.$datepicker.parent().appendTo(n.data._el.popup)),"search"==n.data.toggle&&n.data._el.search.search({source:e,func:n.data.func,areas:n.data.areas,usesp:n.data.usesp})},n.init=function(){n.set_width(n.data.width),n.init_components(),n.bind(),e.hasClass("button_toggable_check")&&(n.data._widget.type="button.checkbox",n.init_check(),n.bind_checkbox()),e.hasClass("button_toggable_radio")&&(n.data._widget.type="button.radio",n.init_check(),n.bind_radio()),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width)},n.init_check=function(){n.data.checked?n.check():n.uncheck()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},unhover:function(){return this.each(function(){this.obj.unhover()})},hover:function(){return this.each(function(){this.obj.hover()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},set_text:function(t){return this.each(function(){this.obj.set_text(t)})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})}};t.fn.button=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.button"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="button"]').button()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"icon__menu",target:e});var n=this.obj={};n.defaults={clicked:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={ham:e,menu_top:e.find(".icon__menu-top"),menu_middle:e.find(".icon__menu-middle"),menu_bottom:e.find(".icon__menu-bottom")},n.toggle=function(){n.data._el.ham.toggleClass("icon__menu_click"),n.data._el.menu_top.toggleClass("icon__menu-top_click"),n.data._el.menu_middle.toggleClass("icon__menu-middle_click"),n.data._el.menu_bottom.toggleClass("icon__menu-bottom_click")},n.bind=function(){n.data._el.ham.on("toggle.icon__menu",function(t){n.toggle(t),t.preventDefault()})},n.init=function(){n.bind(),n.data.clicked&&n.toggle()},n.init()}return this})},toggle:function(){return this.each(function(){this.obj.toggle()})}};t.fn.icon__menu=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.icon__menu"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="icon__menu"]').icon__menu()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"popup",target:e});var n=this.obj={};n.defaults={source:null,width:"full",height:"auto",position:"bottom left",place:"source",animation:!0,visible:!1,offset:10,select:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._inFocus=!1,n.data._el={source:n.data.source,source_arrow:n.data.source.find(".icon_animate")},n.destroy=function(){e.removeData(),e.remove()},n.hide=function(){e.removeClass("popup_visible_bottom"),n.data.visible=!1,n.data._inFocus=!1,void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.removeClass("icon_rotate_180deg")},n.show=function(){n.data.animation&&e.addClass("popup_animation"),n.set_width(n.data.width),n.set_position(n.data.position),n.data.visible=!0,n.data._inFocus=!1,e.addClass("popup_visible_bottom"),void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.addClass("icon_rotate_180deg")},n.toggle=function(){n.data.visible?n.hide():n.show()},n.mouseup_self=function(t){t.originalEvent.inFocus=!0},n.mouseup_source=function(t){n.data._inFocus=!0},n.mouseup_body=function(t){n.data._inFocus||t.originalEvent.inFocus||n.hide()},n.set_width=function(t){"full"!=t&&"100%"!=t||(t=n.data._el.source.outerWidth()),e.css({width:t,"max-width":t})},n.set_height=function(t){e.css({height:t,"max-height":t})},n.set_position=function(a,i){if(void 0===i&&(i=0),i<11){var o,d,s=n.get_dimentions(n.data._el.source),l=n.get_dimentions(e),c=a.split(" "),r=n.data.offset,_=c[0],u=c[1];switch(_){case"top":o=s.top-l.height-r;break;case"right":d=s.left+s.width+r;break;case"bottom":o=s.top+s.height+r;break;case"left":d=s.left-l.width-r}switch(u){case"top":o=s.top;break;case"right":d=s.left+s.width-l.width;break;case"bottom":o=s.top+s.height-l.height;break;case"left":d=s.left;break;case"center":/left|right/.test(_)?o=s.top+s.height/2-l.height/2:d=s.left+s.width/2-l.width/2}e.css({left:d,top:o});var h=n.get_offset(n.data._el.source);switch(a){case"bottom right":(h.top+h.height+r+l.height>t(window).height()||h.left+h.width-l.width<0)&&n.set_position("left top",++i);break;case"left top":(h.left-r-l.width<0||h.top+l.height>t(window).height())&&n.set_position("left center",++i);break;case"left center":(h.left-r-l.width<0||h.top+h.height/2+l.height/2>t(window).height()||h.top+h.height/2-l.height/2<0)&&n.set_position("left bottom",++i);break;case"left bottom":(h.left-r-l.width<0||h.top+h.height-l.height<0)&&n.set_position("top right",++i);break;case"top right":(h.top-r-l.height<0||h.left+h.width-l.width<0)&&n.set_position("top left",++i);break;case"top left":(h.top-r-l.height<0||h.left+l.width>t(window).width())&&n.set_position("right bottom",++i);break;case"right bottom":(h.left+h.width+r+l.width>t(window).width()||h.top+h.height-l.height<0)&&n.set_position("right center",++i);break;case"right center":(h.left+h.width+r+l.width>t(window).width()||h.top+h.height/2+l.height/2>t(window).height()||h.top+h.height/2-l.height/2<0)&&n.set_position("right top",++i);break;case"right top":(h.left+h.width+r+l.width>t(window).width()||h.top+l.height>t(window).height())&&n.set_position("bottom left",++i);break;case"bottom left":(h.top+h.height+r+l.height>t(window).height()||h.left+l.width>t(window).width())&&n.set_position("bottom right",++i)}}},n.get_dimentions=function(t){var a;return"source"==n.data.place&&(a=t.position()),"body"==n.data.place&&(a=t.offset()),{width:t.outerWidth(),height:t.outerHeight(),left:a.left,top:a.top}},n.get_offset=function(t){var a=t.offset();return{width:t.outerWidth(),height:t.outerHeight(),left:a.left,top:a.top}},n.bind=function(){n.data._el.source.on("click.popup.toggle",function(t){t.preventDefault(),n.toggle()}),n.data._el.source.on("mouseup.popup.source touchend.popup.source",n.mouseup_source),e.on("mouseup.popup.self touchend.popup.self",n.mouseup_self),t("body").on("mouseup.popup.body touchend.popup.body",n.mouseup_body)},n.init_components=function(){void 0!==n.data._el.source_arrow[0]&&n.data._el.source_arrow.addClass("icon_animate")},n.init_resize=function(){"body"==n.data.place&&(t(window).on("resize",function(){n.data.visible&&n.set_position(n.data.position)}),t(document).on("mousewheel",function(){n.data.visible&&n.set_position(n.data.position)}))},n.init=function(){n.init_components(),n.init_resize(),n.bind(),n.data.select&&e.addClass("popup_select "),n.data.visible?n.show():n.hide(),n.set_width(n.data.width),n.set_height(n.data.height)},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},set_height:function(t){return this.each(function(){this.obj.set_height(t)})}};t.fn.popup=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.popup"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"menu",target:e});var n=this.obj={};n.defaults={expanded:!1,scrollToSelectedItem:!1,maxItemLines:null,maxItemSymbols:null,toggle:"click",autoclose:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.destroy=function(){e.removeData()},n.select=function(t){var a=e.find('.menu__item-link[data-id="'+t+'"]'),n=a.parent();e.find(".menu__item-link").removeClass("menu__item-link_selected"),a.addClass("menu__item-link_selected"),e.animate({scrollTop:n.position().top+n.outerHeight()/2-e.outerHeight()/2},200)},n.init=function(){e.find(".menu__item").each(function(){var a=t(this),i=a.children(".menu__item-link"),o=i.children(".menu__item-link-content"),d=o.children(".menu__item-text"),s=o.children(".menu__icon"),l=a.children(".menu__submenu-container");if(n.data.scrollToSelectedItem&&i.on("click",function(){e.animate({scrollTop:a.position().top+a.outerHeight()/2-e.outerHeight()/2},200)}),n.data.maxItemLines){var c=n.data.maxItemLines*parseInt(d.css("line-height").replace("px",""));d.css({"max-height":c}).dotdotdot({watch:!0,callback:function(t,a){t?(d.data("isTrancated",t),d.attr("data-tooltip",a.text())):"true"==d.data("isTrancated")&&d.removeAttr("data-tooltip")}})}if(n.data.maxItemSymbols){var r=d.html();r.length>n.data.maxItemSymbols&&(d.attr("data-tooltip",r),d.html(r.substr(0,n.data.maxItemSymbols)+"..."))}l.length>0?(i.removeAttr("href"),s.addClass("icon_animate"),"click"==n.data.toggle&&(i.on("click",function(){var e=l.data("collapsed");l.slideToggle(500),l.data("collapsed",!e),e?(s.addClass("icon_rotate_0deg"),t(this).addClass("menu__item-link_selected")):(s.removeClass("icon_rotate_0deg"),t(this).removeClass("menu__item-link_selected")),a.siblings().each(function(){var a=t(this),e=a.children(".menu__submenu-container"),i=a.children(".menu__item-link"),o=a.children(".menu__item-link").children(".menu__item-link-content").children(".menu__icon");i.removeClass("menu__item-link_selected"),n.data.autoclose&&(e.data("collapsed")||(e.slideUp(500),e.data("collapsed",!0),o.toggleClass("icon_rotate_0deg")))})}),n.data.expanded?(l.show(),l.data("collapsed",!1),s.toggleClass("icon_rotate_0deg")):0==l.data("collapsed")||"false"==l.data("collapsed")?(l.show(),s.toggleClass("icon_rotate_0deg"),i.addClass("menu__item-link_selected")):l.data("collapsed",!0)),"hover"==n.data.toggle&&(a.on("mouseover",function(){l.show(),i.addClass("menu__item-link_hovered"),s.toggleClass("icon_rotate_0deg")}),a.on("mouseout",function(){l.hide(),i.removeClass("menu__item-link_hovered"),s.toggleClass("icon_rotate_0deg")}))):i.on("click",function(){e.find(".menu__item-link").removeClass("menu__item-link_selected"),t(this).addClass("menu__item-link_selected")})})},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},select:function(t){return this.each(function(){this.obj.select(t)})}};t.fn.menu=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.menu"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="menu"]').menu()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"codearea",target:e});var n=this.obj={};n.defaults={disabled:!1,readonly:!1,mime:"text/html",editor:null,value:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.enable=function(){n.data.disabled=!1,n.render()},n.render=function(){n.data.disabled||(n.data.value&&e.val(n.data.value),n.data.editor=CodeMirror.fromTextArea(e[0],{readOnly:n.data.readonly,mode:n.data.mime,tabSize:2,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}))},n.get_value=function(){return n.data.editor&&(n.data.value=n.data.editor.getValue()),n.data.value},n.set_value=function(t){t=t.replace(new RegExp("%","g"),"%25"),n.data.value=decodeURI(t),n.data.editor&&n.data.editor.setValue(n.data.value)},n.init=function(){n.render()},n.init()}return this})},enable:function(){return this.each(function(){this.obj.enable()})},render:function(){return this.each(function(){this.obj.render()})},set_value:function(t){return this.each(function(){this.obj.set_value(t)})},get_value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.get_value()}),t}var a=[];return this.each(function(){a.push(this.obj.get_value())}),a},value:function(t){if(t)return this.each(function(){this.obj.set_value(t)});if(1==this.length){var a=!1;return this.each(function(){a=this.obj.get_value()}),a}var e=[];return this.each(function(){e.push(this.obj.get_value())}),e}};t.fn.codearea=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.button"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="codearea"]').codearea()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"widget",target:e});var n=this.obj={};n.const={CONTENT_LOADING:'<span class="spinner"></span>',CONTENT_NODATA:"Нет данных",CONTENT_ERROR:"Ошибка загрузки",BORDER_COLOR_DARK_BLUE:"#0070ba",BORDER_COLOR_BLUE:"#5a97f2",BORDER_COLOR_LIGHT_BLUE:"#2fb4e9",BORDER_COLOR_DEFAULT:"#ccc",BORDER_COLOR_DARK_GREY:"#777",BORDER_COLOR_PURPLE:"#8e6bf5",BORDER_COLOR_RED:"#ff5940",BORDER_COLOR_GREEN:"#13a89e",BORDER_COLOR_NONE:"transparent",CONTENT_TYPE_TEXT:"text",CONTENT_TYPE_HTML:"html",CONTENT_TYPE_COUNT:"count"},n.defaults={collapsible:!0,collapsed:!1,color:n.const.BORDER_COLOR_DEFAULT,calendar:!1,content:n.const.CONTENT_NODATA,mode:"view",libraries:null,loader:null,reloadable:!1,onResize:null,resizeOnExpand:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={button_collapse:t(['<button class="button button_collapse" type="button" data-tooltip="'+n.data.name+'">','<span class="button__text">'+n.data.name+"</span>","</button>"].join("")).button(),button_collapse_icon:t('<span class="icon icon_svg_down"></span>'),buttons:[]},n.data._private={buttons_view_mode_count:0,buttons_edit_mode_count:0},n.destroy=function(){n.data._el.button_collapse.button("destroy"),n.data._el.buttons.forEach(function(t){t.button("destroy")}),e.removeData(),e.remove()},n.render=function(){var a=t('<div class="widget__header"><div class="widget__header-name"></div><div class="widget__header-actions"></div></div><div class="widget__border"><div class="widget__body"><div class="widget__body-data"></div></div></div>');e.append(a),n.set_color(),n.data.collapsed||n.set_content()},n.render_button_collapse=function(){n.data.name?(n.data.collapsible?(n.data._el.button_collapse.button("enable"),n.data._el.button_collapse.append(n.data._el.button_collapse_icon)):(n.data._el.button_collapse.button("disable"),n.data._el.button_collapse_icon.remove()),e.closestChild(".widget__header-name").append(n.data._el.button_collapse),n.data._el.button_collapse.button("show")):n.data._el.button_collapse.button("hide"),n.data.name&&""!=n.data.name?(e.removeClass("widget_has_no_name"),e.addClass("widget_has_name")):(e.removeClass("widget_has_name"),e.addClass("widget_has_no_name"))},n.render_buttons=function(){e.addClass("widget_mode_view_has_no_buttons"),e.addClass("widget_mode_edit_has_no_buttons"),n.data.buttons&&n.data.buttons.forEach(function(t){n.render_button(t,!1)})},n.render_button=function(a,i){i&&n.data.buttons.push(a),"view"==a.mode&&(n.data._private.buttons_view_mode_count++,e.addClass("widget_mode_view_has_buttons"),e.removeClass("widget_mode_view_has_no_buttons")),"edit"==a.mode&&(n.data._private.buttons_edit_mode_count++,e.addClass("widget_mode_edit_has_buttons"),e.removeClass("widget_mode_edit_has_no_buttons"));var o=t(['<button class="button" type="button" '+(a.id?'id="'+a.id+'" ':" ")+(a.tooltip?'data-tooltip="'+a.tooltip+'"':"")+">",'<span class="icon '+a.icon+'"></span>',"</button>"].join("")).button();o.on("click",function(){a.click(e,_.omitBy(n.data,function(t,a){return"_"==a.substring(0,1)}))}),e.closestChild(".widget__header-actions").append(o),a._el=o,n.data._el.buttons.push(o)},n.render_button_calendar=function(){var t={id:"button_calendar",icon:"icon_svg_calendar",mode:"view",click:function(t,a){}};n.data.calendar?0==n.data.buttons.filter(function(t){return"button_calendar"==t.id}).length&&(n.render_button(t,!0),(n.data.mode="view")&&t._el.button("show"),(n.data.mode="edit")&&t._el.button("hide")):(t=n.data.buttons.filter(function(t){return"button_calendar"==t.id})).length>0&&(t=t[0],n.data.buttons=n.data.buttons.filter(function(t){return"button_calendar"!=t.id}),t._el.remove())},n.get_buttons=function(){n.data.collapsed=e.hasClass("widget_collapsed"),n.data._el.button_collapse=e.closestChild(".button_collapse"),void 0!==n.data._el.button_collapse[0]&&void 0!==n.data._el.button_collapse.find(".button__text")[0]&&(n.data.name=n.data._el.button_collapse.find(".button__text").text())},n.render_calendar=function(a,e){if(0==n.data.buttons.filter(function(t){return"button_calendar"==t.id}).length){var i={id:"button_calendar",icon:"icon_svg_calendar",mode:"view",click:function(){}};n.render_button(i,!0);var o=t('<div class="popup"></div>');i._el.after(o),o.popup({source:i._el,position:"bottom right",width:"auto"}),i._el.datepicker({inline:!0,autoClose:!0,onRenderCell:function(t,e){if(t){var n=t.getDate(),i=a.filter(function(a){return Asyst.date.format(t)==a.date});if("day"==e)return i.length>0?{html:['<div class="datepicker__day">'+n,'<div class="datepicker__note">'+i.length,"</div>","</div>"].join("")}:{html:'<div class="datepicker__day">'+n+"</div>"}}},onSelect:function(t,a,n){o.popup("hide"),e(t,a,n)}}),i._el.data().datepicker.$datepicker.parent().appendTo(o)}},n.set_name=function(){n.data._el.button_collapse.closestChild(".button__text").text(n.data.name),n.data._el.button_collapse.attr("data-tooltip",n.data.name),n.data._el.button_collapse.data("tooltip",n.data.name),n.render_button_collapse()},n.set_color=function(){n.data.color===n.const.BORDER_COLOR_DARK_BLUE?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_dark_blue")):n.data.color===n.const.BORDER_COLOR_BLUE?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_blue")):n.data.color===n.const.BORDER_COLOR_LIGHT_BLUE?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_light_blue")):n.data.color===n.const.BORDER_COLOR_DEFAULT?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_default")):n.data.color===n.const.BORDER_COLOR_DARK_GREY?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_dark_grey")):n.data.color===n.const.BORDER_COLOR_PURPLE?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_purple")):n.data.color===n.const.BORDER_COLOR_RED?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_red")):n.data.color===n.const.BORDER_COLOR_GREEN?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_green")):n.data.color===n.const.BORDER_COLOR_NONE?(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.addClass("widget_color_none")):(e.attr("class",e.attr("class").replace(/\widget_color_.*?\b/g,"")),e.css({"border-color":n.data.color}))},n.set_color_border=function(){var t=e.closestChild(".widget__border");n.data.color===n.const.BORDER_COLOR_DARK_BLUE?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_dark_blue")):n.data.color===n.const.BORDER_COLOR_BLUE?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_blue")):n.data.color===n.const.BORDER_COLOR_LIGHT_BLUE?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_light_blue")):n.data.color===n.const.BORDER_COLOR_DEFAULT?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_default")):n.data.color===n.const.BORDER_COLOR_DARK_GREY?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_dark_grey")):n.data.color===n.const.BORDER_COLOR_PURPLE?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_purple")):n.data.color===n.const.BORDER_COLOR_RED?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_red")):n.data.color===n.const.BORDER_COLOR_GREEN?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_green")):n.data.color===n.const.BORDER_COLOR_NONE?(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.addClass("widget__border_color_none")):(t.attr("class",t.attr("class").replace(/\widget__border_color_.*?\b/g,"")),t.css({"border-color":n.data.color}))},n.set_loader=function(){if("object"==typeof n.data.lib)for(key in n.data.lib)n.data.lib[key]&&n.data.lib[key].library&&n.data.lib[key].library.filter(function(t){return t.value==n.data.pageid}).length>0&&(n.data.loader=n.data.lib[key].loader)},n.set_content=function(){var t=e.closestChild(".widget__body"),a=e.closestChild(".widget__body-data");n.set_loader(),n.data.loader&&"object"==typeof n.data.loader?(t.addClass("widget__body_align_center"),a.attr("class",a.attr("class").replace(/\widget__body-data_type_.*?\b/g,"")),a.html(n.const.CONTENT_LOADING),n.data.content=new n.data.loader.obj,n.data.loader.contents&&n.data.content.extend({contents:n.data.loader.contents}),n.data.content.extend({target:e,data:_.omitBy(n.data,function(t,a){return"_"==a.substring(0,1)}),success:function(e){t.removeClass("widget__body_align_center"),a.addClass("widget__body-data_type_html"),a.html(e),n.data.content=e},error:function(e){t.addClass("widget__body_align_center"),a.addClass("widget__body-data_type_text"),a.html(e),n.data.content=e}}),n.data.content.loadContent()):(t.addClass("widget__body_align_center"),a.addClass("widget__body-data_type_text"),a.html(n.const.CONTENT_NODATA))},n.set_width=function(){n.data.width&&e.css({width:n.data.width})},n.set_height=function(){n.data.height&&e.css({height:n.data.height})},n.collapse=function(){e.addClass("widget_collapsed"),n.data.collapsed=!0},n.expand=function(){e.removeClass("widget_collapsed"),n.data.collapsed=!1,n.data.resizeOnExpand&&(n.data.resizeOnExpand=!1,n.resize()),n.data.content==n.const.CONTENT_NODATA&&n.data.reloadable&&setTimeout(function(){n.set_content()},501)},n.toggle=function(){n.data.collapsed=!n.data.collapsed,n.data.collapsed?n.collapse():n.expand()},n.edit_mode=function(){n.data.collapsible&&n.data._el.button_collapse.button("disable"),n.data.mode="edit",e.removeClass("widget_mode_view"),e.addClass("widget_mode_edit")},n.view_mode=function(){n.data.collapsible&&n.data._el.button_collapse.button("enable"),n.data.mode="view",e.addClass("widget_mode_view"),e.removeClass("widget_mode_edit")},n.bind=function(){n.data._el.button_collapse.button().on("click.widget",n.toggle),n.data.collapsible||n.data._el.button_collapse.button("disable")},n.resize=function(t){t?n.data.onResize=t:n.get_collapsed(e)?n.data.resizeOnExpand=!0:("function"==typeof n.data.onResize&&setTimeout(function(){n.data.onResize()},501),e.closestChild(".widget-grid").widget_grid("resize"))},n.get_collapsed=function(t){var a=t.data().collapsed;if(!a){var e=t.parents(".widget");e.length>0&&(a=n.get_collapsed(e))}return a},n.init_components=function(){e.find('[data-fc="button"]').button(),e.find('[data-fc="checkbox"]').checkbox(),e.find("[data-tooltip]").tooltip()},n.init=function(){0==e.children().length?(n.render(),n.render_buttons()):n.get_buttons(),n.render_button_collapse(),n.init_components(),n.bind(),"view"==n.data.mode?n.view_mode():n.edit_mode(),n.set_width(),n.set_height()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},collapse:function(){return this.each(function(){this.obj.collapse()})},expand:function(){return this.each(function(){this.obj.expand()})},toggle:function(){return this.each(function(){this.obj.toggle()})},edit_mode:function(){return this.each(function(){this.obj.edit_mode()})},view_mode:function(){return this.each(function(){this.obj.view_mode()})},set_name:function(){return this.each(function(){this.obj.set_name()})},set_color:function(){return this.each(function(){this.obj.set_color()})},set_content:function(){return this.each(function(){this.obj.set_content()})},update:function(){return this.each(function(){this.obj.set_name(),this.obj.set_color(),this.obj.set_content()})},resize:function(t){return this.each(function(){this.obj.resize(t)})},render_button:function(t){return this.each(function(){this.obj.render_button(t,!0)})},render_calendar:function(t,a){return this.each(function(){this.obj.render_calendar(t,a)})}};t.fn.widget=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.widget"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="widget"]').widget()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"video",target:e});var n=this.obj={};n.defaults={},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._video=null,n.data._video__controls_timer=null,n.data._el={target:e,parent:e.parent(),video:t('<div class="video" id="'+(new Date).valueOf()+'"></div>'),video__container:t('<div class="video__container"></div>'),video__controls:t('<div class="video__controls"></div>'),video__controls_top:t('<div class="video__controls_top"></div>'),video__controls_bottom:t('<div class="video__controls_bottom"></div>'),video__controls_left:t('<div class="video__controls_left"></div>'),video__controls_middle:t('<div class="video__controls_middle"></div>'),video__controls_right:t('<div class="video__controls_right"></div>'),progress:t('<div class="video__progress" data-tooltip="0"></div>'),progress_value:t('<div class="video__progress_value"></div>'),alertbox:t('<label class="alertbox"><span class="alertbox__text">0:00&nbsp;/&nbsp;0:00</span></label>'),slider_volume:t('<div class="video__volume"></div>'),slider_volume_progress:t('<div class="video__progress" data-tooltip="100"></div>'),slider_volume_progress_value:t('<div class="video__progress_value"></div>'),loader:t('<span class="spinner spinner_align_center spinner_white"></span>')},n.data._buttons={play:t('<button class="button" type="button" data-fc="button"><span class="icon icon_svg_player_fill_white"></span></button>'),mute:t('<button class="button" type="button" data-fc="button" data-tooltip="Отключить звук"><span class="icon icon_svg_mute_white"></span></button>'),fullscreen:t('<button class="button" type="button" data-fc="button" data-tooltip="Во весь экран"><span class="icon icon_svg_fullscreen_white"></span></button>')},n.data._fullscreen={status:void 0,request:void 0,exit:void 0},n.data._volume=100,n.destroy=function(){e.removeData(),e.remove()},n.error=function(){n.data._el.target.attr("controls","true"),n.data.error="Browser doesn't support fullscreen mode"},n.render=function(){n.render_controls();var a=t.extend(!0,{},n.data);n.data._el.target.removeClass("video").remove(),n.data._el.parent.append(n.data._el.video.append(n.data._el.video__container.append(n.data._el.target),n.data._el.video__controls.append(n.data._el.video__controls_top,n.data._el.video__controls_bottom.append(n.data._el.video__controls_left,n.data._el.video__controls_middle,n.data._el.video__controls_right)))),n.data._el.target.data(a)},n.render_controls=function(){n.data._el.video__controls_top.append(n.data._el.progress.append(n.data._el.progress_value)),n.data._el.video__controls_left.append(n.data._buttons.play,n.data._el.alertbox),n.data._el.video__controls_middle.append(n.data._el.slider_volume.append(n.data._el.slider_volume_progress.append(n.data._el.slider_volume_progress_value)),n.data._buttons.mute),n.data._el.video__controls_right.append(n.data._buttons.fullscreen)},n.controls_hide=function(){n.data._video.paused||n.data._video.ended||n.data._el.video__controls.addClass("video__controls_hidden")},n.controls_show=function(){n.data._el.video__controls.removeClass("video__controls_hidden")},n.controls_timer=function(){clearTimeout(n.data._video__controls_timer),n.controls_show(),n.data._video__controls_timer=setTimeout(n.controls_hide,5e3)},n.loader_add=function(){n.data._el.parent.prepend(n.data._el.loader)},n.loader_remove=function(){n.data._el.loader.remove()},n.bind=function(){n.data._el.video.on("mouseout.video",n.controls_hide),n.data._el.video.on("mousemove.video",n.controls_timer),n.data._buttons.play.on("click.video",n.video_play_pause),n.data._buttons.play.button("disable"),n.data._buttons.mute.on("click.video",n.video_mute),n.data._buttons.fullscreen.on("click.video",n.video_fullscreen),n.data._video.addEventListener("timeupdate",n.video_update_progress_bar),n.data._el.progress.on("mousemove",n.video_progress_tooltip),n.data._el.progress.on("click drag",n.video_seek),n.data._el.slider_volume_progress.on("mousemove",n.video_volume_tooltip),n.data._el.slider_volume_progress.on("click drag",n.video_volume)},n.video_init=function(){n.data._el.target.attr("id")||n.data._el.target.attr("id",(new Date).valueOf()),n.data._video=document.getElementById(n.data._el.target.attr("id")),n.data._video.controls=!1,n.data._fullscreen.request=function(){var t=document.documentElement;return t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen}(),n.data._fullscreen.exit=function(){return document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen}(),n.data._fullscreen.status=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},n.video_loaded=function(){n.data._video.onloadedmetadata=n.video_set_metadata},n.video_canplay=function(){n.data._video.oncanplay=n.video_play_pause_enale},n.video_set_metadata=function(){n.video_set_progress_text(),n.loader_remove()},n.video_play_pause_enale=function(){n.data._buttons.play.button("enable")},n.video_play_pause=function(){n.loader_remove(),n.data._video.paused||n.data._video.ended?(n.data._video.play(),n.data._buttons.play.find(".icon").removeClass("icon_svg_player_fill_white").addClass("icon_svg_pause_white")):(n.data._video.pause(),n.data._buttons.play.find(".icon").removeClass("icon_svg_pause_white").addClass("icon_svg_player_fill_white"))},n.video_stop=function(){n.data._video.pause(),n.data._video.currentTime=0},n.video_louder=function(){n.data._video.volume+=1==n.data._video.volume?0:.1,n.data._video.volume=parseFloat(n.data._video.volume).toFixed(1)},n.video_quieter=function(){n.data._video.volume-=0==n.data._video.volume?0:.1,n.data._video.volume=parseFloat(n.data._video.volume).toFixed(1)},n.video_mute=function(){n.data._volume=n.data._video.volume,n.data._video.muted=!n.data._video.muted,n.data._video.muted?(n.video_set_volume(0),n.data._buttons.mute.find(".icon").removeClass("icon_svg_mute_white").addClass("icon_svg_unmute_white"),n.data._buttons.mute.tooltip("clear"),n.data._buttons.mute.tooltip(),n.data._buttons.mute.tooltip("update","Включить звук")):(n.video_set_volume(n.data._volume),n.data._buttons.mute.find(".icon").removeClass("icon_svg_unmute_white").addClass("icon_svg_mute_white"),n.data._buttons.mute.tooltip("clear"),n.data._buttons.mute.tooltip(),n.data._buttons.mute.tooltip("update","Отключить звук"))},n.video_fullscreen=function(){n.data._fullscreen.request?null==n.data._fullscreen.status()?n.data._fullscreen.request.call(document.getElementById(n.data._el.video.attr("id"))):n.data._fullscreen.exit.call(document):alert("browser doesn't allow fullscreen mode")},n.video_update_progress_bar=function(){var t=100/n.data._video.duration*n.data._video.currentTime;n.data._el.progress_value.width(t+"%"),n.video_set_progress_text()},n.video_progress_tooltip=function(t){var a=100/n.data._el.progress.width()*t.offsetX,e=n.data._video.duration/100*a;n.data._el.progress.tooltip(),n.data._el.progress.tooltip("update",n.video_seconds_to_time(e))},n.video_seek=function(t){if(!(t.offsetX<0||t.offsetX>n.data._el.progress.width())){var a=100/n.data._el.progress.width()*t.offsetX,e=n.data._video.duration/100*a;n.data._video.currentTime=e}},n.video_seconds_to_time=function(t){var a=Math.floor(t/3600),e=Math.floor((t-3600*a)/60),t=Math.floor(t-3600*a-60*e),n="";return 0!=a&&(n=a+":"),0==e&&""===n||(n+=(e=e<10&&""!==n?"0"+e:String(e))+":"),t=t<10?"0"+t:String(t),""===n?n="0:"+t:n+=t,n},n.video_set_progress_text=function(){n.data._el.alertbox.find(".alertbox__text").html(n.video_seconds_to_time(n.data._video.currentTime)+"&nbsp;/&nbsp;"+n.video_seconds_to_time(n.data._video.duration))},n.video_volume_tooltip=function(t){var a=Math.floor(100/n.data._el.slider_volume_progress.width()*t.offsetX);n.data._el.slider_volume_progress.tooltip(),n.data._el.slider_volume_progress.tooltip("update",a)},n.video_volume=function(t){t.offsetX<0||t.offsetX>n.data._el.slider_volume_progress.width()||(n.data._volume=t.offsetX/n.data._el.slider_volume_progress.width(),n.data._video.volume=n.data._volume,n.video_set_volume(n.data._volume),n.data._video.muted&&n.video_mute())},n.video_set_volume=function(t){n.data._el.slider_volume_progress_value.width(100*t+"%")},n.init_components=function(){for(var t in n.data._buttons)n.data._buttons[t].button()},n.init=function(){n.loader_add(),n.video_init(),n.video_loaded(),n.data._fullscreen.request?(n.render(),n.init_components(),n.bind(),n.video_canplay()):n.error()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.video=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.video"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="video"]').video()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"select",target:e});var n=this.obj={};n.const={REQUIRED:"Необходимо выбрать из списка"},n.defaults={name:e.attr("name"),disabled:!1,hidden:!1,width:"100%",height:"auto",mode:"radio",placeholder:"Выберите значение",popup_animation:!0,popup_width:"100%",text:"",count_selected:"Выбрано # из %",placeholder_selected:!1,minimum_count_selected:2,autoclose:!1,highlight:!1,validate:!1,search:!0},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._value=[],n.data._handlers=null,n.data._options=[],n.data._el={select:t('<div class="select__container"></div>'),button:t(['<button class="button" data-fc="button">','<span class="button__text">'+n.data.placeholder+"</span>",'<span class="icon icon_animate icon_svg_down"></span>',"</button>"].join("")),spinner:t(['<span class="icon">','<span class="spinner"></span>',"</span>"].join("")),input:t(['<span class="input input__has-clear">','<span class="input__box">','<span class="alertbox">','<span class="icon icon_svg_search"></span>',"</span>",'<input type="text" class="input__control">','<button class="button" type="button">','<span class="icon icon_svg_close"></span>',"</button>","</span>","</span>"].join("")),popup:t('<div class="popup" data-fc="popup"></div>'),popup__input:t('<div class="popup__input"></div>'),popup__scroll:t('<div class="popup__scroll"></div>'),popup__list:t('<ul class="popup__list"></ul>'),popup__list_items:[],popup__list_item_checkall:t(['<li class="popup__list-item">','<button class="popup__link">','<span class="popup__text popup__text_light">Выбрать все</span>',"</button>","</li>"].join(""))},n.destroy=function(){"select"==n.data._widget.type&&(n.data._el.button.button("destroy"),n.data._el.input.input("destroy"),n.data._el.popup.popup("destroy"),n.data._el.select.remove(),e.removeData(),e.remove())},n.disable=function(){n.data._el.button.button("disable"),n.data._el.input.input("disable"),n.data._el.popup.popup("hide"),n.data.disabled=!0},n.enable=function(){n.data._el.button.button("enable"),n.data._el.input.input("enable"),n.data.disabled=!1},n.hide=function(){n.data._el.select.addClass("select__container_hidden"),n.data._el.button.button("hide"),n.data._el.input.input("hide"),n.data._el.popup.popup("hide"),n.data.hidden=!0},n.show=function(){n.data._el.select.removeClass("select__container_hidden"),n.data._el.button.button("show"),n.data._el.input.input("show"),n.data.hidden=!1},n.render=function(){"check"==n.data.mode&&n.data._el.popup__list_item_checkall.data({text:"Выбрать все",selected:!1,disabled:!1,hidden:!1}),n.render_popup_list(),n.data._el.select.append(n.data._el.button,n.data._el.popup.append(n.data.search?n.data._el.popup__input.append(n.data._el.input):null,n.data._el.popup__scroll.append(n.data._el.popup__list))),n.data._el.select.data(n.data),n.data._el.select.data({_widget:"_select"}),e.css("display","none"),e.after(n.data._el.select)},n.render_popup_list=function(){e.find("option").each(function(){var a=t(this),e={};e.defaults={text:a.text(),value:a.attr("value"),selected:a[0].hasAttribute("selected"),disabled:!1,hidden:!1,icon:""},e.data=t.extend(!0,{},e.defaults,a.data()),e.popup__list_item=t(['<li class="popup__list-item',e.data.selected?" popup__list-item_checked":"",(e.data.disabled?" popup__list-item_disabled":"")+'">','<button class="popup__link">',""==e.data.icon?"":'<span class="icon '+e.data.icon+'"></span>','<span class="popup__text">'+e.data.text+"</span>","</button>","</li>"].join("")),n.data._options.push(a),n.data._el.popup__list_items.push(e.popup__list_item),e.data.selected&&(("radio"==n.data.mode||"radio-check"==n.data.mode)&&0==n.data._value.length||"check"==n.data.mode?n.check_item(e.popup__list_item,e.data):(e.data.selected=!1,n.uncheck_item(e.popup__list_item,e.data))),a.data(e.data),e.popup__list_item.data(e.data)}),n.data._el.popup__list.append("check"==n.data.mode?n.data._el.popup__list_item_checkall:null,n.data._el.popup__list_items)},n.update=function(a){n.data._el.button.find(".button__text").after(n.data._el.spinner),n.clear(!0),e.html(""),n.data._options=[],n.data._el.popup__list.html(""),n.data._el.popup__list_items=[],a.forEach(function(a,n,i){var o=t('<option value="'+a.value+'" '+(a.selected?"selected":"")+">"+a.text+"</option>");e.append(o)}),n.render_popup_list(),n.bind(),"check"==n.data.mode&&n.bind_checkall(),n.data._el.spinner.remove()},n.get_items=function(){var t=[];return n.data._options.map(function(a){t.push({value:a.attr("value"),text:a.text(),selected:!!a.attr("selected")})}),t},n.focus=function(){n.data._el.popup.popup("show")},n.clear=function(t){n.data._value=[],n.uncheck_all(),n.data.disabled||t||e.trigger("change")},n.focusin=function(){n.data._el.popup.popup("show")},n.focusout=function(){n.data._el.popup.popup("hide")},n.set_width=function(t){n.data._el.select.css("width",t)},n.set_value=function(t){n.data._value.indexOf(t)<0&&n.data._value.push(t)},n.del_value=function(t){n.data._value=n.data._value.filter(function(a){return a.value!=t.value&&a.text!=t.text})},n.set_button_text=function(){0==n.data._value.length?(n.data._el.button.find(".button__text").addClass("button__text_placeholder"),n.data._el.button.find(".button__text").text(n.data.placeholder)):n.data._value.length>n.data.minimum_count_selected?(n.data._el.button.find(".button__text").removeClass("button__text_placeholder"),n.data._el.button.find(".button__text").html((n.data.placeholder_selected?'<span class="button__text_placeholder">'+n.data.placeholder+"&nbsp;&nbsp;</span>":"")+n.data.count_selected.replace("#",n.data._value.length).replace("%",n.data._options.length))):(n.data._el.button.find(".button__text").removeClass("button__text_placeholder"),n.data._el.button.find(".button__text").html((n.data.placeholder_selected?'<span class="button__text_placeholder">'+n.data.placeholder+"&nbsp;&nbsp;</span>":"")+n.data._value.map(function(t){return t.text}).join(", ")))},n.get_value=function(){return 0==n.data._value.length?null:"radio"==n.data.mode||"radio-check"==n.data.mode?n.data._value[0].value:"check"==n.data.mode?n.data._value.map(function(t){return t.value}):void 0},n.check_item=function(t,a){if(a.selected=!0,t.addClass("popup__list-item_checked"),n.set_value({value:a.value,text:a.text}),n.data._options.forEach(function(t){t.data().value==a.value&&(t.attr("selected","selected"),t.data().selected=a.selected)}),n.set_button_text(),"check"==n.data.mode){var e=!0;n.data._options.forEach(function(t){t.data().selected||(e=!1)}),e?n.check_checkall():n.uncheck_checkall()}},n.uncheck_item=function(t,a){a.selected=!1,t.removeClass("popup__list-item_checked"),n.del_value({value:a.value,text:a.text}),n.data._options.forEach(function(t){t.data().value==a.value&&(t.removeAttr("selected"),t.data().selected=a.selected)}),n.set_button_text(),"check"==n.data.mode&&n.uncheck_checkall()},n.check_all=function(){n.data._value=[],n.data._el.popup__list_items.forEach(function(t){t.addClass("popup__list-item_checked"),t.data().selected=!0,n.set_value({value:t.data().value,text:t.data().text})}),n.data._options.forEach(function(t){t.attr("selected","selected"),t.data().selected=!0}),n.set_button_text(),"check"==n.data.mode&&n.check_checkall(),n.highlight(),n.validate()},n.uncheck_all=function(){n.data._el.popup__list_items.forEach(function(t){t.removeClass("popup__list-item_checked"),t.data().selected=!1,n.del_value({value:t.data().value,text:t.data().text})}),n.data._options.forEach(function(t){t.removeAttr("selected"),t.data().selected=!1}),n.set_button_text(),"check"==n.data.mode&&n.uncheck_checkall(),n.highlight(),n.validate()},n.check=function(t){var a=!1;n.data._el.popup__list_items.forEach(function(e){e.data().selected||e.data().value!=t&&"all"!=t||(a=!0,"radio"==n.data.mode&&n.uncheck_all(),"radio-check"==n.data.mode&&n.uncheck_all(),n.check_item(e,e.data()))}),a&&(n.data.disabled||e.trigger("change")),n.highlight(),n.validate()},n.uncheck=function(t){var a=!1;n.data._el.popup__list_items.forEach(function(e){e.data().value!=t&&"all"!=t||"radio"!=n.data.mode&&(a=!0,n.uncheck_item(e,e.data()))}),a&&(n.data.disabled||e.trigger("change")),n.highlight(),n.validate()},n.check_checkall=function(){var t=n.data._el.popup__list_item_checkall;n.data._el.popup__list_item_checkall.data().selected=!0,t.addClass("popup__list-item_checked")},n.uncheck_checkall=function(){var t=n.data._el.popup__list_item_checkall;n.data._el.popup__list_item_checkall.data().selected=!1,t.removeClass("popup__list-item_checked")},n.validate=function(){return n.data.validate=!0,n.data.required&&(n.get_value()?(n.data.validate=!0,n.data._el.select.removeClass("select__has-error"),0!=n.data._el.select.parent().find(".control__error").length&&n.data._el.select.parent().find(".control__error").remove()):(n.data.validate=!1,n.data._el.select.addClass("select__has-error"),0==n.data._el.select.parent().find(".control__error").length&&n.data._el.select.after(t('<div class="control__error">'+n.const.REQUIRED+"</div>")))),n.data.validate},n.highlight=function(){n.data.highlight&&(n.get_value()?n.data._el.select.addClass("select_checked"):n.data._el.select.removeClass("select_checked"))},n.bind=function(){n.data._el.popup__list_items.forEach(function(t){var a=t.data();a.disabled||t.on("click",function(){if("radio"==n.data.mode&&(n.uncheck_all(),a.selected=!0,n.check_item(t,a)),"radio-check"==n.data.mode){var i=a.selected;n.uncheck_all(),a.selected=!i,a.selected?n.check_item(t,a):n.uncheck_item(t,a)}"check"==n.data.mode&&(a.selected=!a.selected,a.selected?n.check_item(t,a):n.uncheck_item(t,a)),n.data.autoclose&&n.focusout(),n.data.highlight&&n.highlight(),n.data.disabled||e.trigger("change"),n.validate()})})},n.bind_input=function(){n.data._el.input.find(".input__control").on("keyup",function(){var t=n.data._el.input.input("value");n.data._el.popup__list_items.forEach(function(a){a.data().text.toLowerCase().includes(t.toLowerCase())?a.removeClass("popup__list-item_hidden"):a.addClass("popup__list-item_hidden")})})},n.bind_checkall=function(){var t=n.data._el.popup__list_item_checkall.data();t.disabled||n.data._el.popup__list_item_checkall.on("click",function(){t.selected=!t.selected,t.selected?n.check_all():n.uncheck_all(),n.data.highlight&&n.highlight(),n.data.disabled||e.trigger("change"),n.validate()})},n.init_components=function(){n.data._el.button.button({disabled:n.data.disabled,hidden:n.data.hidden,width:n.data.width}),n.data._el.input.input({width:"100%"}),n.data._el.popup.popup({source:n.data._el.button,height:n.data.height,animation:n.data.popup_animation,select:!0})},n.init=function(){n.render(),n.init_components(),n.bind(),n.bind_input(),"check"==n.data.mode&&n.bind_checkall(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width),n.set_button_text(),n.highlight()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},update:function(t){return this.each(function(){this.obj.update(t)})},focus:function(){return this.each(function(){this.obj.focus()})},check:function(t){return this.each(function(){this.obj.check(t)})},uncheck:function(t){return this.each(function(){this.obj.uncheck(t)})},check_all:function(){return this.each(function(){this.obj.check_all()})},uncheck_all:function(){return this.each(function(){this.obj.uncheck_all()})},clear:function(){return this.each(function(){this.obj.clear()})},validate:function(){if(1==this.length){var t=!0;return this.each(function(){t=this.obj.validate()}),t}var a=[];return this.each(function(){a.push(this.obj.validate())}),a},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.get_value()}),t}var a=[];return this.each(function(){a.push(this.obj.get_value())}),a},get_items:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.get_items()}),t}var a=[];return this.each(function(){a.push(this.obj.get_items())}),a}};t.fn.select=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.select"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="select"]').select()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"counter",target:e});var n=this.obj={};n.defaults={date:null,showyears:!1,counttime:!1,countdown:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.destroy=function(){e.removeData(),e.remove()},n.countdown=function(){n.data.countdown=e.countdown({date:n.data.date,showYears:n.data.showyears,render:function(a){var e=this;t(this.el).empty().append(n.data.showyears?[t('<span class="alertbox-group"></span>').append(n.split(a.years.toString(),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join(""))]:null,t('<span class="alertbox-group"></span>').append(n.split(a.days.toString(),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join("")),t('<span class="alertbox-group"></span>').append(n.split(e.leadingZeros(a.hours,2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join("")),t('<span class="alertbox-group"></span>').append(n.split(e.leadingZeros(a.min,2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join("")),t('<span class="alertbox-group"></span>').append(n.split(e.leadingZeros(a.sec,2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})))}})},n.counttime=function(){function a(t,a){return([1e15]+t).slice(-a)}function i(){t(e).empty().append(t('<span class="alertbox-group"></span>').append(n.split(a((new Date).getHours(),2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join("")),t('<span class="alertbox-group"></span>').append(n.split(a((new Date).getMinutes(),2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})),t(['<span class="alertbox alertbox_border_none">','<span class="alertbox__text">:</span>',"</span>"].join("")),t('<span class="alertbox-group"></span>').append(n.split(a((new Date).getSeconds(),2),1).map(function(a){return t(['<span class="alertbox">','<span class="alertbox__text">'+a+"</span>","</span>"].join(""))})))}i(),setInterval(function(){i()},1e3)},n.split=function(t,a){return t.match(new RegExp(".{1,"+a+"}","g"))},n.init_components=function(){},n.init=function(){n.data.counttime?n.counttime():n.countdown()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.counter=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.counter"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="counter"]').counter()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"gallery",target:e});var n=this.obj={};n.defaults={title:"Фотогалерея",items:[]},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={target:e,card:t('<div class="card" data-fc="card"></div>'),card__header:t('<div class="card__header"></div>'),card__header_row:t('<div class="card__header-row"></div>'),card__header_column:t(['<div class="card__header-column">','<label class="card__name">','<span class="card__name-text">'+n.data.title+"</span>","</label>","</div>"].join("")),card__header_column_search:t('<div class="card__header-column card__header-element_stretch"></div>'),input:t(['<span class="input input__has-clear card__header-element_stretch" data-fc="input">','<span class="input__box">','<span class="alertbox" data-fc="alertbox">','<span class="icon icon_svg_search"></span>',"</span>",'<input type="text" class="input__control">','<button class="button" type="button" data-fc="button" tabindex="-1">','<span class="icon icon_svg_close"></span>',"</button>","</span>","</span>"].join("")),button_toggle_left:t(['<button class="button" type="button" data-fc="button" data-toggle="left">','<span class="icon icon_svg_double_right"></span>',"</button>"].join("")),card__main:t('<div class="card__main"></div>'),card__left:t('<div class="card__left"></div>'),card__backdrop:t('<div class="card__backdrop"></div>'),card__middle:t('<div class="card__middle"></div>'),card__middle_scroll:t('<div class="card__middle-scroll"></div>'),card__middle_inner:t('<div class="card__middle-inner"></div>'),menu:t('<div class="menu menu_color_light" data-fc="menu"></div>'),tabs:[]},n.data.private={datatree:[],datalevel:-1,search:{text:null,timer:null}},n.destroy=function(){e.removeData(),e.remove()},n.nulls=function(){n.data.items.map(function(t){for(var a in t)t.hasOwnProperty(a)&&"null"==t[a]&&(t[a]="")})},n.prepare=function(){function t(a,e,n){var i=a.filter(function(t){return t.item.parentid==n});return e++,i.forEach(function(n){n.item.level=e,n.item.fileid||(n.child=t(a,e,n.item.id))}),e--,i}n.data.items.map(function(t){n.data.private.datatree.push({item:t})}),n.data.private.datatree=t(n.data.private.datatree,n.data.private.datalevel,null)},n.render=function(){n.data._el.target.append(n.data._el.card.append(n.data._el.card__header.append(n.data._el.card__header_row.append(n.data._el.card__header_column.prepend(n.data._el.button_toggle_left),n.data._el.card__header_column_search.append(n.data._el.input))),n.data._el.card__main.append(n.data._el.card__left.append(n.data._el.menu),n.data._el.card__middle.append(n.data._el.card__middle_scroll.append(n.data._el.card__middle_inner)),n.data._el.card__backdrop)))},n.render_data=function(){function a(i,o){var d=!1,s=10;return i.forEach(function(i){if(!i.item.fileid){d=!0,s=10;for(var l=0;l<i.item.level;l++)s+=20;var c=t(['<li class="menu__item" id='+i.item.id+">",'<a class="menu__item-link link" style="padding-left: '+s+'px">','<span class="menu__item-link-content">','<span class="menu__icon icon icon_animate icon_svg_right"></span>',i.item.icon&&"null"!=i.item.icon?'<span class="icon '+i.item.icon+'"></span>':"",'<span class="menu__item-text">'+i.item.name+"</span>","</span>","</a>","</li>"].join("")),r=t('<div class="menu menu__submenu-container"></div>'),_=t('<ul class="menu__list menu__submenu"></ul>');c.append(r.append(_)),i.child&&(a(i.child,_)||(i.item.icon="icon_svg_images",(c=t(['<li class="menu__item" id='+i.item.id+">",'<a class="menu__item-link link" style="padding-left: '+s+'px">','<span class="menu__item-link-content">',i.item.icon&&"null"!=i.item.icon?'<span class="icon '+i.item.icon+'"></span>':"",'<span class="menu__item-text">'+i.item.name+"</span>","</span>","</a>","</li>"].join(""))).on("click",function(t){console.log(i.item.id),i._loaded||e(i),n.data._el.card__middle.find(".tabs__pane").hide(),n.data._el.card__middle.find('.tabs__pane[data-id="'+i.item.id+'"]').show()}))),o.append(c)}}),d}function e(a){a._loaded=!0;var e=t('<div class="tabs__pane tabs__pane_active" data-id="'+a.item.id+'"></div>').hide();n.data._el.tabs.push(e),n.data._el.card__middle_inner.append(e),a.child.forEach(function(t){var a=t.item,n=a.url.replace("/asyst/api/file/get/",""),o=n.indexOf("/");n=n.substring(0,o),a.guid=n,i(a,e)})}function i(a,e){var n=t(['<div class="gallery__image-block" data-url="'+a.url+'">','<a class="gallery__image-link" href="'+a.url+'"','data-description="'+a.description+'"','data-lightbox="lightbox-'+a.parentid+'">','<div class="spinner spinner_align_center"></div>','<div class="gallery__image"></div>','<div class="gallery__error">','<div class="icon icon_svg_close"></div>','<div class="gallery__error-info">Ошибка</div>',"</div>",'<div class="gallery__filename"></div>',"</a></div>"].join("")).appendTo(e);n.find(".spinner").show(),n.find(".gallery__image").css("opacity",0),n.find(".gallery__image").css("background-image","url(/converter/converter?file="+a.guid+")");var i=new Image;i.src="/converter/converter?file="+a.guid,i.onload=function(){n.find(".spinner").hide(),n.find(".gallery__image").css("opacity",1)},i.onerror=function(){n.find(".spinner").hide(),n.find(".gallery__image").hide(),n.find(".gallery__error").css("display","flex"),n.find(".gallery__image-link").on("click",function(t){return t.preventDefault(),!1}).removeAttr("data-lightbox")}}var o=t('<ul class="menu__list"></ul>');a(n.data.private.datatree,o),n.data._el.menu.append(o),n.data._el.menu.menu()},n.filter=function(){!function(t,a){t.map(function(t){var n=[],i=!1;void 0!==t.item.ownerName&&n.push("ownerName"),void 0!==t.item.responsibleName&&n.push("responsibleName"),void 0!==t.item.name&&n.push("name"),n.map(function(e){t.item[e].toLowerCase().indexOf(a)>=0&&(i=!0)}),i?e.find(".menu__item#"+t.item.id).show():e.find(".menu__item#"+t.item.id).hide()})}(n.data.private.datatree,n.data.private.search.text.toLowerCase().trim())},n.bind=function(){n.data._el.input.on("keyup",function(){clearTimeout(n.data.private.search.timer),n.data.private.search.text=t(this).input("value"),n.data.private.search.timer=setTimeout(n.filter,300)})},n.init_components=function(){e.find('[data-fc="card"]').card(),e.find('[data-fc="button"]').button(),e.find("[data-tooltip]").tooltip(),e.find('[data-fc="input"]').input()},n.init=function(){n.nulls(),n.prepare(),n.render(),n.render_data(),n.init_components(),n.bind()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.gallery=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.gallery"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"visit",target:e});var n=this.obj={};n.defaults={title:"Паспорта регионов",items:[],headerRenderer:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data.private={subjects:[],sections:[],items:[]},n.data.current={subject:null,section:null,groupings:[],item:null},n.data._el={target:e,card:t('<div class="card" data-fc="card"></div>'),card__header:t('<div class="card__header"></div>'),card__header_row:t('<div class="card__header-row card__header-column_start"></div>'),card__header_column:t(['<div class="card__header-column">','<label class="card__name">','<span class="card__name-text">'+n.data.title+"</span>","</label>","</div>"].join("")),card__header_column_subjects:t('<div class="card__header-column" id="subjects"></div>'),button_toggle_left:t(['<button class="button" type="button" data-fc="button" data-toggle="left">','<span class="icon icon_svg_double_right"></span>',"</button>"].join("")),card__header_row_tabs:t(['<div class="card__header-row tabs">','<ul class="tabs__list"></ul>',"</div>"].join("")),card__main:t('<div class="card__main"></div>'),card__left:t('<div class="card__left"></div>'),card__middle:t('<div class="card__middle"></div>'),visit__frame_container:t('<div class="visit__frame-container"></div>'),menu:t('<div class="menu menu_color_light" data-fc="menu"></div>'),select:t('<select class="select" data-fc="select" data-mode="radio" data-width="300" data-autoclose="true"></select>'),tabs__list:t('<ul class="tabs__list"></ul>'),tabs:[],loader:t('<span class="spinner spinner_align_center"></span>')},n.destroy=function(){e.removeData(),e.remove()},n.nulls=function(){n.data.items.map(function(t){for(var a in t)t.hasOwnProperty(a)&&"null"==t[a]&&(t[a]="")})},n.render=function(){n.data._el.target.append(n.data._el.card.append(n.data._el.card__header.append(n.data._el.card__header_row.append(n.data._el.card__header_column.prepend(n.data._el.button_toggle_left),n.data._el.card__header_column_subjects)),n.data._el.card__main.append(n.data._el.card__left.append(n.data._el.menu),n.data._el.card__middle.append(n.data._el.visit__frame_container))))},n.render_select=function(){n.loader_add();var a={};n.data.private.subjects=[],n.data.items.map(function(t){t.subjectnameid in a?a[t.subjectnameid]++:(a[t.subjectnameid]=1,n.data.private.subjects.push({subjectname:t.subjectname,subjectnameid:t.subjectnameid}))}),n.data.current.subject=n.data.private.subjects[0],n.data.private.subjects.map(function(t){n.data._el.select.append('<option value="'+t.subjectnameid+'">'+t.subjectname+"</option>")}),n.data._el.card__header_column_subjects.append(n.data._el.select),n.data._el.select.select(),n.data._el.select.on("change",function(){var a=t(this).select("value");n.data.current.subject=n.data.private.subjects.filter(function(t){return t.subjectnameid==a})[0],n.data.current.subjectnameid=a,n.render_tabs()}),void 0!==n.data.current.subject&&void 0!==n.data.current.subject.subjectnameid&&n.data._el.select.select("check",n.data.current.subject.subjectnameid),n.loader_remove()},n.render_tabs=function(){n.data.current.item=null,n.render_item(),n.data._el.card__header_row_tabs.remove(),n.data._el.card__header_row_tabs.find(".tabs__list").empty();var a={};n.data.private.sections=[],n.data.items.map(function(t){t.sectionnameid in a?a[t.sectionnameid]++:(a[t.sectionnameid]=1,n.data.private.sections.push({sectionname:t.sectionname,sectionnameid:t.sectionnameid}))}),n.data.current.section=n.data.private.sections[0],n.data.private.sections.map(function(a,e){var i=t(['<li class="tabs__tab'+(0==e?" tabs__tab_active":"")+'" data-id="'+a.sectionnameid+'">','<a class="tabs__link link" href="#section_'+a.sectionnameid+'" data-fc="tab">','<button class="button" data-fc="button" style="width: auto;">','<span class="button__text">'+a.sectionname+"</span>","</button>","</a>","</li>"].join(""));i.on("click",function(){var a=t(this).attr("data-id");n.data.current.section=n.data.private.sections.filter(function(t){return t.sectionnameid==a})[0],n.data.current.sectionnameid=a,n.render_menu()}),n.data._el.card__header_row_tabs.find(".tabs__list").append(i)}),n.data._el.card__header.append(n.data._el.card__header_row_tabs),n.data._el.card__header_row_tabs.find('[data-fc="tab"]').tabs(),n.data._el.card__header_row_tabs.find('.tabs__tab[data-id="'+n.data.current.section.sectionnameid+'"]').trigger("click")},n.render_menu=function(){n.loader_add(),n.data.current.item=null,n.render_item(),n.data._el.menu.menu(),n.data._el.menu.menu("destroy"),n.data._el.menu.empty(),n.data.private.items=n.data.items.filter(function(t){return t.subjectnameid==n.data.current.subject.subjectnameid&&t.sectionnameid==n.data.current.section.sectionnameid});var a={};n.data.current.groupings=[],n.data.private.items.map(function(t){t.groupingnameid in a?a[t.groupingnameid]++:(a[t.groupingnameid]=1,n.data.current.groupings.push({groupingname:t.groupingname,groupingnameid:t.groupingnameid}))});var e=t('<ul class="menu__list"></ul>');n.data.current.groupings.map(function(a){var i=t(['<li class="menu__item" id='+a.groupingnameid+">",'<a class="menu__item-link link">','<span class="menu__item-link-content">','<span class="menu__icon icon icon_animate icon_svg_right"></span>','<span class="menu__item-text">'+a.groupingname+"</span>","</span>","</a>",'<div class="menu menu__submenu-container">','<ul class="menu__list menu__submenu"></ul>',"</div>","</li>"].join(""));n.data.private.items.map(function(e){if(e.groupingnameid==a.groupingnameid){1==e.sectionnameid?e.icon="icon_svg_document":e.icon="icon_svg_chart";var o=t(['<li class="menu__item" id='+e.nameid+">",'<a class="menu__item-link link">','<span class="menu__item-link-content">',e.icon&&"null"!=e.icon?'<span class="icon '+e.icon+'"></span>':"",'<span class="menu__item-text">'+e.name+"</span>","</span>","</a>","</li>"].join(""));i.find(".menu__list").append(o),o.find(".menu__item-link").on("click",function(){n.data.current.item=e,n.render_item()})}}),e.append(i)}),n.data._el.menu.append(e),n.data._el.menu.menu(),n.loader_remove()},n.render_item=function(){n.data.onItemClick&&"function"==typeof n.data.onItemClick&&n.data.onItemClick(n.data.current.item,n.data.current.sectionnameid,n.data._el.visit__frame_container)},n.loader_add=function(t){t?t.before(n.data._el.loader):n.data._el.target.before(n.data._el.loader)},n.loader_remove=function(){n.data._el.loader.remove()},n.init_components=function(){e.find('[data-fc="card"]').card(),e.find('[data-fc="button"]').button(),e.find('[data-fc="select"]').select(),e.find("[data-tooltip]").tooltip()},n.init=function(){n.nulls(),n.render(),n.render_select(),n.init_components()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.visit=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.visit"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var e=t(this),n=e.data("_widget");if(!n){e.data("_widget",{type:"calendar",target:e});var i=this.obj={};i.defaults={items:[],columns:[],buttons:[],events:{render:!1,TitleColumn:"date",TooltipColumn:"date",maxItems:3},renderEvents:!1,eventTitleColumn:"date",eventTooltipColumn:"date",onSelect:null,onSelectAllowed:!0,useItemsLength:!0,initDate:null,horizontal:!1},i.data=e.data(),i.options=t.extend(!0,{},i.defaults,i.data,a),e.data(i.options),i.data._today=new Date,i.data._datepicker=null,i.data._selectedItems=[],i.data._showModal=!1,i.data._el={target:e.addClass("calendar"),calendar__container:t('<div class="calendar__container"></div>'),card:t('<div class="card"></div>'),card__header:t(['<div class="card__header">','<div class="card__header-row">','<div class="card__header-column" id="name"></div>','<div class="card__header-column" id="actions"></div>',"</div>","</div>"].join("")),button_today:t(['<button class="button" type="button" data-fc="button">','<span class="button__text">Сегодня</span>',"</button>"].join("")),card__name:t(['<label class="card__name">','<span class="card__name-text card__name-text">'+i.data._today.getDate()+"</span>","</label>"].join("")),card__count:t(['<label class="card__name">','<span class="card__name-text">Событий: 3</span>',"</label>"].join("")),card__main:t('<div class="card__main"></div>'),calendar__row_first:t('<div class="calendar__row"></div>'),calendar__row_second:t('<div class="calendar__row"></div>'),calendar__datepicker:t('<div class="calendar__datepicker"></div>'),calendar__table:t('<div class="calendar__table"></div>'),buttons:[]},i.destroy=function(){e.removeData(),e.remove()},i.prepare_data=function(){i.data.items.map(function(t){for(var a in t)t.hasOwnProperty(a)&&"null"==t[a]&&(t[a]="")})},i.render=function(){i.data.horizontal?(i.data._el.calendar__container.addClass("calendar__container_horizontal"),i.data._el.calendar__row_first.addClass("calendar__row_left"),i.data._el.calendar__row_second.addClass("calendar__row_right")):(i.data._el.card__main.addClass("card__main_flex-direction_column"),i.data._el.calendar__row_first.addClass("calendar__row_top"),i.data._el.calendar__row_second.addClass("calendar__row_bottom")),i.data._el.card__header.find("#name").append(i.data._el.card__name),i.data._el.card__header.find("#actions").append(i.data._el.button_today),i.data._el.target.append(i.data._el.calendar__container.append(i.data._el.card.append(i.data._el.card__header,i.data._el.card__main.append(i.data._el.calendar__row_first.append(i.data._el.calendar__datepicker),i.data.columns.length>0?i.data._el.calendar__row_second.append(i.data._el.calendar__table):null))))},i.render_buttons=function(){i.data.buttons&&i.data.buttons.length>0&&i.data.buttons.forEach(function(a){var e=t(['<button class="button" type="button" data-fc="button"'+(a.id?' id="'+a.id+'"':""),a.name?' data-tooltip="'+a.name+'"':"",">",'<span class="icon '+a.icon+'"></span>',a.name?'<span class="button__text">'+a.name+"</span>":"","</button>"].join(""));"function"==typeof a.onclick&&e.on("click",a.onclick),i.data._el.card__header.find("#actions").append(e),i.data._el.buttons.push(e)})},i.render_datepicker=function(){i.data._el.calendar__datepicker.datepicker({onRenderCell:function(t,a){if(e.find("[data-tooltip]").tooltip(),e.find("[data-tooltip]").tooltip("hide"),t){var n=t.getDate(),o=i.data.items.filter(function(t){return t.date&&"object"==typeof t.date}).filter(function(a){return a.date.getDate()==t.getDate()&&a.date.getMonth()==t.getMonth()&&a.date.getFullYear()==t.getFullYear()});if("day"==a)return i.data.events.render?{html:['<div class="datepicker__day-container">','<div class="datepicker__day-border">','<div class="datepicker__day">'+n+"</div>",o.map(function(t,a){return a<i.data.events.maxItems?['<div class="datepicker__event">','<a class="datepicker__event-link link" href="'+t.url+'" target="_blank" onclick="event.cancelBubble = true; if(event.stopPropagation){ event.stopPropagation(); }" data-tooltip="'+t[i.data.events.TooltipColumn]+'">','<div class="datepicker__indicator"><img src="/asyst/gantt/img/svg/'+t.indicator+'.svg"></div>','<div class="datepicker__event-text" ',t.background?'style="background-color: '+t.background+"; color: "+t.color+'; border: none;"':"",">"+t[i.data.events.TitleColumn]+"</div>","</a>","</div>"].join(""):""}).join(""),'<div class="datepicker__more">',o.length-i.data.events.maxItems>0?"еще "+(o.length-i.data.events.maxItems):"","</div>","</div>","</div>"].join("")}:o.length>0?i.data.useItemsLength?{html:['<div class="datepicker__day">'+n,'<div class="datepicker__note">'+o.length,"</div>","</div>"].join("")}:{html:['<a class="datepicker__day"',o[0].url?'href="'+o[0].url+'"'+(o[0].target?'target="'+o[0].target+'"':""):"",">"+n,'<div class="datepicker__note"',(o[0].background?' style="background-color:'+o[0].background+'"':"")+">"+o[0].count,"</div>","</a>"].join("")}:{html:'<div class="datepicker__day">'+n+"</div>"}}},onSelect:function(t,a){e.find("[data-tooltip]").tooltip(),e.find("[data-tooltip]").tooltip("hide"),a&&(i.data._selectedItems=i.data.items.filter(function(t){return t.date&&"object"==typeof t.date}).filter(function(t){return t.date.getDate()==a.getDate()&&t.date.getMonth()==a.getMonth()&&t.date.getFullYear()==a.getFullYear()}),i.data.date=a,i.data.formattedDate=t,i.data.displayDate=t,"undefined"!=typeof Asyst&&Asyst.date&&"function"==typeof Asyst.date.convertToGenitive&&(i.data.displayDate=Asyst.date.convertToGenitive(Asyst.date.format(a,"dd MMMM yyyy").toLowerCase())),i.data._el.card__name.find(".card__name-text").text(i.data.displayDate),i.data.events.render?i.data._selectedItems.length>0&&i.data._showModal&&i.render_modal():(i.data._el.calendar__table.empty().append(i.render_table()),i.data._el.calendar__table.find("[data-tooltip]").tooltip()),"function"==typeof i.data.onSelect&&i.data.onSelectAllowed&&i.data.onSelect(t,a))}}),i.data.events.render&&(i.data._el.calendar__row_second.remove(),i.data._el.calendar__datepicker.find(".datepicker--cells-days").addClass("datepicker__cells-days-border")),i.data._datepicker=i.data._el.calendar__datepicker.data().datepicker,i.data.initDate&&i.data._datepicker.selectDate(i.data.initDate),i.data._showModal=!0},i.render_table=function(){var a=t('<table class="table"></table>'),e=t("<thead></thead>"),n=t("<tbody></tbody>"),o=t("<tr></tr>"),d=t("<td></td>");return a.append(e.append(o.clone().append(i.data.columns.map(function(t){return d.clone().html(t.title)}))),n.append(i.data._selectedItems.map(function(t){return o.clone().append(i.data.columns.map(function(a){return d.clone().html(t[a.fieldname])}))}))),a},i.render_modal=function(){var a={buttons:[{name:"destroy",action:"destroy",icon:"icon_svg_close"}],header:{caption:"События",name:i.data.formattedDate},content:{tabs:[]}};!function(a,e,n){e.push({id:"general",name:"",active:n,content:t('<div class="card__table"></div>').append(i.render_table())})}(0,a.content.tabs,!0),t('<span class="modal__"></span>').appendTo("body").modal__(a)},i.update_datepicker=function(t){i.data.items=t,i.prepare_data(),i.data._datepicker.destroy(),i.render_datepicker()},i.bind=function(){i.data._el.button_today.on("click",function(){i.data._datepicker.selectDate(new Date(i.data._today.getFullYear(),i.data._today.getMonth(),i.data._today.getDate()))})},i.select_date=function(t){i.data._datepicker.selectDate(t)},i.set_date=function(t){i.data.onSelectAllowed=!1,i.data._datepicker.selectDate(t),i.data.onSelectAllowed=!0},i.init_components=function(){e.find('[data-fc="button"]').button()},i.init=function(){i.prepare_data(),i.render(),i.render_buttons(),i.render_datepicker(),i.init_components(),i.bind()},i.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},select_date:function(t){return this.each(function(){this.obj.select_date(t)})},set_date:function(t){return this.each(function(){this.obj.set_date(t)})},update:function(t){return this.each(function(){this.obj.update_datepicker(t)})}};t.fn.calendar=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.calendar"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="calendar"]').calendar()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"carousel",target:e});var n=this.obj={};n.defaults={autoPlay:!0,autoPlayDelay:2500,animationSpeed:500,allowPlayOnHover:!1,circleEnable:!0,circlePosition:"bottom",items:[],type:"text",theme:null,onItemClick:null,onItemRender:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={carousel__container:null,carousel__items:null,button_prev:null,button_next:null,carousel__circles:null,carousel__item_list:[],button_circle_list:[],widget__content_nodata:t(['<div class="widget__content widget__content_align_center">','<div class="widget__text">Нет данных</div>',"</div>"].join(""))},n.data._private={sliderTimer:null,allowManipulations:!0,i:0,j:0,n:0},n.destroy=function(){e.removeData(),e.remove()},n.set_width=function(t){e.css({width:t})},n.set_height=function(t){e.css({height:t})},n.render_carousel=function(){n.data.theme&&e.addClass("carousel_"+n.data.theme),n.data._el.carousel__container=t('<div class="carousel__container"></div>'),n.data._el.carousel__items=t('<div class="carousel__items"></div>'),"image"==n.data.type&&n.data._el.carousel__items.addClass("carousel__items_image"),"custom"==n.data.type&&n.data._el.carousel__items.addClass("carousel__items_custom"),n.data.items&&n.data.items.length>1&&n.data._el.carousel__items.addClass("carousel__items_several"),n.data._el.button_prev=t(['<button class="button button_prev" type="button" data-fc="button">','<span class="icon icon_svg_left',"grey"==n.data.theme||"black"==n.data.theme?"_white":"",'"></span>',"</button>"].join("")),n.data._el.button_next=t(['<button class="button button_next" type="button" data-fc="button">','<span class="icon icon_svg_right',"grey"==n.data.theme||"black"==n.data.theme?"_white":"",'"></span>',"</button>"].join("")),n.data._el.carousel__circles=t('<div class="carousel__circles"></div>'),n.data.items.forEach(function(a){var e;"text"==n.data.type&&(e=t(['<div class="carousel__item">',a.url?'<a href="'+a.url+'" class="carousel__item-text link">'+a.name+"</a>":'<span class="carousel__item-text link">'+a.name+"</span>","</div>"].join(""))),"image"==n.data.type&&(e=t(['<div class="carousel__item">',a.url?'<a href="'+a.url+'" class="carousel__item-image link" style="background-image: url(\''+a.image+"')\"></a>":'<span class="carousel__item-image link" style="background-image: url(\''+a.image+"')\"></span>",'<span class="carousel__item-image-text" data-tooltip="'+a.name+'">'+a.name+"</span>","</div>"].join(""))),"custom"==n.data.type&&(e=t('<div class="carousel__item"></div>'),"function"==typeof n.data.onItemRender&&e.append(n.data.onItemRender(a))),"function"==typeof n.data.onItemClick&&e.on("click",function(){n.data.onItemClick(a)}),n.data._el.carousel__items.append(e),n.data._el.carousel__item_list.push(e);var i=t(['<button class="button button_circle" type="button" data-fc="button">','<span class="icon">','<span class="icon icon__circle"></span>',"</span>","</button>"].join("")).button();n.data._el.carousel__circles.append(i),n.data._el.button_circle_list.push(i)}),e.append(n.data._el.carousel__container.append(n.data._el.carousel__items)),n.data.items.length>1&&(n.data._el.carousel__container.prepend(n.data._el.button_prev),n.data._el.carousel__container.append(n.data._el.button_next),e.append(n.data._el.carousel__circles))},n.render_nodata=function(){0==n.data.items.length&&(e.parent().append(n.data._el.widget__content_nodata),e.remove(),(e=n.data._el.widget__content_nodata).data(n.data))},n.render_dotdotdot=function(){n.data._el.carousel__item_list.map(function(t){t.dotdotdot()}),t(window).resize(function(){setTimeout(function(){n.data._el.carousel__item_list.map(function(t){t.trigger("update")})},100)})},n.activate=function(){function a(){n.data._el.button_circle_list.forEach(function(a,e){var i=t(a).find(".icon__circle");i.attr("class",i.attr("class").replace(/\icon__circle_.*?\b/g,"")),i.addClass("icon__circle_grey"),0==e&&i.addClass("icon__circle_blue"),t(a).bind({click:function(){n.data._private.allowManipulations&&n.data._private.j!=e&&(n.data.allowPlayOnHover?(clearInterval(n.data._private.sliderTimer),n.data._private.i=n.data._private.j,n.data._private.j=e,l(n.data._private.i,n.data._private.j,function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)})):(n.data._private.i=n.data._private.j,n.data._private.j=e,l(n.data._private.i,n.data._private.j)))}})})}function i(){n.data._el.button_prev.bind({click:function(){n.data._private.allowManipulations&&(s(),n.data.allowPlayOnHover?(clearInterval(n.data._private.sliderTimer),l(n.data._private.i,n.data._private.j,function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)})):l(n.data._private.i,n.data._private.j))}}),n.data._el.button_next.bind({click:function(){n.data._private.allowManipulations&&(d(),n.data.allowPlayOnHover?(clearInterval(n.data._private.sliderTimer),l(n.data._private.i,n.data._private.j,function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)})):l(n.data._private.i,n.data._private.j))}})}function o(){d(),l(n.data._private.i,n.data._private.j)}function d(){var t=n.data._private.j;n.data._private.i=t,++t==n.data._private.n&&(t=0),n.data._private.j=t}function s(){var t=n.data._private.j;n.data._private.i=t,--t<0&&(t=n.data._private.n-1),n.data._private.j=t}function l(a,e,i){n.data._private.allowManipulations=!1;var o=t(n.data._el.button_circle_list[a]).find(".icon__circle"),d=t(n.data._el.button_circle_list[e]).find(".icon__circle");a<e?(t(n.data._el.carousel__item_list[a]).animate({left:"-100%"},n.data.animationSpeed,function(){t(this).css("display","none").css("left","0"),n.data.circleEnable&&(o.attr("class",o.attr("class").replace(/\icon__circle_.*?\b/g,"")),o.addClass("icon__circle_grey"))}),t(n.data._el.carousel__item_list[e]).removeAttr("style").css("left","100%").animate({left:"0"},n.data.animationSpeed,function(){n.data.circleEnable&&(d.attr("class",d.attr("class").replace(/\icon__circle_.*?\b/g,"")),d.addClass("icon__circle_blue")),i&&i(),n.data._private.allowManipulations=!0})):(t(n.data._el.carousel__item_list[a]).animate({left:"100%"},n.data.animationSpeed,function(){t(this).css("display","none").css("left","0"),n.data.circleEnable&&(o.attr("class",o.attr("class").replace(/\icon__circle_.*?\b/g,"")),o.addClass("icon__circle_grey"))}),t(n.data._el.carousel__item_list[e]).removeAttr("style").css("left","-100%").animate({left:"0"},n.data.animationSpeed,function(){n.data.circleEnable&&(d.attr("class",d.attr("class").replace(/\icon__circle_.*?\b/g,"")),d.addClass("icon__circle_blue")),i&&i(),n.data._private.allowManipulations=!0}))}n.data._private.i=n.data._el.carousel__item_list.length,n.data._private.j=0,n.data._private.n=n.data._el.carousel__item_list.length,function(){n.data._private.n>1&&(n.data._el.carousel__item_list.forEach(function(a,e){t(a).css("display","none")}),t(n.data._el.carousel__item_list[0]).removeAttr("style"),n.data.circleEnable&&(a(),i()),n.data.autoPlay&&(n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay),n.data.allowPlayOnHover||e.hover(function(){clearInterval(n.data._private.sliderTimer)},function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)})))}(),function(){n.data._el.carousel__item_list.forEach(function(a){t(a).touchwipe({wipeLeft:function(){n.data._private.allowManipulations&&n.data._private.i<n.data._private.n-1&&(clearInterval(n.data._private.sliderTimer),l(n.data._private.i,n.data._private.i+1,function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)}))},wipeRight:function(){n.data._private.allowManipulations&&n.data._private.i>0&&(clearInterval(n.data._private.sliderTimer),l(n.data._private.i,n.data._private.i-1,function(){n.data._private.sliderTimer=setInterval(o,n.data.autoPlayDelay)}))},preventDefaultEvents:!1})})}()},n.init_carousel=function(){n.data._el.carousel__container=e.find(".carousel__container"),n.data._el.carousel__items=e.find(".carousel__items"),n.data._el.button_prev=e.find(".button_prev"),n.data._el.button_next=e.find(".button_next"),n.data._el.carousel__circles=e.find(".carousel__circles"),e.find(".carousel__item").each(function(a,e){var i={text:t(this).find(".carousel__item-text").text(),url:t(this).find(".carousel__item-text").attr("href")};n.data.items.push(i),n.data._el.carousel__item_list.push(t(e))}),e.find(".button_circle").each(function(a,e){n.data._el.button_circle_list.push(t(e))}),n.data._el.carousel__item_list.length!=n.data._el.button_circle_list.length&&(n.data._el.carousel__item_list.forEach(function(a,e){if(void 0===n.data._el.button_circle_list[e]){var i=t(['<button class="button button_circle" type="button" data-fc="button">','<span class="icon">','<span class="icon icon__circle"></span>',"</span>","</button>"].join("")).button();n.data._el.carousel__circles.append(i),n.data._el.button_circle_list.push(i)}}),n.data._el.button_circle_list.forEach(function(a,e){void 0===n.data._el.carousel__item_list[e]&&t(a).remove()}))},n.init_components=function(){e.find('[data-fc="button"]').button(),e.find("[data-tooltip]").tooltip()},n.init=function(){n.set_width(n.data.width),n.set_height(n.data.height),0==e.children().length?n.render_carousel():n.init_carousel(),n.render_nodata(),"text"==n.data.type&&n.render_dotdotdot(),n.init_components(),n.activate()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.carousel=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.carousel"):a.init.apply(this,arguments)}}(jQuery),function(t){t.fn.touchwipe=function(a){var e={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return a&&t.extend(e,a),this.each(function(){function t(){this.removeEventListener("touchmove",a),i=null,d=!1}function a(a){if(e.preventDefaultEvents&&a.preventDefault(),d){var n=a.touches[0].pageX,s=a.touches[0].pageY,l=i-n,c=o-s;Math.abs(l)>=e.min_move_x?(t(),l>0?e.wipeLeft():e.wipeRight()):Math.abs(c)>=e.min_move_y&&(t(),c>0?e.wipeDown():e.wipeUp())}}function n(t){1==t.touches.length&&(i=t.touches[0].pageX,o=t.touches[0].pageY,d=!0,this.addEventListener("touchmove",a,!1))}var i,o,d=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",n,!1)}),this}}(jQuery),$(function(){$('[data-fc="carousel"]').carousel()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"checkbox",target:e});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={input:e.find(".checkbox__input"),label:e.find(".checkbox__label"),button:e.find("button")},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),e.removeData(),e.remove()},n.disable=function(){if(e.addClass("checkbox_disabled"),e.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(e.removeClass("checkbox_disabled"),e.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.addClass("checkbox_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("checkbox_hidden"),n.data.hidden=!1},n.check=function(){e.addClass("checkbox_checked"),e.attr("data-checked","true"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,void 0!==n.data._el.button[0]&&n.data._el.button.button("check")},n.uncheck=function(){e.removeClass("checkbox_checked"),e.removeAttr("data-checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,void 0!==n.data._el.button[0]&&n.data._el.button.button("uncheck")},n.hover=function(){e.addClass("checkbox_hovered")},n.unhover=function(){e.removeClass("checkbox_hovered")},n.click=function(){e.addClass("checkbox_clicked"),t("body").one("mouseup.checkbox touchend.checkbox",n.unclick)},n.unclick=function(){e.removeClass("checkbox_clicked")},n.bind=function(){e.on("mouseover.checkbox",n.hover),e.on("mouseout.checkbox",n.unhover),e.on("mousedown.checkbox touchstart.checkbox",n.click),void 0!==n.data._el.label[0]&&(n.data._widget.type="checkbox.label",e.bindFirst("click.checkbox",".checkbox__label",null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()})),void 0!==n.data._el.button[0]&&(n.data._widget.type="checkbox.button",e.bindFirst("click.checkbox","button",null,function(t){t.preventDefault(),n.data.checked?n.uncheck():n.check()}))},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var a=[];return this.each(function(){a.push(this.obj.data.checked)}),a},value:function(){return this.checkbox("checked")}};t.fn.checkbox=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.checkbox"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="checkbox"]').checkbox()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"radio",target:e});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,value:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={input:e.find(".radio__input"),label:e.find(".radio__label"),button:e.find("button")},n.data._triggers={check:"check.fc.radio",uncheck:"uncheck.fc.radio"},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),e.removeData(),e.remove()},n.disable=function(){if(e.addClass("radio_disabled"),e.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(e.removeClass("radio_disabled"),e.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+(t.namespace?"."+t.namespace:""),t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.addClass("radio_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("radio_hidden"),n.data.hidden=!1},n.check=function(){e.addClass("radio_checked"),e.attr("data-checked","true"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,void 0!==n.data._el.button[0]&&n.data._el.button.button("check"),e.trigger(n.data._triggers.check)},n.uncheck=function(){e.removeClass("radio_checked"),e.removeAttr("data-checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,void 0!==n.data._el.button[0]&&n.data._el.button.button("uncheck"),e.trigger(n.data._triggers.uncheck)},n.hover=function(){e.addClass("radio_hovered")},n.unhover=function(){e.removeClass("radio_hovered")},n.click=function(){e.addClass("radio_clicked"),t("body").one("mouseup.radio touchend.radio",n.unclick)},n.unclick=function(){e.removeClass("radio_clicked")},n.bind=function(){e.on("mouseover.radio",n.hover),e.on("mouseout.radio",n.unhover),e.on("mousedown.radio touchstart.radio",n.click),void 0!==n.data._el.label[0]&&(n.data._widget.type="radio.label",e.bindFirst("click.radio",".radio__label",null,function(t){t.preventDefault(),n.data.checked||n.check()})),void 0!==n.data._el.button[0]&&(n.data._widget.type="radio.button",e.bindFirst("click.radio","button",null,function(t){t.preventDefault(),n.data.checked||n.check()}))},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.data.value=n.data._el.input.attr("value"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var a=[];return this.each(function(){a.push(this.obj.data.checked)}),a},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.value}),t}var a=[];return this.each(function(){a.push(this.obj.data.value)}),a}};t.fn.radio=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.radio"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio"]').radio()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"radio_group",target:e});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,value:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={radio_list:e.find(".radio")},n.destroy=function(){n.data._el.radio_list.each(function(){t(this).radio("destroy")}),e.removeData(),e.remove()},n.disable=function(){n.data._el.radio_list.each(function(){t(this).radio("disable")}),n.data.disabled=!0},n.enable=function(){n.data._el.radio_list.each(function(){t(this).radio("enable")}),n.data.disabled=!1},n.hide=function(){n.data._el.radio_list.each(function(){t(this).radio("hide")}),n.data.hidden=!0},n.show=function(){n.data._el.radio_list.each(function(){t(this).radio("show")}),n.data.hidden=!1},n.check=function(a){n.data._el.radio_list.each(function(){var e=t(this);e.radio("uncheck"),e.radio("value")==a&&(e.radio("check"),n.data.checked=!0,n.data.value=a)})},n.init_components=function(){e.find("[data-tooltip]").tooltip()},n.init=function(){n.data.disabled=!0,n.data._el.radio_list.each(function(){var a={};a.self=t(this),a.data=a.self.data(),a.self.radio(),a.data.checked&&n.data.checked&&a.self.radio("uncheck"),a.data.checked&&(n.data.checked=!0,n.data.value=a.self.radio("value")),a.data.disabled||(n.data.disabled=!1),a.self.on("click.radio_group",null,null,function(e){n.data._el.radio_list.each(function(){t(this).radio("uncheck")}),a.self.radio("check"),n.data.checked=!0,n.data.value=a.self.radio("value")}),a.data.disabled&&a.self.radio("disable")}),n.init_components()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(t){return this.each(function(){this.obj.check(t)})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var a=[];return this.each(function(){a.push(this.obj.data.checked)}),a},value:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.value}),t}var a=[];return this.each(function(){a.push(this.obj.data.value)}),a}};t.fn.radio_group=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.radio_group"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="radio-group"]').radio_group()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"tumbler",target:e});var n=this.obj={};n.defaults={disabled:!1,checked:!1,hidden:!1,type:null},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={input:e.find(".tumbler__input"),button:e.find("button")},n.data._triggers={on:"on.fc.tumbler",off:"off.fc.tumbler"},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),e.removeData(),e.remove()},n.disable=function(){if(e.addClass("tumbler_disabled"),e.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(e.removeClass("tumbler_disabled"),e.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.addClass("tumbler_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("tumbler_hidden"),n.data.hidden=!1},n.check=function(){e.addClass("tumbler_checked"),n.data._el.input.attr("checked","checked"),n.data._el.input.prop("checked",!0),n.data.checked=!0,n.correct(),e.trigger(n.data._triggers.on)},n.uncheck=function(){e.removeClass("tumbler_checked"),n.data._el.input.removeAttr("checked"),n.data._el.input.prop("checked",!1),n.data.checked=!1,n.correct(),e.trigger(n.data._triggers.off)},n.correct=function(){"int"==n.data.type&&(n.data.checked=n.data.checked?1:0)},n.hover=function(){e.addClass("checkbox_hovered")},n.unhover=function(){e.removeClass("checkbox_hovered")},n.click=function(){e.addClass("checkbox_clicked"),t("body").one("mouseup.checkbox touchend.checkbox",n.unclick)},n.unclick=function(){e.removeClass("checkbox_clicked")},n.bind=function(){e.on("mouseover.checkbox",n.hover),e.on("mouseout.checkbox",n.unhover),e.on("mousedown.checkbox touchstart.checkbox",n.click),n.data._el.button.bindFirst("click.tumbler",null,null,function(){n.data.checked?n.uncheck():n.check()})},n.init_components=function(){n.data._el.button.button()},n.init=function(){n.data.name=n.data._el.input.attr("name"),n.init_components(),n.bind(),n.data.checked?n.check():n.uncheck(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},check:function(){return this.each(function(){this.obj.check()})},uncheck:function(){return this.each(function(){this.obj.uncheck()})},checked:function(){if(1==this.length){var t=!1;return this.each(function(){t=this.obj.data.checked}),t}var a=[];return this.each(function(){a.push(this.obj.data.checked)}),a},value:function(){return this.tumbler("checked")}};t.fn.tumbler=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.tumbler"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tumbler"]').tumbler()}),$.fn.bindFirst=function(t,a,e,n){this.on(t,a,e,n),this.each(function(){var a=$._data(this,"events")[t.split(".")[0]],e=a.pop();a.splice(0,0,e)})},$.fn.closestChild=function(t){for(var a=$(),e=this;e.length&&!(a=e.filter(t)).length;)e=e.children();return a.first()},function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"alertbox",target:e});var n=this.obj={};n.defaults={disabled:!1,hidden:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._el={button:e.find("button")},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),e.removeData(),e.remove()},n.disable=function(){if(n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable")},n.enable=function(){if(n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+"."+t.namespace,t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.addClass("alertbox_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("alertbox_hidden"),n.data.hidden=!1},n.bind=function(){void 0!==n.data._el.button[0]&&n.data._el.button.on("click",function(t){t.preventDefault(),n.destroy()})},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button()},n.init=function(){n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})}};t.fn.alertbox=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.alertbox"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="alertbox"]').alertbox()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"input",target:e});var n=this.obj={};n.const={REQUIRED:"Необходимо заполнить"},n.defaults={disabled:!1,hidden:!1,width:"100%",autoclose:!0,popup_animation:!0,popup_place:"source",format:"dd.MM.yyyy",placeholder:null,highlight:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.data._handlers_input=null,n.data._datepicker=null,n.data._el={button:e.find(".button").attr("tabIndex","-1"),input:e.find(".input__control").attr("placeholder",n.data.placeholder),popup:t('<div class="popup"></div>')},n.destroy=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button("destroy"),n.data._el.popup.data("_widget")&&n.data._el.popup.popup("destroy"),e.removeData(),e.remove()},n.disable=function(){if(e.addClass("input_disabled"),e.attr("data-disabled","true"),n.data._el.input.attr("disabled","disabled"),n.data._el.input.prop("disabled",!0),n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}void 0!==n.data._el.button[0]&&n.data._el.button.button("disable"),n.disable_input()},n.enable=function(){if(e.removeClass("input_disabled"),e.removeAttr("data-disabled"),n.data._el.input.removeAttr("disabled"),n.data._el.input.prop("disabled",!1),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+(t.namespace?"."+t.namespace:""),t.handler)});void 0!==n.data._el.button[0]&&n.data._el.button.button("enable"),n.data._handlers=null,n.data.disabled=!1,n.enable_input()},n.hide=function(){e.addClass("input_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("input_hidden"),n.data.hidden=!1},n.focus=function(){n.data._el.input.trigger("focus"),n.data._el.input.trigger("mousedown")},n.clear=function(t){n.data._el.input.val(""),n.data._el.input.trigger("keyup"),void 0!==t&&t&&n.focus()},n.disable_input=function(){if(t._data(n.data._el.input[0],"events")){n.data._handlers_input={};for(var a in t._data(n.data._el.input[0],"events"))n.data._handlers_input[a]=t._data(n.data._el.input[0],"events")[a].slice(0);n.data._el.input.off()}},n.enable_input=function(){if(n.data._handlers_input)for(var t in n.data._handlers_input)n.data._handlers_input[t].forEach(function(t){n.data._el.input.on(t.type+(t.namespace?"."+t.namespace:""),t.handler)})},n.focusin=function(){e.addClass("input_focused"),n.data.focused=!0},n.focusout=function(){e.removeClass("input_focused"),n.data.focused=!1},n.set_width=function(t){e.css("width",t)},n.set_value=function(t){if(n.data.value=t,n.data._el.input.val(t),"datepicker"==n.data.toggle){var a=n.data.value.split("."),i=new Date(Date.parse(a[2]+"-"+a[1]+"-"+a[0]));isNaN(i)?(n.data.value="",e.removeAttr("data-value")):(n.data.date=i,n.data.formattedDate=n.data.value,n.data._datepicker.selectDate(i))}n.highlight()},n.get_value=function(){var t=n.data._el.input.val();return t==n.data.placeholder&&(t=null),t},n.validate=function(){return n.data.validate=!0,n.data.required&&(""==n.data._el.input.val()?(n.data.validate=!1,e.addClass("input__has-error"),0==e.parent().find(".control__error").length&&e.after(t('<div class="control__error">'+n.const.REQUIRED+"</div>"))):(n.data.validate=!0,e.removeClass("input__has-error"),0!=e.parent().find(".control__error").length&&e.parent().find(".control__error").remove())),n.data.validate},n.highlight=function(){n.data.highlight&&(""!=n.data._el.input.val()?e.addClass("input_filled"):e.removeClass("input_filled"))},n.bind=function(){n.data._el.input.bindFirst("focusin.input__control mousedown.input__control touchstart.input__control",null,null,n.focusin),n.data._el.input.bindFirst("focusout.input__control",null,null,n.focusout),n.data.highlight&&n.data._el.input.bindFirst("keyup.input__control",null,null,n.highlight),n.data._el.button.on("click.input__clear",null,null,function(t){t.preventDefault(),n.clear()}),n.data._el.input.bindFirst("mousedown.input__control",null,null,n.show_datepicker),t("body").on("mouseup.input__control touchend.input__control",n.hide_datepicker)},n.init_components=function(){void 0!==n.data._el.button[0]&&n.data._el.button.button(),"datepicker"==n.data.toggle&&n.init_datepicker()},n.init_datepicker=function(){if("source"==n.data.popup_place&&e.after(n.data._el.popup),"body"==n.data.popup_place&&t("body").append(n.data._el.popup),n.data._el.popup.popup({source:e,place:n.data.popup_place,animation:n.data.popup_animation,width:"auto"}),n.data.value){var a=n.data.value.split("."),i=new Date(Date.parse(a[2]+"-"+a[1]+"-"+a[0]));isNaN(i)?(n.data.value="",e.removeAttr("data-value")):(n.data.date=i,n.data.formattedDate=n.data.value)}n.data._el.input.datepicker({inline:!0,format:"dd.mm.yyyy",startDate:n.data.date?n.data.date:null,autoClose:n.data.autoclose,onSelect:function(t,a,e){n.data.date=a,n.data.formattedDate=t,n.data.autoclose&&n.data._el.popup.popup("hide"),n.highlight()}}),n.data._datepicker=n.data._el.input.data().datepicker,n.data._datepicker.$datepicker.parent().appendTo(n.data._el.popup),n.data.date&&n.data._datepicker.selectDate(n.data.date)},n.init=function(){n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width),n.highlight()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},focus:function(){return this.each(function(){this.obj.focus()})},clear:function(t){return this.each(function(){this.obj.clear(t)})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},validate:function(){if(1==this.length){var t=!0;return this.each(function(){t=this.obj.validate()}),t}var a=[];return this.each(function(){a.push(this.obj.validate())}),a},value:function(t){if(!t){if(1==this.length){var a=!1;return this.each(function(){a=this.obj.get_value()}),a}var e=[];return this.each(function(){e.push(this.obj.get_value())}),e}this.each(function(){this.obj.set_value(t)})}};t.fn.input=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.input"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="input"]').input()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"textarea",target:e});var n=this.obj={};n.const={REQUIRED:"Необходимо заполнить"},n.defaults={disabled:!1,hidden:!1,width:"100%",rows:5},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._handlers=null,n.destroy=function(){e.removeData(),e.remove()},n.disable=function(){if(e.addClass("textarea_disabled"),e.attr("data-disabled","true"),e.attr("disabled","disabled"),e.prop("disabled",!0),n.data.disabled=!0,t._data(e[0],"events")){n.data._handlers={};for(var a in t._data(e[0],"events"))n.data._handlers[a]=t._data(e[0],"events")[a].slice(0);e.off()}},n.enable=function(){if(e.removeClass("textarea_disabled"),e.removeAttr("data-disabled"),e.removeAttr("disabled"),e.prop("disabled",!1),n.data._handlers)for(var t in n.data._handlers)n.data._handlers[t].forEach(function(t){e.on(t.type+"."+t.namespace,t.handler)});n.data._handlers=null,n.data.disabled=!1},n.hide=function(){e.addClass("textarea_hidden"),n.data.hidden=!0},n.show=function(){e.removeClass("textarea_hidden"),n.data.hidden=!1},n.focus=function(){e.trigger("focus"),e.trigger("mousedown")},n.clear=function(){e.val(""),e.trigger("keyup"),n.focus()},n.focusin=function(){e.addClass("textarea_focused"),n.data.focused=!0},n.focusout=function(){e.removeClass("textarea_focused"),n.data.focused=!1},n.set_width=function(t){e.css("width",t)},n.set_rows=function(t){t&&e.attr("rows",t)},n.validate=function(){return n.data.validate=!0,n.data.required&&(""==e.val()?(n.data.validate=!1,e.addClass("textarea__has-error"),0==e.parent().find(".control__error").length&&e.after(t('<div class="control__error">'+n.const.REQUIRED+"</div>"))):(n.data.validate=!0,e.removeClass("textarea__has-error"),0!=e.parent().find(".control__error").length&&e.parent().find(".control__error").remove())),n.data.validate},n.bind=function(){e.bindFirst("focusin.textarea mousedown.textarea touchstart.textarea",null,null,n.focusin),e.bindFirst("focusout.textarea",null,null,n.focusout)},n.init_components=function(){},n.init=function(){n.init_components(),n.bind(),n.data.disabled?n.disable():n.enable(),n.data.hidden?n.hide():n.show(),n.set_width(n.data.width),n.set_rows(n.data.rows)},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})},focus:function(){return this.each(function(){this.obj.focus()})},clear:function(){return this.each(function(){this.obj.clear()})},set_width:function(t){return this.each(function(){this.obj.set_width(t)})},set_rows:function(t){return this.each(function(){this.obj.set_rows(t)})},validate:function(){if(1==this.length){var t=!0;return this.each(function(){t=this.obj.validate()}),t}var a=[];return this.each(function(){a.push(this.obj.validate())}),a},value:function(){if(1==this.length){var a=!1;return this.each(function(){a=t(this).val()}),a}var e=[];return this.each(function(){e.push(t(this).val())}),e}};t.fn.textarea=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.textarea"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="textarea"]').textarea()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"card",target:e});var n=this.obj={};n.defaults={id:null,hiddenLeft:!1,hiddenRight:!1,menuLeftId:"id"+(new Date).valueOf(),menuRightId:"id"+(new Date).valueOf()},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={button_toggle_left:e.closestChild('[data-toggle="left"]').attr("id",n.data.menuLeftId),button_toggle_right:e.closestChild('[data-toggle="right"]').attr("id",n.data.menuRightId),card__main:e.closestChild(".card__main"),card__left:e.closestChild(".card__left"),card__right:e.closestChild(".card__right"),card__backdrop:e.closestChild(".card__backdrop")},n.destroy=function(){e.removeData()},n.hide_left=function(){n.data._el.button_toggle_left.find(".icon").removeClass("icon_rotate_180deg"),n.data._el.card__left.addClass("card__left_hidden"),n.data._el.card__backdrop.remove(),"function"==typeof setCookie&&setCookie("card_menu_left_hidden"+(n.data.id?"_"+n.data.id:""),!0),t(window).trigger("resize")},n.hide_right=function(){n.data._el.button_toggle_right.find(".icon").removeClass("icon_rotate_180deg"),n.data._el.card__right.addClass("card__right_hidden"),n.data._el.card__backdrop.remove(),"function"==typeof setCookie&&setCookie("card_menu_right_hidden"+(n.data.id?"_"+n.data.id:""),!0),t(window).trigger("resize")},n.show_left=function(){n.data._el.button_toggle_left.find(".icon").addClass("icon_rotate_180deg"),n.data._el.card__left.removeClass("card__left_hidden"),n.data._el.card__main.append(n.data._el.card__backdrop.one("click",function(){n.hide_left(),n.hide_right()})),"function"==typeof setCookie&&setCookie("card_menu_left_hidden"+(n.data.id?"_"+n.data.id:""),!1),t(window).trigger("resize")},n.show_right=function(){n.data._el.button_toggle_right.find(".icon").addClass("icon_rotate_180deg"),n.data._el.card__right.removeClass("card__right_hidden"),n.data._el.card__main.append(n.data._el.card__backdrop.one("click",function(){n.hide_left(),n.hide_right()})),"function"==typeof setCookie&&setCookie("card_menu_right_hidden"+(n.data.id?"_"+n.data.id:""),!1),t(window).trigger("resize")},n.toggle_left=function(){n.data._el.card__left.hasClass("card__left_hidden")?n.show_left():n.hide_left()},n.toggle_right=function(){n.data._el.card__right.hasClass("card__right_hidden")?n.show_right():n.hide_right()},n.bind=function(){n.data._el.button_toggle_left&&n.data._el.button_toggle_left.length>0&&n.data._el.button_toggle_left.on("click",function(){n.toggle_left()}),n.data._el.button_toggle_right&&n.data._el.button_toggle_right.length>0&&n.data._el.button_toggle_right.on("click",function(){n.toggle_right()})},n.init_components=function(){0==n.data._el.card__backdrop.length&&(n.data._el.card__backdrop=t('<div class="card__backdrop">')),n.data._el.button_toggle_left&&n.data._el.button_toggle_left.length>0&&(n.data._el.button_toggle_left.button(),"function"==typeof getCookie&&(n.data.hiddenLeft="true"==getCookie("card_menu_left_hidden"+(n.data.id?"_"+n.data.id:""))),n.data.hiddenLeft?n.hide_left():n.show_left(),setTimeout(function(){n.data._el.button_toggle_left.find(".icon").addClass("icon_animate")},500)),n.data._el.button_toggle_right&&n.data._el.button_toggle_right.length>0&&(n.data._el.button_toggle_right.button(),"function"==typeof getCookie&&(n.data.hiddenRight="true"==getCookie("card_menu_right_hidden"+(n.data.id?"_"+n.data.id:""))),n.data.hiddenRight?n.hide_right():n.show_right(),setTimeout(function(){n.data._el.button_toggle_right.find(".icon").addClass("icon_animate")},500))},n.init=function(){n.init_components(),n.bind()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.card=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.card"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="card"]').card()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"tab",target:e});var n=this.obj={};n.defaults={disabled:!1,active:!1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._neighbors=[],n.data._el={button:e.find('[data-fc="button"]'),tabs__tab:e.closest(".tabs__tab"),tabs__link:e,tabs__pane:e.closest(".card").find('.tabs__pane[id="'+e.attr("href").replace("#","")+'"]')},n.data._triggers={shown:"shown.fc.tab",hidden:"hidden.fc.tab"},n.destroy=function(){n.data._neighbors.forEach(function(t){t.button.button("destroy")}),e.removeData(),e.remove()},n.disable=function(){n.data._el.button.button("disable"),n.data.disabled=!0},n.enable=function(){n.el.button.button("enable"),n.data.disabled=!1},n.show=function(){n.data._neighbors.forEach(function(t){t.attr("href")!=n.data._el.tabs__link.attr("href")&&(t.data()._el.button.button("enable"),t.data()._el.tabs__tab.removeClass("tabs__tab_active"),t.data()._el.tabs__pane.removeClass("tabs__pane_active"),t.data().active=!1,t.data().disabled=!1,t.trigger(n.data._triggers.hidden))}),n.data._el.button.button("disable"),n.data._el.tabs__tab.addClass("tabs__tab_active"),n.data._el.tabs__pane.addClass("tabs__pane_active"),n.data.active=!0,n.data.disabled=!0,n.data._el.tabs__link.trigger(n.data._triggers.shown)},n.check_active=function(){n.data._el.tabs__tab.hasClass("tabs__tab_active")&&n.show()},n.get_neighbors=function(){e.closest(".tabs").find('[data-fc="tab"]').each(function(){var a=t(this).tabs();n.data._neighbors.push(a)})},n.set_text=function(t){n.data._el.button.button("set_text",t)},n.bind=function(){n.data._el.tabs__link.on("click",function(t){t.preventDefault(),n.data._el.tabs__tab.hasClass("tabs__tab_active")||(n.show(),"function"==typeof n.data.onclick&&n.data.onclick(n.data.data))})},n.init_components=function(){n.data._el.button.button()},n.init=function(){n.init_components(),n.get_neighbors(),n.bind(),n.check_active()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},disable:function(){return this.each(function(){this.obj.disable()})},enable:function(){return this.each(function(){this.obj.enable()})},show:function(){return this.each(function(){this.obj.show()})},set_text:function(t){return this.each(function(){this.obj.set_text(t)})}};t.fn.tabs=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.tabs"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="tab"]').tabs()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_tooltip")){var n=this.tooltip={};n.defaults={follow:!0,tooltip:e.attr("data-tooltip")},n.data=e.data(),n.options=t.extend(n.defaults,n.data,a),e.data(n.options),n.data._tooltip={tooltip:t('<div class="tooltip"></div>'),tooltip__text:t('<div class="tooltip__text"></div>'),tooltip__arrow:t('<div class="tooltip__arrow"></div>')},n.destroy=function(){n.data._tooltip.tooltip.remove(),n.data._tooltip.tooltip.css({width:"auto"})},n.hide=function(){n.destroy(),e.off("mousemove.tooltip")},n.show=function(t){n.render(),n.data.follow?(n.follow(t),e.on("mousemove.tooltip",n.follow)):n.put(t)},n.put=function(a){n.data._tooltip.tooltip.addClass("tooltip_visible"),n.data._tooltip.tooltip__arrow.removeClass("tooltip__arrow_bottom"),n.data._tooltip.tooltip__arrow.addClass("tooltip__arrow_top");var i=Math.ceil(n.data._tooltip.tooltip.width()),o=Math.ceil(n.data._tooltip.tooltip.outerHeight()),d=e.offset().left+e[0].getBoundingClientRect().width/2,s=e.offset().top,l=d-i/2,c=s-o-10;l-10<0?(l=10)+i+10>t(window).width()&&(i=t(window).width()-20):l+i+10>t(window).width()&&(l=t(window).width()-10-i)-10<0&&(i=t(window).width()-20),c<0&&(c=s+e[0].getBoundingClientRect().height+10,n.data._tooltip.tooltip__arrow.removeClass("tooltip__arrow_top"),n.data._tooltip.tooltip__arrow.addClass("tooltip__arrow_bottom"));var r=d-l-5;r<10&&(r=10),r>i-20&&(r=i-20),n.data._tooltip.tooltip.css({top:c,left:l}),n.data._tooltip.tooltip__arrow.css({left:r})},n.follow=function(a){n.data._tooltip.tooltip.addClass("tooltip_visible"),n.data._tooltip.tooltip__arrow.removeClass("tooltip__arrow_bottom"),n.data._tooltip.tooltip__arrow.addClass("tooltip__arrow_top");var e=Math.ceil(n.data._tooltip.tooltip.width()),i=Math.ceil(n.data._tooltip.tooltip.outerHeight()),o=t(window).scrollTop(),d=t(window).scrollLeft(),s=document.all?a.clientX+d:a.pageX,l=document.all?a.clientY+o:a.pageY,c=s-e/2,r=l-i-25;c-10<0?(c=10)+e+10>t(window).width()&&(e=t(window).width()-20):c+e+10>t(window).width()&&(c=t(window).width()-10-e)-10<0&&(e=t(window).width()-20),r<0&&(r=l+25,n.data._tooltip.tooltip__arrow.removeClass("tooltip__arrow_top"),n.data._tooltip.tooltip__arrow.addClass("tooltip__arrow_bottom"));var _=s-c-5;_<10&&(_=10),_>e-20&&(_=e-20),n.data._tooltip.tooltip.css({top:r,left:c}),n.data._tooltip.tooltip__arrow.css({left:_})},n.render=function(){var a="";e.attr("title")&&(e.data("tooltip",e.attr("title")),e.removeAttr("title")),e.data("tooltip")&&(n.data.tooltip=e.data("tooltip")),n.data.tooltip&&(a=n.data.tooltip),""!=a&&t("body").append(n.data._tooltip.tooltip.append(n.data._tooltip.tooltip__text.html(a),n.data._tooltip.tooltip__arrow))},n.update=function(t){n.data.tooltip=t,n.data._tooltip.tooltip__text.html(n.data.tooltip)},n.bind=function(){e.on("mouseover.tooltip",n.show),e.on("mouseout.tooltip",n.hide)},n.init=function(){n.bind()},n.init()}return this})},hide:function(t){return this.each(function(){this.tooltip.hide(t)})},show:function(t){return this.each(function(){this.tooltip.show(t)})},update:function(t){return this.each(function(){this.tooltip.update(t)})},clear:function(a){return this.each(function(){t(".tooltip").remove()})}};t.fn.tooltip=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.tooltip"):a.init.apply(this,arguments)}}(jQuery),$(function(){$("body").on("mouseover","[data-tooltip]",function(t){$(t.currentTarget).tooltip(),$(t.currentTarget).trigger("mouseover.tooltip")})}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"widget_grid",target:e});var n=this.obj={};n.defaults={items:[],single:!1,margin:!0,closely:!1,lib:null,widget_buttons:[],widget_collapse_callback:null,mode:"view",disabled:!0,grid:{verticalMargin:10,cellHeight:20,disableDrag:!0,disableResize:!0,resizable:{handles:"e, se, s, sw, w"}},collapsed_widget_height:1},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={grid:null,nodes:[]},n.destroy=function(){n.clear(),e.removeData(),e.remove()},n.clear=function(){n.data._el.grid.removeAll(),_.each(n.data._el.nodes,function(t){t.widget.widget("destroy")}),n.data._el.nodes=[]},n.save=function(a){n.data.items=_.map(e.children(".grid-stack-item:visible"),function(a){a=t(a);var e=n.get(a);return{x:e.x,y:e.y,width:e.width,height:e.height,settings:_.omitBy(e.widget.data(),function(t,a){return"_"==a.substring(0,1)||"mode"==a||"loader"==a||"library"==a||"libraries"==a||"lib"==a||"content"==a||"buttons"==a||"id"==a||"reloadable"==a})}},this),"function"==typeof a&&a(n.data.items)},n.load=function(){n.data._el.grid.removeAll();var t=GridStackUI.Utils.sort(n.data.items);_.each(t,function(t){n.load_widget(t)})},n.load_items=function(a){n.clear(),n.data.items=t.extend(!0,{},a),n.load()},n.load_widget=function(a){n.data.single&&(a.settings.name=n.data.pageid),a.settings.id?a._id=a.settings.id:(a._id=Date.now(),a.settings.id=a._id),a._height=a.height,a.settings.buttons=t.extend([],n.data.widget_buttons,a.settings.buttons),a.settings.reloadable=!0,a.settings.lib=n.data.lib,n.data.loader&&(a.settings.loader=n.data.loader),a.settings.params=n.data.params,a.widget=t('<div class="widget" id="'+a._id+'"></div>').widget(a.settings),a.el=t('<div><div class="grid-stack-item-content"></div></div>'),_.unset(a,"settings"),a.el.find(".grid-stack-item-content").append(a.widget),a.widget.data().collapsible&&(a.widget.data()._el.button_collapse.off("click.widget"),a.widget.data()._el.button_collapse.on("click.widget-grid",function(){a.widget.data().collapsed?n.expand_widget(a._id,!0):n.collapse_widget(a._id,!0)})),a.widget.widget("edit_mode"),n.data._el.grid.addWidget(a.el,a.x,a.y,a.width,a.height),n.data._el.nodes.push(a),n.set(a.el,a)},n.add_widget=function(a,e){if(n.load_widget(a),"function"==typeof e){var i=t.extend(!0,{},a);_.unset(i,"el"),_.unset(i,"widget"),e(i)}},n.remove_widget=function(t,a){var e=n.data._el.nodes.filter(function(a){return a._id==t});e.length>0&&(e=e[0]),n.data._el.grid.removeWidget(e.el),n.data._el.nodes=n.data._el.nodes.filter(function(t){return t._id!==e._id}),"function"==typeof a&&a(item)},n.update_widget=function(t,a,e,i,o,d){var s=n.data._el.nodes.filter(function(a){return a._id==t});s.length>0&&(s=s[0]),n.data._el.grid.update(s.el,a,e,i,o),"function"==typeof d&&d(item)},n.collapse_widget=function(t,a){var e=n.data._el.nodes.filter(function(a){return a._id==t});if(e.length>0){var i=(e=e[0]).widget.data().collapsed;n.update_widget(e._id,null,null,null,n.data.collapsed_widget_height),e.widget.widget("collapse"),a||(e.widget.data().collapsed=i)}},n.expand_widget=function(t,a){var e=n.data._el.nodes.filter(function(a){return a._id==t});if(e.length>0){var i=(e=e[0]).widget.data().collapsed;n.update_widget(e._id,null,null,null,e._height),e.widget.widget("expand"),a||(e.widget.data().collapsed=i)}},n.edit_mode=function(){n.data.mode="edit",_.each(n.data._el.nodes,function(t){t.widget.widget("edit_mode"),t.widget.data().buttons.forEach(function(t){"edit"==t.mode&&t._el.button("show"),"view"==t.mode&&t._el.button("hide")}),n.expand_widget(t._id,!1)}),n.enable(),n.resize()},n.view_mode=function(){n.data.mode="view",_.each(n.data._el.nodes,function(t){t._height=n.get(t.el).height,t.widget.widget("view_mode"),t.widget.data().buttons.forEach(function(t){"edit"==t.mode&&t._el.button("hide"),"view"==t.mode&&t._el.button("show")}),t.widget.data().collapsed?n.collapse_widget(t._id,!1):n.expand_widget(t._id,!1)}),n.disable(),n.resize()},n.create=function(){return e.hasClass("grid-stack")?(n.data.single?e.addClass("widget-grid_single"):e.addClass("widget-grid_multiple"),n.data.margin||e.addClass("widget-grid_margin_none"),n.data.closely&&e.addClass("widget-grid_closely"),e.gridstack(n.data.grid),n.data._el.grid=e.data("gridstack"),!0):(t.error("Container does not have class .grid-stack"),!1)},n.enable=function(){n.data.disabled=!1,n.data._el.grid.enableMove(!0,!0),n.data._el.grid.enableResize(!0,!0)},n.disable=function(){n.data.disabled=!0,n.data._el.grid.enableMove(!1,!0),n.data._el.grid.enableResize(!1,!0)},n.set=function(a,e){t.extend(a.data("_gridstack_node"),e)},n.get=function(t){return t.data("_gridstack_node")},n.resize=function(){_.each(n.data._el.nodes,function(t){t.widget.widget("resize")})},n.init_collapsed_widget_height=function(){"function"==typeof getCookie&&(n.data.collapsed_widget_height=+getCookie("collapsed_widget_height"))},n.init_resize=function(){t(window).on("resize",function(){n.resize()})},n.init=function(){n.init_collapsed_widget_height(),n.create()&&(n.load(),"view"==n.data.mode?n.view_mode():n.edit_mode(),n.init_resize())},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},clear:function(){return this.each(function(){this.obj.clear()})},edit_mode:function(){return this.each(function(){this.obj.edit_mode()})},view_mode:function(){return this.each(function(){this.obj.view_mode()})},enable:function(){return this.each(function(){this.obj.enable()})},disable:function(){return this.each(function(){this.obj.disable()})},save:function(t){return this.each(function(){this.obj.save(t)})},add_widget:function(t,a){return this.each(function(){this.obj.add_widget(t,a)})},remove_widget:function(t,a){return this.each(function(){this.obj.remove_widget(t,a)})},update_widget:function(t,a,e,n,i,o){return this.each(function(){this.obj.update_widget(t,a,e,n,i,o)})},resize:function(){return this.each(function(){this.obj.resize()})},load_items:function(t){return this.each(function(){this.obj.load_items(t)})}};t.fn.widget_grid=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.widget_grid"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"particles",target:e});var n=this.obj={};n.const={COLOR_BLUE:"#4983c4",COLOR_DEFAULT:"#333",COLOR_PURPLE:"#8e6bf5",COLOR_RED:"#ff5940",COLOR_WHITE:"#fff"},n.defaults={color_nodes:"default",color_nodes_value:n.const.COLOR_WHITE,color_background:null,color_background_value:n.const.COLOR_BLUE},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.destroy=function(){e.removeData(),e.remove()},n.init_color=function(){"blue"==n.data.color_nodes&&(n.data.color_nodes_value=n.const.COLOR_BLUE),"default"==n.data.color_nodes&&(n.data.color_nodes_value=n.const.COLOR_DEFAULT),"purple"==n.data.color_nodes&&(n.data.color_nodes_value=n.const.COLOR_PURPLE),"red"==n.data.color_nodes&&(n.data.color_nodes_value=n.const.COLOR_RED),"white"==n.data.color_nodes&&(n.data.color_nodes_value=n.const.COLOR_WHITE),n.data.color_background&&("blue"==n.data.color_background&&(n.data.color_background_value=n.const.COLOR_BLUE),"default"==n.data.color_background&&(n.data.color_background_value=n.const.COLOR_DEFAULT),"purple"==n.data.color_background&&(n.data.color_background_value=n.const.COLOR_PURPLE),"red"==n.data.color_background&&(n.data.color_background_value=n.const.COLOR_RED),"white"==n.data.color_background&&(n.data.color_background_value=n.const.COLOR_WHITE),e.css({"background-color":n.data.color_background_value}))},n.init=function(){n.init_color(),n.data.id="particles_"+Date.now(),e.attr("id",n.data.id),particlesJS(n.data.id,{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:n.data.color_nodes_value},shape:{type:"circle",stroke:{width:0,color:n.data.color_nodes_value},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:n.data.color_nodes_value,opacity:.25,width:1},move:{enable:!0,speed:3,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"repulse"},resize:!0},modes:{grab:{distance:200,line_linked:{opacity:.5}},bubble:{distance:400,size:5,duration:2,opacity:1,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})}};t.fn.particles=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.particles"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="particles"]').particles()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"calendar",target:e});var n=this.obj={};n.defaults={validate:!0},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={button_submit:null,inputs:[],selects:[]},n.destroy=function(){e.removeData(),e.remove()},n.get=function(){n.data._el.button_submit=e.find('button[type="submit"]')},n.get_controls=function(){0==n.data._el.inputs.length&&(n.data._el.inputs=e.find('[data-fc="input"]'),n.bind_validate_inputs()),0==n.data._el.selects.length&&(n.data._el.selects=e.find('[data-fc="select"]'),n.bind_validate_selects())},n.validate=function(){return n.data.validate=!0,n.data._el.inputs.each(function(){t(this).input("validate")||(n.data.validate=!1)}),n.data._el.selects.each(function(){t(this).select("validate")||(n.data.validate=!1)}),n.data.validate},n.bind=function(){n.data._el.button_submit.on("click",function(t){n.validate()||t.preventDefault()})},n.bind_validate_inputs=function(){n.data._el.inputs.each(function(){var a=t(this);a.data().required&&a.data()._el.input.on("blur",function(){a.input("validate")})})},n.bind_validate_selects=function(){n.data._el.selects.each(function(){var a=t(this);a.data().required&&a.on("change",function(){a.select("validate")})})},n.init_components=function(){e.find('[data-fc="input"]').input(),e.find('[data-fc="button"]').button(),e.find('[data-fc="tooltip"]').tooltip(),e.find('[data-fc="textarea"]').textarea(),e.find('[data-fc="checkbox"]').checkbox(),e.find('[data-fc="tumbler"]').tumbler(),e.find('[data-fc="select"]').select()},n.init=function(){n.get(),n.init_components(),n.get_controls(),n.bind()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},get_controls:function(){return this.each(function(){this.obj.get_controls()})},validate:function(){if(1==this.length){var t=!0;return this.each(function(){t=this.obj.validate()}),t}var a=[];return this.each(function(){a.push(this.obj.validate())}),a}};t.fn.form=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.form"):a.init.apply(this,arguments)}}(jQuery),$(function(){$('[data-fc="form"]').form()}),function(t){var a={init:function(a){return this.each(function(){var e=t(this);if(!e.data("_widget")){e.data("_widget",{type:"modal__",target:e});var n=this.obj={};n.defaults={buttons:[{name:"destroy",action:"destroy",icon:"icon_svg_close"}],header:{icon:null,caption:null,name:null},footer:{buttons:null},content:null,data:null,show:!0,position:null,size:null,draggable:!1,resizable:!1,draggable_grid_size:1,render_tabs_row:!0,render_backdrop:!0,fullscreen:{active:!1,dimentions:null}},n.data=e.data(),n.options=t.extend(!0,{},n.defaults,n.data,a),e.data(n.options),n.data._el={modal__view:t('<div class="modal__view"></div>'),modal__backdrop:t('<div class="modal__backdrop"></div>'),modal__dialog:t('<div class="modal__dialog modal__dialog_hidden"></div>'),modal__dialog_handle_NE:t('<div class="modal__dialog_handle modal__dialog_handle_NE"></div>'),modal__dialog_handle_NN:t('<div class="modal__dialog_handle modal__dialog_handle_NN"></div>'),modal__dialog_handle_NW:t('<div class="modal__dialog_handle modal__dialog_handle_NW"></div>'),modal__dialog_handle_WW:t('<div class="modal__dialog_handle modal__dialog_handle_WW"></div>'),modal__dialog_handle_EE:t('<div class="modal__dialog_handle modal__dialog_handle_EE"></div>'),modal__dialog_handle_SW:t('<div class="modal__dialog_handle modal__dialog_handle_SW"></div>'),modal__dialog_handle_SS:t('<div class="modal__dialog_handle modal__dialog_handle_SS"></div>'),modal__dialog_handle_SE:t('<div class="modal__dialog_handle modal__dialog_handle_SE"></div>'),card:t('<div class="card" data-fc="card"></div>'),card__header:t('<div class="card__header"></div>'),card__header_row_caption:t('<div class="card__header-row"></div>'),card__header_row_name:t('<div class="card__header-row"></div>'),card__header_row_tabs:t('<div class="card__header-row tabs"></div>'),card__footer:t('<div class="card__header"></div>'),card__footer_row:t('<div class="card__header-row"></div>'),card__main:t('<div class="card__main"></div>'),card__middle:t('<div class="card__middle"></div>'),card__middle_scroll:t('<div class="card__middle-scroll"></div>'),card__backdrop:t('<div class="card__backdrop"></div>'),card__right:t('<div class="card__right"></div>'),tabs__list:t('<ul class="tabs__list"></ul>'),tabs_pane:t('<div class="tabs__pane"></div>')},n.data._triggers={show:"show.fc.modal",shown:"shown.fc.modal",showed:"showed.fc.modal",hide:"hide.fc.modal",hidden:"hidden.fc.modal",loaded:"loaded.fc.modal",drag:"drag.fc.modal"},n.destroy=function(){n.hide(),setTimeout(function(){e.removeData(),e.remove()},500)},n.hide=function(){n.data.transitioning=!0,n.data._el.modal__dialog.removeClass("modal__dialog_draggable"),e.trigger(n.data._triggers.hide),n.data._el.modal__dialog.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){n.data.transitioning&&(n.data.transitioning=!1,t(this).off(a),e.addClass("modal_hidden"),e.trigger(n.data._triggers.hidden))}).addClass("modal__dialog_hidden"),n.data.show=!1},n.hidden=function(){n.data._el.modal__dialog.addClass("modal__dialog_hidden"),e.addClass("modal_hidden"),n.data.show=!1},n.show=function(){n.data.transitioning=!0,e.trigger(n.data._triggers.show),n.set_forward(),e.removeClass("modal_hidden"),setTimeout(function(){n.data._el.modal__dialog.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){n.data.transitioning&&(n.data.transitioning=!1,t(this).off(a),setTimeout(function(){n.data._el.card.css("max-height","100%"),n.data._el.card.css("height","100%"),n.data.draggable&&n.init_draggable(),n.data.resizable&&n.init_resizable(),n.data.render_backdrop||!n.data.draggable&&!n.data.resizable||(e.append(n.data._el.modal__dialog),n.data._el.modal__view.remove()),e.trigger(n.data._triggers.shown),e.trigger(n.data._triggers.showed)},250))}).removeClass("modal__dialog_hidden")},100),n.data.show=!0},n.fullscreen=function(){n.data.fullscreen.active?(n.data.fullscreen.active=!1,n.data._el.modal__dialog.css(n.data.fullscreen.dimentions)):(n.data.fullscreen.active=!0,n.data.fullscreen.dimentions={left:n.data._el.modal__dialog.offset().left,top:n.data._el.modal__dialog.offset().top,height:n.data._el.modal__dialog.outerHeight(),width:n.data._el.modal__dialog.outerWidth()},n.data._el.modal__dialog.css({top:5,left:5,width:n.data._el.modal__view.width(),height:n.data._el.modal__view.height()}))},n.render=function(){n.render_view(),n.render_header(),n.render_footer(),n.render_tabs_row()},n.render_view=function(){e.append(n.data._el.modal__view.append(n.data.render_backdrop?n.data._el.modal__backdrop:null,n.data._el.modal__dialog.append(n.data._el.card.append(n.data._el.card__header.append(n.data.header.caption||n.data.buttons?n.data._el.card__header_row_caption:null,n.data.header.name?n.data._el.card__header_row_name:null,n.data.render_tabs_row?n.data._el.card__header_row_tabs.append(n.data._el.tabs__list):null),n.data.content?n.data._el.card__main.append(n.data._el.card__middle.append(n.data._el.card__middle_scroll)):null,n.data.footer.buttons?n.data._el.card__footer.append(n.data._el.card__footer_row):null))))},n.render_header=function(){n.data.content||n.data._el.card__header.addClass("card__header-border_bottom_none"),n.render_header_caption(),n.render_header_name()},n.render_header_caption=function(){n.render_header_caption_name(),n.data.buttons&&n.render_header_caption_buttons()},n.render_header_caption_name=function(){n.data._el.card__header_row_caption.append(t('<div class="card__header-column"></div>').append(n.data.header.caption?t(['<label class="card__caption"><span class="card__caption-text bold">'+n.data.header.caption+"</span></label>"].join("")):null))},n.render_header_caption_buttons=function(){var a=t('<div class="card__header-column"></div>');n.data.header.caption?n.data._el.card__header_row_caption.append(a):n.data._el.card__header_row_name.append(a),n.data.buttons.forEach(function(i){var o=t('<button class="button button__'+i.name+'" data-fc="button"'+(i.id?' id="'+i.id+'"':"")+(i.tooltip?' data-tooltip="'+i.tooltip+'"':"")+">"+(i.icon?'<span class="icon '+i.icon+'"></span>':"")+(i.caption?'<span class="button__text"> '+i.caption+"</span>":"")+"</button>");i.action&&("function"==typeof n[i.action]&&o.on("click",n[i.action]),n.data._triggers[i.action]||o.on("click",function(){e.trigger(i.action+".fc.modal",[n.data.items])})),a.append(o)})},n.render_header_name=function(){n.data._el.card__header_row_name.prepend(t('<div class="card__header-column card__header-column_start card__header-column_flex_1-1-auto"><label class="card__name"><span class="card__name-text">'+n.data.header.name+"</span></label></div>"))},n.render_footer=function(){n.data.footer.buttons&&n.render_footer_buttons()},n.render_footer_buttons=function(){var a=t('<div class="card__header-column"></div>');n.data._el.card__footer_row.append(a),n.data.footer.buttons.forEach(function(i){var o=t('<button class="button button__'+i.name+'" data-fc="button"'+(i.id?' id="'+i.id+'"':"")+(i.tooltip?' data-tooltip="'+i.tooltip+'"':"")+">"+(i.icon?'<span class="icon '+i.icon+'"></span>':"")+(i.caption?'<span class="button__text"> '+i.caption+"</span>":"")+"</button>");i.action&&("function"==typeof n[i.action]&&o.on("click",n[i.action]),n.data._triggers[i.action]||o.on("click",function(){e.trigger(i.action+".fc.modal",[n.data.items])})),a.append(o)})},n.render_tabs_row=function(){if(n.data.content&&n.data.content.tabs){if(n.data.content.tabs.length>0)if(1==n.data.content.tabs.length)n.data.content.tabs[0].active=!0;else{var a=!1;n.data.content.tabs.forEach(function(t){t.active&&(a=!0)}),a||(n.data.content.tabs[0].active=!0)}n.data.content.tabs.forEach(function(a){var e=t(['<a class="tabs__link link" href="#'+a.id+'" data-fc="tab">','<button class="button" data-fc="button">','<span class="button__text">'+a.name+"</span>","</button>","</a>"].join(""));e.data("data",a.data),e.data("onclick",a.onclick),n.data._el.tabs__list.append(t(a.active?'<li class="tabs__tab tabs__tab_active"></li>':'<li class="tabs__tab"></li>').append(e)),n.data._el.card__middle_scroll.append(n.data._el.tabs_pane.clone().attr("id",a.id).css("padding",a.padding?a.padding:null).addClass(a.active?"tabs__pane_active":"").append(a.content))})}},n.bind=function(){e.find(".modal__backdrop").on("click",n.destroy)},n.bind_buttons=function(){n.data.buttons.forEach(function(a){var i=t(a.selector);a.action&&("function"==typeof n[a.action]&&i.on("click",n[a.action]),n.data._triggers[a.action]||i.on("click",function(){e.trigger(a.action+".fc.modal",[n.data.items])}))}),n.data.footer.buttons.forEach(function(a){var i=t(a.selector);a.action&&("function"==typeof n[a.action]&&i.on("click",n[a.action]),n.data._triggers[a.action]||i.on("click",function(){e.trigger(a.action+".fc.modal",[n.data.items])}))})},n.set_position=function(){n.data.position&&n.data._el.modal__view.addClass("modal__view_align_"+n.data.position.split(" ").join("_"))},n.set_size=function(){n.data.size&&n.data._el.modal__dialog.addClass("modal__dialog_size_"+n.data.size)},n.set_forward=function(){t(".modal__dialog").css("z-index",1038),n.data._el.modal__dialog.css("z-index",1039)},n.init_draggable=function(){var a=n.data._el.modal__dialog.offset();n.data._el.modal__dialog.css(a).addClass("modal__dialog_absolute").addClass("modal__dialog_draggable").drag("start",function(a,e){n.set_forward(),e.attr=t(a.target).prop("className"),e.width=t(this).width(),e.height=t(this).height()}).drag(function(a,i){n.data.fullscreen.active=!1;var o={};(i.attr.indexOf("card__header")>-1||i.attr.indexOf("card__caption")>-1||i.attr.indexOf("card__name")>-1)&&(o.top=i.offsetY,o.left=i.offsetX),t(this).css({top:Math.round(o.top/n.data.draggable_grid_size)*n.data.draggable_grid_size,left:Math.round(o.left/n.data.draggable_grid_size)*n.data.draggable_grid_size}),e.trigger(n.data._triggers.drag)})},n.init_resizable=function(){var a=n.data._el.modal__dialog.offset();a.width=n.data._el.modal__dialog.outerWidth(),n.data._el.modal__dialog.is('[class*="max"]')&&(a.height=n.data._el.modal__dialog.outerHeight()),n.data._el.modal__dialog.css(a).append(n.data._el.modal__dialog_handle_NE,n.data._el.modal__dialog_handle_NN,n.data._el.modal__dialog_handle_NW,n.data._el.modal__dialog_handle_WW,n.data._el.modal__dialog_handle_EE,n.data._el.modal__dialog_handle_SW,n.data._el.modal__dialog_handle_SS,n.data._el.modal__dialog_handle_SE).addClass("modal__dialog_absolute").addClass("modal__dialog_draggable").drag("start",function(a,e){n.set_forward(),e.attr=t(a.target).prop("className"),e.width=t(this).width(),e.height=t(this).height()}).drag(function(a,i){n.data.fullscreen.active=!1;var o={};i.attr.indexOf("E")>-1&&(o.width=Math.max(320,i.width+i.deltaX)),i.attr.indexOf("S")>-1&&(o.height=Math.max(200,i.height+i.deltaY)),i.attr.indexOf("W")>-1&&(o.width=Math.max(320,i.width-i.deltaX),o.left=i.originalX+i.width-o.width),i.attr.indexOf("N")>-1&&(o.height=Math.max(200,i.height-i.deltaY),o.top=i.originalY+i.height-o.height),t(this).css({top:Math.round(o.top/n.data.draggable_grid_size)*n.data.draggable_grid_size,left:Math.round(o.left/n.data.draggable_grid_size)*n.data.draggable_grid_size,width:Math.round(o.width/n.data.draggable_grid_size)*n.data.draggable_grid_size,height:Math.round(o.height/n.data.draggable_grid_size)*n.data.draggable_grid_size}),e.trigger(n.data._triggers.drag)})},n.init_components=function(){e.find('[data-fc="alertbox"]').alertbox(),e.find('[data-fc="button"]').button({popup_animation:!1}),e.find('[data-fc="checkbox"]').checkbox(),e.find('[data-fc="input"]').input({popup_animation:!1}),e.find('[data-fc="radio"]').radio(),e.find('[data-fc="radio-group"]').radio_group(),e.find('[data-fc="select"]').select({popup_animation:!1,autoclose:!0}),e.find('[data-fc="tab"]').tabs(),e.find('[data-fc="tumbler"]').tumbler(),e.find('[data-fc="widget"]').widget()},n.init=function(){e.remove().appendTo("body"),e.data(n.data),n.set_position(),n.set_size(),0==e.children().length?(n.render(),n.init_components()):(n.init_components(),n.bind_buttons()),n.bind(),e.trigger(n.data._triggers.loaded),n.data.show?n.show():n.hidden()},n.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})}};t.fn.modal__=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on $.modal__"):a.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(options){return this.each(function(){var self=$(this),data=self.data("_widget");if(!data){self.data("_widget",{type:"search",target:self});var that=this.obj={};that.defaults={source:null,func:function(){},areas:"entitysearch",usesp:!1,search_delay:300},that.data=self.data(),that.options=$.extend(!0,{},that.defaults,that.data,options),self.data(that.options),that.data._el={search:$('<div class="search"></div>'),search__view:$('<div class="search__view search__view_hidden"></div>'),search__backdrop:$('<div class="search__backdrop"></div>'),search__dialog:$('<div class="search__dialog"></div>'),search__header:$('<div class="search__header"></div>'),search__header_row_input:$('<div class="search__header-row"></div>'),input:$(['<span class="input" data-fc="input" data-placeholder="Поиск">','<span class="input__box">','<span class="alertbox">','<span class="icon icon_svg_search_white"></span>',"</span>",'<input type="text" class="input__control">','<button class="button" data-fc="button" type="button" tabindex="-1">','<span class="button__text">Очистить</span>',"</button>","</span>","</span>"].join("")),button_close:$(['<button class="button" data-fc="button" type="button" tabindex="-1">','<span class="button__text">Закрыть</span>',"</button>"].join("")),search__header_row_filter:$('<div class="search__header-row"></div>'),search__body:$('<div class="search__body"></div>'),results:$('<table class="table"></table>'),spinner:$(['<span class="icon">','<span class="spinner"></span>',"</span>"].join(""))},that.data._private={timeout_id:null,xhr:null,search_text:null,search_current_text:null,search_results:null},that.destroy=function(){that.hide(),setTimeout(function(){self.removeData(),self.remove()},500)},that.hide=function(){that.data._el.search__view.hasClass("search__view_visible")&&(that.data._el.search__view.removeClass("search__view_visible"),setTimeout(function(){that.data._el.search__view.addClass("search__view_hidden"),$(window).off("keyup.search")},100))},that.show=function(){that.data._el.search__view.removeClass("search__view_hidden"),setTimeout(function(){that.data._el.search__view.addClass("search__view_visible"),that.focus(),that.bind_hide()},100)},that.focus=function(){that.data._el.input.input("focus")},that.render=function(){$("body").append(that.data._el.search.append(that.data._el.search__view.append(that.data._el.search__backdrop,that.data._el.search__dialog.append(that.data._el.search__header.append(that.data._el.search__header_row_input.append(that.data._el.input,that.data._el.button_close)),that.data._el.search__body))))},that.render_error=function(t){var a=$('<table class="table"><thead><tr><td class="table__td_no_border">'+t+"</td></tr></thead></table>");that.data._el.search__body.empty().append(a)},that.render_results=function(t){if(jQuery.isArray(t))if(t.length>0){var a=$('<table class="table"></table>'),e=$("<tbody></tbody>"),n=$("<tr></tr>"),i=$("<td></td>"),o=$('<a class="link"></a>');t.map(function(t){!t.hasOwnProperty("__type__")||"filesearch"!=t.__type__&&"documentsearch"!=t.__type__?e.append(n.clone().append(i.clone().addClass("color_grey").text(t.EntityTitle),i.clone().append(o.clone().text(t.Name).attr("href","/asyst/"+t.EntityName+"/form/auto/"+t.Id+"?mode=view&back"+encodeURIComponent(location.href)).attr("target","_blank")))):e.append(n.clone().append(i.clone().addClass("color_grey").text("Файл"),i.clone().append(o.clone().text(t.Name).attr("href",t.Url).attr("target","_blank"))))}),that.data._el.search__body.empty().append(a.append(e))}else that.render_error(Globa.RecordNotFound.locale());else that.render_error(Globa.RecordNotFound.locale())},that.search=function(){that.data._private.search_text=that.data._el.input.input("value"),that.data._private.search_text?(that.data._private.timeout_id&&(clearTimeout(that.data._private.timeout_id),that.data._private.timeout_id=null),that.data._private.timeout_id=setTimeout(function(){if(that.data._private.search_current_text!=that.data._private.search_text){that.data._private.xhr&&(that.data._private.xhr.abort(),that.data._private.xhr=null),that.data._private.search_current_text=that.data._private.search_text,that.data._private.timeout_id=null;var success=function(t){that.data._el.spinner.remove(),that.data._private.xhr=null,that.render_results(t)},error=function(){that.data._el.spinner.remove(),that.data._private.xhr=null},exists=function(t){return t.split(".").reduce(function(t,a){return void 0===t?t:t[a]},window)};"function"==typeof exists(that.data.func)?(that.data._el.input.find(".input__control").after(that.data._el.spinner),that.data._private.xhr=eval(that.data.func)(that.data._private.search_current_text,success,error,null,that.data.areas,that.data.usesp)):that.render_error("search method does not exist")}},that.data.search_delay)):this.clear()},that.clear=function(){that.data._private.search_text="",that.data._private.search_current_text="",that.data._el.search__body.empty(),that.focus()},that.bind=function(){that.data.source&&(that.data.source.on("click",that.show),that.data._el.search__backdrop.on("click",that.hide),that.data._el.button_close.on("click",that.hide),that.bind_search())},that.bind_hide=function(){$(window).on("keyup.search",function(t){27==t.keyCode&&that.hide()})},that.bind_search=function(){var t=function(t){switch(t.keyCode){case 27:that.hide();break;default:that.search()}t.stopPropagation(),t.preventDefault()},a=function(t){switch(t.keyCode){case 27:case 13:t.preventDefault()}t.stopPropagation()};that.data._el.input.on("keydown keypress",a),that.data._el.input.on("keyup",t)},that.init_components=function(){that.data._el.search.find('[data-fc="alertbox"]').alertbox(),that.data._el.search.find('[data-fc="button"]').button({popup_animation:!1}),that.data._el.search.find('[data-fc="checkbox"]').checkbox(),that.data._el.search.find('[data-fc="input"]').input({popup_animation:!1}),that.data._el.search.find('[data-fc="radio"]').radio(),that.data._el.search.find('[data-fc="radio-group"]').radio_group(),that.data._el.search.find('[data-fc="select"]').select({popup_animation:!1,autoclose:!0}),that.data._el.search.find('[data-fc="tab"]').tabs(),that.data._el.search.find('[data-fc="tumbler"]').tumbler(),that.data._el.search.find('[data-fc="widget"]').widget()},that.init=function(){that.render(),that.init_components(),that.bind()},that.init()}return this})},destroy:function(){return this.each(function(){this.obj.destroy()})},hide:function(){return this.each(function(){this.obj.hide()})},show:function(){return this.each(function(){this.obj.show()})}};$.fn.search=function(t){return methods[t]?methods[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void $.error("Method "+t+" does not exist on $.search"):methods.init.apply(this,arguments)}}(jQuery);