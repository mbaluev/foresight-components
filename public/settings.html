<!doctype html>
<head>
    <title>foresight-reports</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="foresight.third.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="foresight.components.min.css" type="text/css" media="all">
</head>
<body class="page proximanova">
    <div class="fs-view">
        <div class="fs-view__header">
            <div class="header">
                <div class="header__column header__column-left">
                    <button class="button" type="button" data-fc="button" id="button_toggle-menu">
                        <span class="icon icon_css_animate">
                            <span class="icon__menu" data-fc="icon__menu">
                                <span class="icon__menu-global icon__menu-top"></span>
                                <span class="icon__menu-global icon__menu-middle"></span>
                                <span class="icon__menu-global icon__menu-bottom"></span>
                            </span>
                        </span>
                        <span class="button__anim"></span>
                    </button>
                    <a class="button" href="dashboard.html" data-fc="button">
                        <span class="icon icon_svg_home"></span>
                        <span class="button__anim"></span>
                    </a>
                    <button class="button" type="button" data-fc="button">
                        <span class="icon icon_svg_search"></span>
                        <span class="button__anim"></span>
                    </button>
                </div>
                <div class="header__column header__column-right">
                    <button class="button" data-fc="button" data-toggle="popup" data-target="#account">
                        <span class="icon icon_svg_settings"></span>
                        <span class="button__text mobile mobile_hide">Функциональный администратор</span>
                        <span class="icon icon_svg_down"></span>
                    </button>
                    <div class="popup" id="account" data-position="bottom left" data-width="auto">
                        <ul class="popup__list">
                            <li class="popup__list-item">
                                <a class="popup__link" href="#">
                                    <span class="icon icon_svg_settings"></span>
                                    <span class="popup__text">Профиль</span>
                                </a>
                            </li>
                            <li class="popup__list-item">
                                <a class="popup__link" href="settings.html">
                                    <span class="popup__text">Центр настроек</span>
                                </a>
                            </li>
                            <li class="popup__list-item">
                                <a class="popup__link" href="#">
                                    <span class="popup__text">Администрирование</span>
                                </a>
                            </li>
                            <li class="popup__list-item">
                                <a class="popup__link" href="logout.html">
                                    <span class="popup__text">Выход</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="fs-view__main">
            <div class="fs-view__left fs-view__left_hidden">
                <div class="menu" data-fc="menu">
                    <ul class="menu__list">
                        <li class="menu__item">
                            <a class="menu__item-link link" href="index.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Главная</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="card.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Карточка</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="gridview.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Реестр</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="docsearch.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Расширенный поиск документов</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="dashboard.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Дашборд</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="single.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Дашборд с одним виджетом</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="reports.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Центр отчетов</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="bubble.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Баблчарт моих контрактов</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="cloud.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Облако тэгов</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link" href="ktchart.html">
                                <span class="menu__item-link-content">
                                    <span class="menu__item-text">Визуализация иерархии контрольных точек</span>
                                </span>
                            </a>
                        </li>
                        <li class="menu__item">
                            <a class="menu__item-link link">
                                <span class="menu__item-link-content">
                                    <span class="icon icon_svg_settings_white"></span>
                                    <span class="menu__item-text">Компоненты</span>
                                    <span class="icon menu__icon icon_svg_right_white"></span>
                                </span>
                            </a>
                            <div class="menu menu__submenu-container">
                                <ul class="menu__list menu__submenu">
                                    <li class="menu__item">
                                        <a class="menu__item-link link" href="components.html">
                                            <span class="menu__item-link-content">
                                                <span class="menu__item-text">Все</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li class="menu__item">
                                        <a class="menu__item-link link" href="icons.html">
                                            <span class="menu__item-link-content">
                                                <span class="menu__item-text">Иконки</span>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="fs-view__middle fs-view__middle_full">
                <div class="fs-view__middle-scroll" id="container">
                </div>
            </div>
        </div>
    </div>

    <script src="third/jquery-3.2.1.min.js"></script>
    <script src="third/jquery-ui.min.js"></script>
    <script src="third/jquery.event.drag-2.3.0.js"></script>
    <script src="third/jquery.event.drop-2.3.0.js"></script>
    <script src="third/highcharts.js"></script>

    <script src="foresight.third.min.js"></script>
    <script src="foresight.components.min.js"></script>
    <script src="foresight.pages.min.js"></script>

    <script src="asyst.loaders/asyst.contentloader.js"></script>
    <script>
        $(function(){
            var items = [{"x":0,"y":0,"width":2,"height":5,"settings":{"collapsed":false,"color":"#ccc","name":"Пользователи и разрешения","pageid":"LibrarySettings","elementid":"Пользователи и разрешения"}},{"x":2,"y":0,"width":2,"height":8,"settings":{"collapsed":false,"color":"#ff5940","name":"Системные настройки","pageid":"LibrarySettings","elementid":"Системные настройки"}},{"x":4,"y":0,"width":2,"height":4,"settings":{"collapsed":false,"color":"#ff5940","name":"Настройка интерфейсов","pageid":"LibrarySettings","elementid":"Настройка интерфейсов"}},{"x":6,"y":0,"width":3,"height":14,"settings":{"collapsed":false,"color":"#5a97f2","name":"Сущности системы","pageid":"LibrarySettings","elementid":"Сущности системы"}},{"x":9,"y":0,"width":3,"height":9,"settings":{"collapsed":false,"color":"#5a97f2","name":"Бизнес настройки","pageid":"LibrarySettings","elementid":"Бизнес настройки"}},{"x":4,"y":4,"width":2,"height":11,"settings":{"collapsed":false,"color":"#5a97f2","name":"Справочники системы","pageid":"LibrarySettings","elementid":"Справочники системы"}},{"x":0,"y":5,"width":2,"height":6,"settings":{"collapsed":false,"color":"#ccc","name":"Настройки галерей","pageid":"LibrarySettings","elementid":"Настройки галерей"}},{"x":2,"y":8,"width":2,"height":6,"settings":{"collapsed":false,"color":"#ff5940","name":"Глобальные системные настройки","pageid":"LibrarySettings","elementid":"Глобальные системные настройки"}}];
            var settings = [
                {
                    name: "Стадии жизненного цикла",
                    url: "/asyst/browse/ActivityPhase?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Типовые КТ",
                    url: "/asyst/browse/PointTemplate?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Типовые документы сущностей",
                    url: "/asyst/browse/Document?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Циклы согласования",
                    url: "/asyst/browse/ReviewCycle?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Согласующие",
                    url: "/asyst/browse/Reviewer?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Отчетные мероприятия",
                    url: "/asyst/browse/repType?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Календарь отчетных мероприятий",
                    url: "/asyst/browse/repTypeCalendar?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Контрольный список приемки",
                    url: "/asyst/browse/PointTemplateQuestion?showadmin=true",
                    urltype: "_top",
                    category: "Бизнес настройки",
                    color: "#02cfaa"
                },
                {
                    name: "Тип проекта",
                    url: "/asyst/browse/ProjectType?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Приоритет",
                    url: "/asyst/browse/Priority?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Цель",
                    url: "/asyst/browse/Goal?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Тип КТ",
                    url: "/asyst/browse/PointType?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Состояние совещания",
                    url: "/asyst/browse/MeetingStatus?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Состояние поручения",
                    url: "/asyst/browse/OrderStatus?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Категория риска",
                    url: "/asyst/browse/Riskcategory?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Влияние риска",
                    url: "/asyst/browse/RiskImpact?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Вероятность риска",
                    url: "/asyst/browse/RiskProbability?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Состояние риска",
                    url: "/asyst/browse/RiskState?showadmin=true",
                    urltype: "_top",
                    category: "Справочники системы",
                    color: "#02cfaa"
                },
                {
                    name: "Активность",
                    url: "/asyst/browse/Activity?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Портфель",
                    url: "/asyst/browse/Portfolio?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Проект",
                    url: "/asyst/browse/Project?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "КТ",
                    url: "/asyst/browse/Point?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Совещание",
                    url: "/asyst/browse/Meeting?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Вопросы",
                    url: "/asyst/browse/Question?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Поручения",
                    url: "/asyst/browse/Order?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Риски",
                    url: "/asyst/browse/Risk?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Мероприятия реагирования на риск",
                    url: "/asyst/browse/RiskResponding?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Мероприятия ослабления риска",
                    url: "/asyst/browse/RiskMitigation?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Статус-отчеты",
                    url: "/asyst/browse/repReport?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Запросы на изменения",
                    url: "/asyst/browse/ChangeRequest?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Документы. Файлы",
                    url: "/asyst/browse/DocumentFile?showadmin=true",
                    urltype: "_top",
                    category: "Сущности системы",
                    color: "#02cfaa"
                },
                {
                    name: "Правила",
                    url: "/asyst/browse/Rule?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Правила матрицы доступа",
                    url: "/asyst/browse/AccessRule?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Матрица доступа",
                    url: "/asyst/AccessMatrix.aspx?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Формы сбора отчетов",
                    url: "/asyst/browse/repFormType?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Центр настроек. Категории",
                    url: "/asyst/browse/SettingsListcategory?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Центр настроек",
                    url: "/asyst/browse/SettingsList?showadmin=true",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Настройки почты",
                    url: "#",
                    urltype: "_top",
                    category: "Системные настройки",
                    color: "#ff6666"
                },
                {
                    name: "Пользователи системы",
                    url: "/asyst/browse/User?showadmin=true",
                    urltype: "_top",
                    category: "Пользователи и разрешения",
                    color: "#58c9f3"
                },
                {
                    name: "Группы безопасности",
                    url: "/asyst/browse/Group?showadmin=true",
                    urltype: "_top",
                    category: "Пользователи и разрешения",
                    color: "#58c9f3"
                },
                {
                    name: "Оргструктура",
                    url: "/asyst/browse/OrgUnit?showadmin=true",
                    urltype: "_top",
                    category: "Пользователи и разрешения",
                    color: "#58c9f3"
                },
                {
                    name: "Центр справочников. Категории ",
                    url: "/asyst/browse/EnumListcategory?showadmin=true",
                    urltype: "_top",
                    category: "Настройки галерей",
                    color: "#58c9f3"
                },
                {
                    name: "Центр отчетов",
                    url: "/asyst/browse/ReportList?showadmin=true",
                    urltype: "_top",
                    category: "Настройки галерей",
                    color: "#58c9f3"
                },
                {
                    name: "Центр отчетов. Категории",
                    url: "/asyst/browse/ReportListcategory?showadmin=true",
                    urltype: "_top",
                    category: "Настройки галерей",
                    color: "#58c9f3"
                },
                {
                    name: "Центр справочников",
                    url: "/asyst/browse/EnumList?showadmin=true",
                    urltype: "_top",
                    category: "Настройки галерей",
                    color: "#58c9f3"
                },
                {
                    name: "Месяцы",
                    url: "/asyst/browse/D_Month?showadmin=true",
                    urltype: "_top",
                    category: "Глобальные системные настройки",
                    color: "#58c9f3"
                },
                {
                    name: "Переводы",
                    url: "/asyst/browse/MetaTranslation?showadmin=true",
                    urltype: "_top",
                    category: "Глобальные системные настройки",
                    color: "#58c9f3"
                },
                {
                    name: "Изменения переводчика",
                    url: "/asyst/browse/MLChangeLog?showadmin=true",
                    urltype: "_top",
                    category: "Глобальные системные настройки",
                    color: "#58c9f3"
                },
                {
                    name: "Олицетворение подразделений",
                    url: "/asyst/browse/ImpersonateRole?showadmin=true",
                    urltype: "_top",
                    category: "Глобальные системные настройки",
                    color: "#58c9f3"
                },
                {
                    name: "Страницы",
                    url: "/asyst/browse/MetaPage?showadmin=true",
                    urltype: "_top",
                    category: "Настройка интерфейсов",
                    color: "#ff6666"
                },
                {
                    name: "Элементы страниц",
                    url: "/asyst/browse/MetaPageElement?showadmin=true",
                    urltype: "_top",
                    category: "Настройка интерфейсов",
                    color: "#ff6666"
                }
            ];
            var library = loadLibrary([{ text: 'Настройки', value: 'LibrarySettings', items: [] }], settings);
            var contents = loadContents(library, settings);
            var dashboard = new Dashboard({
                containerid: 'container',
                items: items,
                lib: {
                    settings: {
                        library: library,
                        loader: $.extend(Asyst.ContentLoader, { contents: contents })
                    }
                },
                add: function(data){},
                save: function(data){
                    console.log(JSON.stringify(data));
                }
            });
            function loadLibrary(library, settings){
                var settings_by_category = {};
                settings.map(function(a){
                    if (a.category in settings_by_category) {
                        settings_by_category[a.category] ++;
                    } else {
                        settings_by_category[a.category] = 0;
                        library[0].items.push({
                            text: a.category,
                            value: a.category
                        });
                    }
                });
                return library;
            }
            function loadContents(library, settings){
                var contents = [];
                library[0].items.map(function(li){
                    var rows = '';
                    settings.map(function(s){
                        if (s.category == li.value) {
                            rows += '<tr><td><a class="link" href="' + s.url + '" target="' + s.urltype + '">' + s.name + '</a></td></tr>';
                        }
                    });
                    contents.push({
                        pageid: library[0].value,
                        elementid: li.value,
                        content: [
                            '<div class="widget__content widget__content_scroll">',
                            '<table class="table">',
                            '<tbody>' + rows + '</tbody>',
                            '</table>',
                            '</div>'
                        ].join('')
                    });
                });
                return contents;
            }
        });
    </script>
</body>
</html>